if (self.CavalryLogger) { CavalryLogger.start_js(["TW29T"]); }

__d("EventsActionsLoggerJSConfig",[],(function a(b,c,d,e,f,g){f.exports={type:{UNKNOWN:"unknown",ACTION_FAIL:"action_fail",ENTRY:"entry",VIEW_PERMALINK:"view_permalink",VIEW_RECENT_PHOTOS_CARD:"view_recent_photos_card",VIEW_PHOTOS_PAGE:"view_photo_page",VIEW_ATTACHMENT:"view_attachment",VPV:"VPV",LOAD:"load",LOAD_FAILED:"load_failed",CLICK:"click",VIEW:"view",REMOVE:"remove",CANCEL:"cancel",DELETE:"delete",HIDE:"hide",POST:"post",EXPORT:"export",RSVP_CONVERSION:"rsvp_conversion",FEED_CLICK:"feed_click",SCROLL:"scroll",SCROLL_TO_BOTTOM:"scroll_to_bottom",VIEW_PIVOT_EVENT:"view_pivot_event",SELECT:"select",HOVER:"hover",CONFIRM:"confirm",SEARCH_QUERY:"search_query",COMPONENT_DID_MOUNT:"component_did_mount",INVITE:"invite",EDIT:"edit",CREATE:"create",PUBLISH:"publish",JOIN:"join",ASSOCIATE:"associate",DECLINE:"decline",SAVE:"save",UPLOAD_COVER:"upload_cover",REMOVE_COVER:"remove_cover",SELECT_THEME:"select_theme",SCHEDULE:"schedule",REMOVE_SCHEDULE:"remove_schedule",WATCH:"watch",RESERVE_TICKET:"reserve_ticket",TICKET_ORDER_TIMEOUT:"ticket_order_timeout",TICKET_ORDER_PURCHASE_ABANDONED:"ticket_order_purchase_abandoned",ROLLBACK_TICKET_ORDER:"rollback_ticket_order",PURCHASE_TICKET:"purchase_ticket",UPDATE_TICKET_QRCODE:"update_ticket_qrcode",CHARGE_RESERVE_TICKET:"charge_reserve_ticket",TICKET_PAYMENT:"ticket_payment",SHIP_TICKET_ORDER:"ship_ticket_order",TICKET_ORDER_UI_TIMEOUT:"ticket_order_ui_timeout",CANCEL_TICKET_ORDER:"cancel_ticket_order",SHARE_THROUGH_MESSAGE:"share_through_message",CREATE_REJECT:"create_reject",LIKE_GOING_STORY:"like_going_story",COMMENT_GOING_STORY:"comment_going_story",LIKE:"like",UNLIKE:"unlike",COMMENT:"comment",SHARE_STORY:"share_story",MENTIONED:"mentioned",DELETE_POST:"delete_post",APPROVE_POST:"approve_post",CHECKIN:"checkin",JOIN_VIA_ADMIN:"join_via_admin",ASSOCIATE_VIA_ADMIN:"associate_via_admin",REMOVE_VIA_ADMIN:"remove_via_admin",DECLINE_VIA_ADMIN:"decline_via_admin",JOIN_VIA_EMAIL:"join_via_email",ASSOCIATE_VIA_EMAIL:"associate_via_email",REMOVE_VIA_EMAIL:"remove_via_email",DECLINE_VIA_EMAIL:"decline_via_email",INVITE_VIA_EMAIL:"invite_via_email",JOIN_VIA_SMS:"join_via_sms",ASSOCIATE_VIA_SMS:"associate_via_sms",REMOVE_VIA_SMS:"remove_via_sms",DECLINE_VIA_SMS:"decline_via_sms",INVITE_VIA_SMS:"invite_via_sms",SHARE:"share",NOTIFICATION_WATERFALL:"notification_waterfall",SUBSCRIBE_TO_ALL_NOTIFICATION:"subscribe_to_all_notification",SUBSCRIBE_TO_MOST_IMPORTANT_NOTIFICATION:"subscribe_to_most_important",SUBSCRIBE_TO_HOST_ONLY_NOTIFICATION:"subscribe_to_host_only_notification",UNSUBSCRIBE_NOTIFICATION:"unsubscribe_notification",SUBSCRIBE_TO_ALL_NOTIFICATION_VIA_ADMIN:"subscribe_to_all_notification_via_admin",SUBSCRIBE_TO_MOST_IMPORTANT_NOTIFICATION_VIA_ADMIN:"subscribe_to_most_important_via_admin",SUBSCRIBE_TO_HOST_ONLY_NOTIFICATION_VIA_ADMIN:"subscribe_to_host_only_notification_via_admin",UNSUBSCRIBE_NOTIFICATION_VIA_ADMIN:"unsubscribe_notification_via_admin",REMINDER_NOTIFICATION_ABANDONED:"reminder_notification_abandoned",REMINDER_NOTIFICATION_SENT:"reminder_notification_sent",REMINDER_PRECEDING_NOTIFICATION_SENT:"reminder_preceding_notification_sent",SUBSCRIBE_CALENDAR:"subscribe_calendar",UNSUBSCRIBE_CALENDAR:"unsubscribe_calendar",INVITE_EMAIL_SENT:"invite_email_sent",GENERATE:"generate",MARK_AS_SEEN:"mark_as_seen",ADD_TO_CALENDAR:"add_to_calendar",REMOVE_FROM_CALENDAR:"remove_from_calendar",SELECT_FILTER:"select_filter",SEEN_STATE_MEGAPHONE_DISPLAYED:"seen_state_megaphone_displayed",CHANGE_CATEGORY:"change_category",CATEGORY_SELECTOR_CLICKED:"category_selector_clicked",CATEGORY_SELECTOR_CLICKED_AND_SAVED:"category_selector_clicked_and_saved",ADD_ADMIN:"add_admin",REMOVE_ADMIN:"remove_admin",TRIGGER:"trigger",EVENT_DISCOVER_QUERY:"event_discover_query",APP_START:"app_start",LOCATION_AUTHORIZATION:"location_authorization",UNPUBLISH:"unpublish",SELF_SERVE_CHECK_IN:"self_serve_check_in",SELF_SERVE_UNDO_CHECK_IN:"self_serve_undo_check_in",ENABLE_REGISTRATION:"enable_registration",DISABLE_REGISTRATION:"disable_registration",ALARM_TICKET_OUT_OF_STOCK:"alarm_ticket_out_of_ticket",ALARM_TICKET_PRICE_MISMATCH:"alarm_ticket_price_mismatch",DUPLICATE_DETECTED:"duplicate_detected",OFFICIAL_CLAIM:"official_claim",DELETE_INGESTION:"delete_ingestion",REPORT_INFO:"report_info",UNDELETE_INGESTION:"undelete_ingestion"},target:{UNKNOWN:"unknown",INVITE_DIALOG:"invite_dialog",CREATE_DIALOG:"create_dialog",EDIT_DIALOG:"edit_dialog",CANCEL_DIALOG:"cancel_dialog",PERMALINK:"permalink",WALL:"wall",WALL_OF_SADNESS:"wos",REACTION_UNIT:"reaction_unit",INLINE_COMPOSER_PROMPT:"inline_composer_prompt",STORY_PERMALINK:"story_permalink",LINK:"link",EVENT:"event",USER:"user",PAGE:"page",GROUP:"group",DASHBOARD:"dashboard",RESULT_LIST:"result_list",PROFILE_LIST:"profile_list",GUEST_LIST:"guest_list",BUY_TICKET:"buy_ticket",NUX:"nux",STORY:"story",FILTER:"filter",PHOTO:"photo",HEADER:"header",FOOTER:"footer",COVER_PHOTO:"cover_photo",TAB_BAR:"tab_bar",EVENT_TIP:"event_tip",ADMIN_LIST:"admin_list",REQUESTED_ADMIN_LIST:"requested_admin_list",CREATION_PROMPT:"creation_prompt",NOTIFICATION:"notification",MAP:"map",DETAILS:"details",PIVOT:"pivot",POST:"post",EVENTS_COLLECTION:"events_collection",INVITATION:"invitation",SUGGESTION:"suggestion",FRAME_POST:"frame_post",FRAME_DIRECT_MESSAGE:"frame_direct_message",FRAME_STORY:"frame_story",TRIGGER_WORD:"trigger_word",TRIGGER_CTA:"trigger_cta",REMINDER_BANNER:"reminder_banner",REMINDER_CREATE_BUTTON:"reminder_create_button",REMINDER_CUSTOMIZE_BUTTON:"reminder_customize_button",REMINDER_DELETE_BUTTON:"reminder_delete_button",REMINDER_CANCEL_BUTTON:"reminder_cancel_button",REMINDER_UPDATE_BUTTON:"reminder_update_button",REMINDER_ENTRYPOINT:"reminder_entrypoint",REMINDER_ADMIN_TEXT:"reminder_admin_text",REMINDER_CHANGE_NAME_BUTTON:"reminder_change_name_button",REMINDER_NONE_ACTIVE_ALERT:"reminder_none_active_alert",REMINDER_RELATED_EVENT:"reminder_related_event",REMINDER_RELATED_EVENT_BUTTON:"reminder_related_event_button",REMINDER_LOCATION_MAP:"reminder_location_map",REMINDER_MAP_SERVICE_APPLE_MAP_BUTTON:"reminder_map_service_apple_map_button",REMINDER_MAP_SERVICE_GOOGLE_MAP_BUTTON:"reminder_map_service_google_map_button",REMINDER_MAP_SERVICE_RIDE_SERVICE_BUTTON:"reminder_map_service_ride_service_button",REMINDER_MAP_SERVICE_CANCEL_BUTTON:"reminder_map_service_cancel_button",DEVICE_BACK_BUTTON:"device_back_button",EVENT_REMINDER:"event_reminder",REMINDER_MAI_SUGGESTION:"reminder_mai_suggestion",ATTACHMENT_PLAN_BUTTON:"xma_plan_button",BUY_ONSITE_TICKET_BUTTON:"buy_onsite_ticket_button",VIEW_TICKET_BUTTON:"view_ticket_button",SEE_ALL_BUTTON:"see_all_button",CREATE_EVENT_BUTTON:"create_event_button",CREATE_PUBLIC_EVENT_BUTTON:"create_public_event_button",CREATE_PRIVATE_EVENT_BUTTON:"create_private_event_button",CREATE_COMMUNITY_EVENT_BUTTON:"create_community_event_button",CREATE_GROUP_EVENT_BUTTON:"create_group_event_button",BEGIN_EDIT_BUTTON:"begin_edit_button",DONE_CREATION_BUTTON:"done_creation_button",CANCEL_CREATION_BUTTON:"cancel_creation_button",EXIT_CREATION_BUTTON:"exit_creation_button",SAVE_DRAFT_BUTTON:"save_draft_button",PUBLISH_EVENT_BUTTON:"publish_event_button",SCHEDULE_EVENT_BUTTON:"schedule_event_button",SEE_EVENTS_BUTTON:"see_events_button",SHARE_CALENDAR_BUTTON:"share_events_button",LEARN_MORE_BUTTON:"learn_more_button",PROMOTE_EVENT_BUTTON:"promote_event_button",PROMOTE_EVENT_ITEM:"promote_event_item",PROMOTE_EVENT_MENU:"promote_event_menu",PROMOTE_TICKET_ITEM:"promote_ticket_item",GUEST_LIST_EMAIL_BUTTON:"guest_list_email_button",GUEST_LIST_EMAIL_CANCEL_BUTTON:"guest_list_email_cancel_button",GUEST_LIST_EMAIL_SEND_BUTTON:"guest_list_email_send_button",GUEST_LIST_EMAIL_DRAFT_BUTTON:"guest_list_email_draft_button",SEE_MORE_BUTTON:"see_more_button",COPY_LINK_BUTTON:"copy_link_button",CHECKIN_BUTTON:"checkin_button",SAY_THANKS_BUTTON:"say_thanks_button",CATEGORY_SELECTOR:"category_selector",TAG_SELECTOR:"tag_selector",TAG_TOKEN:"tag_token",CREATOR_MICROSITE_LINK:"creator_microsite_link",INVITE_BUTTON:"invite_button",SHARE_IN_NEWSFEED_OPTION:"share_in_newsfeed_option",SHARE_EVENT_BUTTON:"share_event_button",INTERESTED_EVENT_BUTTON:"interested_event_button",DISMISS_PROMPT_BUTTON:"composer_dismiss_prompt_button",PHOTO_PROMPT_OVERFLOW_BUTTON:"photo_prompt_overflow_button",MANAGE_EVENT_MENU:"manage_event_menu",MANAGE_TICKET_MENU:"manage_ticket_menu",DISCOVER_TIME_FILTER:"discover_time_filter",DISCOVER_LOCATION_FILTER:"discover_location_filter",DISCOVER_LOCATION_LIST:"discover_location_list",COMPOSER_POST_BUTTON:"composer_post_button",MESSAGE_BUTTON:"message_button",DISMISS_BUTTON:"dismiss_button",NOTIFICATIONS_MENU:"notifications_menu",PERMALINK_ACTIVITY_TAB_CELL:"permalink_activity_tab_cell",PERMALINK_INFO_ROW_LINK:"permalink_info_row_link",GET_DIRECTIONS_BUTTON:"get_directions_button",ACCEPT_COHOST_INVITE_BUTTON:"accept_cohost_invite_button",DECLINE_COHOST_INVITE_BUTTON:"decline_cohost_invite_button",UNDO_COHOST_INVITE_RSVP_BUTTON:"undo_cohost_invite_rsvp_button",BLOCK_COHOST_INVITE_BUTTON:"block_cohost_invite_button",EXTERNAL_SHARE_OPTIONS:"external_share_options",SHARE_IN_NEWS_FEED_OPTION:"share_in_news_feed_option",SHARE_CTA:"share_cta",MESSENGER_PLAN_CTA:"messenger_plan_cta",LIVE_VIDEO_CTA:"live_video_cta",INVITE_FRIENDS_OPTION:"invite_friends_option",INVITE_VIA_SMS_OPTION:"invite_via_sms_option",SHARE_INVITE_OPTION:"share_invite_option",SHARE_MESSAGE_OPTION:"share_message_option",INSIGHTS_DASHBOARD:"event_insights_dashboard",INSIGHTS_DETAIL_BUTTON:"insights_detail_button",INSIGHTS_DRILLDOWN:"insights_drilldown",EDUCATION_UNIT:"education_unit",EDUCATION_UNIT_NEXT_LINK:"eduication_unit_next_link",EDUCATION_UNIT_CTA:"education_unit_cta",BUY_TICKETS_BUTTON:"buy_tickets_button",TICKET_CONTINUE_BUTTON:"ticket_continue_button",PURCHASE_TICKET_BUTTON:"purchase_ticket_button",VIEW_PURCHASED_TICKETS_BUTTON:"view_purchased_tickets_button",TICKET_CONFIRMATION:"ticket_confirmation",TICKET_PURCHASE_ERROR:"ticket_purchase_error",MEDIA_EFFECTS_CTA:"media_effects_cta",SOCAL_APP:"socal_app",INSTALL_SOCAL_BUTTON:"install_socal_button",EVENTS_GUIDE:"events_guide",EVENTS_GUIDE_LINK:"events_guide_link",EVENTS_GUIDE_SUBGUIDE:"events_guide_subguide",EVENTS_GUIDE_PERFORMER_PAGE:"events_guide_performer_page",EVENTS_GUIDE_FRIENDS_NEARBY:"events_guide_friends_nearby",SEARCH_BAR:"search_bar",DISCOVERY_MAP:"discovery_map",DISCOVERY_LIST:"discovery_list",DISCOVERY_CATEGORY_PILL:"discovery_category_pill",DISCOVERY_SEARCH_ENTER:"discovery_search_enter",DISCOVERY_SEARCH_SUBMITTED:"discovery_search_submitted",DISCOVERY_SEARCH_CANCELLED:"discovery_search_cancelled",DISCOVERY_TIME_FILTER_TAPPED:"discovery_time_filter_tapped",DISCOVERY_TIME_FILTER_SELECTED:"discovery_time_filter_selected",DISCOVERY_TIME_FILTER_CANCELLED:"discovery_time_filter_cancelled",CALL_REMINDER_CANCEL_BUTTON:"call_reminder_cancel_button",CALL_REMINDER_PROMO_ITEM:"call_reminder_promo_item",CALL_REMINDER_PROMOBAR_ITEM:"call_reminder_promobar_item",CALL_REMINDER_ONE_HOUR_BUTTON:"call_reminder_one_hour_button",CALL_REMINDER_CUSTOM_BUTTON:"call_reminder_custom_date_button",CALL_REMINDER_SCHEDULE_CALL_BUTTON:"call_reminder_schedule_call_button",CALL_REMINDER_EVENT_EXIST_ALERT:"call_reminder_event_exist_conflict_alert",TOUR:"tour",TOUR_OTHER_EVENTS_IN_TOUR_CARD:"tour_other_events_in_tour_card",LOAD_MORE:"load_more",MAIN_CARD:"main_card",MAP_DIALOG:"map_dialog",MAP_LINK:"map_link",SHARE_TOUR_BUTTON:"share_tour_button",PAGE_UPCOMING_EVENTS_CARD:"page_upcoming_events_card",CREATE_TOUR_BUTTON:"create_tour_button",CREATE_TOUR_DIALOG:"create_tour_dialog",EDIT_TOUR_DIALOG:"edit_tour_dialog",PERMALINK_DUPLICATE:"permalink_duplicate",FRAME_CREATE_BUTTON:"frame_create_button",FRAME_EDIT_BUTTON:"frame_edit_button",FRAME_MANAGE_BUTTON:"frame_manage_button",FRAME_CREATE_RHC:"frame_create_rhc",FRAME_EDIT_RHC:"frame_edit_rhc",FRAME_MANAGE_RHC:"frame_manage_rhc",FRAME_TOGGLE:"frame_toggle",MESSENGER_POLL_POLL_UPSELL_BUTTON_IN_PLAN:"messenger_poll_poll_upsell_button_in_plan",MESSENGER_POLL_DATE_TIME_TYPE_BUTTON:"messenger_poll_date_time_type_button",MESSENGER_POLL_BASIC_TYPE_BUTTON:"messenger_poll_basic_type_button",MESSENGER_POLL_CREATE_BUTTON:"messenger_poll_create_button",MESSENGER_POLL_CANCEL_BUTTON:"messenger_poll_cancel_button",MESSENGER_POLL_ENTRY_POINT:"messenger_poll_entry_point",DISMISS_UPSELL_EVENT_NEWS_FEED:"dismiss_upsell_event_news_feed",UPSELL_EVENT_NEWS_FEED_CARD:"upsell_event_news_feed_card",INTERCEPT_PAGE_COMPOSER:"intercept_page_composer",INTERCEPT_CONTINUE_POST_BUTTON:"intercept_continue_post_button",MESSAGE_FRIENDS_CARD:"message_friends_card",TYPEAHEAD_ENTRY:"typeahead_entry",SHARE_TIME:"share_time",SEE_ALL_TIMES:"see_all_times",ACCEPT_COHOST_REQUEST:"accept_cohost_request",DECLINE_COHOST_REQUEST:"decline_cohost_request",UNDO_COHOST_RSVP:"undo_cohost_rsvp",CREATE_NO_TICKET_RADIO:"create_no_ticket_radio",CREATE_TICKET_LINK_RADIO:"create_ticket_link_radio",CREATE_REGISTRATION_RADIO:"create_registration_radio",LEARN_MORE_ABOUT_REGISTRATION:"learn_more_about_registration",CANNOT_DISABLE_REGISTRATION_NOTICE:"cannot_disable_registration_notice",SELF_SERVE_ADMIN_BANNER:"self_serve_admin_banner",SELF_SERVE_ADMIN_ORDERS:"self_serve_admin_orders",SELF_SERVE_ADMIN_ORDERS_NULL_STATE:"self_serve_admin_orders_null_state",SELF_SERVE_ADMIN_SEARCH_ORDERS:"self_serve_admin_search_orders",SELF_SERVE_ADMIN_SEARCH_ORDERS_NULL_STATE:"self_serve_admin_search_orders_null_state",SELF_SERVE_ADMIN_ORDERS_FILTER:"self_serve_admin_orders_filter",SELF_SERVE_ADMIN_DASHBOARD:"self_serve_admin_dashboard",SELF_SERVE_ADMIN_ORDER_DETAIL:"self_serve_admin_detail",SELF_SERVE_ADMIN_QR_CODE:"self_serve_qr_code",SELF_SERVE_CREATE_DIALOG_REGISTRATION_OPTIONS:"self_serve_create_dialog_registration_options",SELF_SERVE_FROM_GUESTLIST_DIALOG:"self_serve_from_guestlist_dialog",ADMIN_ORDER_LIST_CSV:"admin_order_list_csv",ADMIN_ORDER_LIST_PDF:"admin_order_list_pdf",CATEGORY:"category",UPCOMING_EVENTS_UNIT:"upcoming_events_unit",CARDS:"cards",FEED_UNITS:"feed_units",EDIT_BUTTON:"edit_button",PIN:"pin",SHARE:"share",PERMALINK_SCREENSHOT_SHARE_SNACKBAR:"permalink_screenshot_share_snackbar",PERMALINK_SCREENSHOT_SHARE_BOTTOM_SHEET:"permalink_screenshot_share_bottom_sheet"},surface:{UNKNOWN:"unknown",PERMALINK:"permalink",DASHBOARD:"dashboard",DASHBOARD_NEARBY:"dashboard_nearby",BOOKMARKS_MENU:"bookmarks_menu",BLUE_BAR_MENU:"blue_bar_menu",NEWSFEED:"newsfeed",NETEGO_SUGGESTION:"netego_suggestion",SURFACE_NULL:"null",NOTIFICATIONS:"notifications_tab",PUSH_NOTIFICATIONS:"push_notifications",SEARCH:"search",CREATE_DIALOG:"create_dialog",EDIT_DIALOG:"edit_dialog",CANCEL_DIALOG:"cancel_dialog",INVITE_DIALOG:"invite_dialog",PAGE:"page",TIMELINE:"timeline",GROUP:"group",GROUPS_LANDING:"groups_landing",MESSAGE_DIALOG:"message_dialog",ACTIVITY_LOG:"activity_log",MESSAGING:"messaging",THREAD_SETTINGS:"thread_settings",EMAIL:"email",EXTERNAL:"external",SNOWFLAKE:"snowflake",IN_APP_BROWSER:"in_app_browser",SIDEBAR:"sidebar",COMPOSER:"composer",ENTITY_CARD:"entity_card",TODAY_CARD:"today_card",ERROR_DIALOG:"error_dialog",GUEST_LIST:"guest_list",PHOTO_VIEWER:"photo_viewer",STORY_FLYOUT:"story_flyout",MICROSITE:"microsite",BOOKMARKS_SEE_ALL:"bookmarks_see_all",PAGES_COMPOSER:"pages_composer",POST_PAGE:"post_page",INGESTION:"ingestion",PROFILE_BROWSER:"profile_browser",UNIT_TEST:"unit_test",HOVERCARD:"hovercard",REPORT_FLOW:"report_flow",FRIENDS_ACTIVITIES:"friend_activities",INTERN_EVENT_PAGE:"intern_event_page",ADD_TO_PAGE_DIALOG:"add_to_page_dialog",HOME:"home",EMAIL_COMPOSER:"email_composer",EMAIL_PERMALINK:"email_permalink",ASYNC_JOB:"async_job",TICKER:"ticker",SETTINGS:"settings",LOGIN:"login",GAMETIME:"gametime",DISCOVER_FILTER_LIST:"discover_filter_list",INSIGHTS_DASHBOARD:"insights_dashboard",INSIGHTS_DRILLDOWN:"insights_drilldown",ME_TAB:"me_tab",EVENT_DISCOVER_QUERY:"event_discover_query",BIRTHDAY_DASHBOARD:"birthday_dashboard",LOCAL_PAGE:"local_serp",LOCAL_SURFACE:"local_surface",SHARE_LINK:"share_link",SOCAL:"socal",SOCAL_EVENTS_FEED:"socal_events_feed",SOCAL_CALENDAR:"socal_calendar",SOCAL_DISCOVERY:"socal_discovery",SOCAL_SETTINGS:"socal_settings",BUY_TICKETS:"buy_tickets",SMS_PERMALINK:"sms_permalink",AYMT_TIP:"aymt_tip",ANDROID_COPY_LINK:"android_copy_link",ANDROID_ACTION_SHEET:"android_action_sheet",IOS_COPY_LINK:"ios_copy_link",IOS_ACTION_SHEET:"ios_action_sheet",EVENT_COLLECTIONS:"events_collection",CALL_TAB:"call_tab",PERMALINK_ACTIVITY_TAB:"permalink_activity_tab",CONTEXTUAL_RECOMMENDATIONS:"contextual_recommendations",MESSENGER_CHAT_TAB:"messenger_chat_tab",PAGES_BROWSER:"pages_browser",AYMT_HOMEPAGE_PANEL:"aymt_homepage_panel",CITY_GUIDES:"city_guides",EVENTS_GUIDE:"events_guide",FACEBOOK_STORY:"facebook_story",FACEBOOK_DIRECT:"facebook_direct",HOLIDAY:"holiday",EVENTS_CAMPAIGN:"events_campaign",MULTI_JOIN_NEARBY:"multi_join_nearby",MARKETPLACE:"marketplace",TICKETS_REGISTRATION_SETTINGS:"tickets_registration_settings",SELF_SERVE_ADMIN:"self_serve_admin",TOP_TOOLBAR:"top_boolbar",MESSENGER_COM:"messenger_com",LIGHTWEIGHT_EVENT_SETTINGS:"lightweight_event_settings",REGISTRATION_IN_GUESTLIST_DIALOG:"registration_in_guestlist_dialog"},mechanism:{UNKNOWN:"unknown",MECHANISM_NULL:"null",SURFACE:"surface",MAIN_LIST:"main_list",PREVIEW_UNIT:"preview_unit",PREVIEW_UNIT_NULL_STATE:"preview_unit_null_state",LIST_VIEW:"list_view",PERMALINK:"permalink",PERMALINK_ACTIVITY_TAB_CELL:"permalink_activity_tab_cell",FEED_STORY:"feed_story",TOUR_FEED_STORY:"tour_feed_story",COVER_PHOTO_UNIT:"cover_photo_unit",BOOKMARKS:"bookmarks",NOTIFICATIONS:"notifications",NOTIFICATION_SETTINGS:"notification_settings",EXTERNAL_REFERRER:"external_referrer",EXTERNAL_NO_REFERRER:"external_no_referrer",DASH_FILTER:"dashboard_filter",SEARCH_RESULTS:"search_results",REMINDERS:"reminders",SUGGESTION_EGO:"suggestion_ego",INVITES_EGO:"invites_ego",RHC:"RHC",EGO_STORY:"ego_story",MESSAGE_BUTTON:"message_button",SEND_BUTTON:"send_button",CANCEL_BUTTON:"cancel_button",LOCATION_PICKER:"location_picker",TIME_PICKER:"time_picker",HEADER:"header",CONTEXT_ROW:"context_row",ATTACHMENT:"attachment",RELATED_EVENTS_PIVOT:"related_events_pivot",WALL:"wall",HOST_EVENTS_CARD:"host_events_card",RELATIONSHIP_BAR:"relationship_bar",DRAFT_BANNER:"draft_banner",SCHEDULED_BANNER:"scheduled_banner",SUGGEST_EDIT_BAR:"suggest_edit_bar",MEGAPHONE:"megaphone",SOCIAL_PLUGIN:"social_plugin",CITY_PAGE_EVENTS_UNIT:"city_page_events_unit",PAGE_CREATE_DIALOG:"page_create_dialog",PAGES_COMPOSER:"pages_composer",USER_CREATE_DIALOG:"user_create_dialog",GROUP_CREATE_DIALOG:"group_create_dialog",COPY_CREATE_DIALOG:"copy_create_dialog",HOVERCARD:"hovercard",SUBSCRIBED_EVENT_DIALOG:"subscribed_dialog",GUEST_LIST:"guest_list",ALBUM_BUTTON:"album_button",RELATED_EVENT_BUTTON:"related_event_button",INVITE_THROUGH_MESSENGER:"invite_through_messenger",GUEST_LIST_EMAIL_BUTTON:"guest_list_email_button",GUEST_LIST_EMAIL_DRAFT_BUTTON:"guest_list_draft_button",GUEST_LIST_EMAIL_CANCEL_BUTTON:"guest_list_email_cancel_button",GUEST_LIST_EMAIL_SEND_BUTTON:"guest_list_email_send_button",REACTION_UNIT:"reaction_unit",ACTION_BAR:"action_bar",CHECKIN_COMPOSER:"checkin_composer",CONTEXT_ROW_UBER_BUTTON:"context_row_uber_button",TICKET_INFO:"ticket_info",UNIT_TEST:"unit_test",INLINE_COMPOSER_PHOTO_PROMPT:"inline_composer_photo_prompt",PHOTOS_PAGE:"photos_page",NO_LOCATION:"no_location",LOCATION_STALE:"location_stale",LOCATION_INACCURATE:"location_inaccurate",LOCATION_CONTEXT_ROW:"location_context_row",NO_RESULTS:"no_results",INSIGHTS_MODULE:"insights_module",PAGE_INSIGHTS_DASHBOAD:"page_insights_dashboard",INSIGHTS_TAB_REACH:"insights_tab_reach",INSIGHTS_TAB_PAGE_VIEWS:"insights_tab_page_views",INSIGHTS_TAB_CONNECTIONS:"insights_tab_connections",INSIGHTS_TAB_ACTIONS:"insights_tab_actions",INSIGHTS_TAB_TICKET_CLICKS:"insights_tab_ticket_clicks",INSIGHTS_TAB_TICKET_DEVICES:"insights_tab_ticket_devices",INSIGHTS_TAB_DEMOGRAPHICS:"insights_tab_demographics",INSIGHTS_TAB_AUDIENCE_DEVICES:"insights_tab_audience_devices",TIP:"tip",REMINDER:"reminder",REMINDER_WORD:"reminder_word",REMINDER_ACTION_SHEET:"reminder_action_sheet",REMINDER_LOCATION_MAP:"reminder_location_map",REMINDER_CHANGE_NAME_ALERT:"reminder_change_name_alert",REMINDER_NONE_ACTIVE_ALERT:"reminder_none_active_alert",REMINDER_CUSTOMIZATION:"reminder_customization",REMINDER_BANNER:"reminder_banner",EVENT_REMINDER_SETTINGS:"event_reminder_settings",REMINDER_ADMIN_TEXT:"reminder_admin_text",TRIGGER_WORD:"trigger_word",TRIGGER_CTA:"trigger_cta",TRIGGER_AGENT:"trigger_agent",REMINDER_XMA:"reminder_xma",MESSENGER_COMPOSER:"messenger_composer",MESSENGER_THREAD_SETTINGS:"messenger_thread_settings",MESSENGER_REMINDER_NUX:"messenger_reminder_nux",EDIT_REMINDER:"edit_reminder",CREATE_PROMPT:"create_prompt",EVENT_DISCOVER_FRIENDS_EVENTS_HSCROLL:"friends_events_hscroll",EVENT_DISCOVER_SUGGESTED_EVENTS_HSCROLL:"suggested_events_hscroll",EVENT_DISCOVER_TIME_SELECTOR:"top_time_selector",EVENTS_DISCOVER_CATEGORIES:"event_discover_categories",EVENTS_DISCOVER_TOP_TIME_FILTER:"event_discover_top_time_filter",TICKET_PURCHASE_DIALOG:"ticket_purchase_dialog",GROUPS_COMPOSER:"groups_composer",UPCOMING_EVENTS_IN_CITY:"upcoming_events_in_city",UPCOMING_EVENTS_AT_VENUE:"upcoming_events_at_venue",UPCOMING_EVENTS_WITH_PRIMARY_ROLE:"upcoming_events_with_primary_role",UPCOMING_EVENTS_FOR_GROUP:"upcoming_events_for_group",LOCAL_UPCOMING_EVENTS_IN_CITY:"local_upcoming_events_in_city",INVITE_OFF_FB_INFO_BAR:"invite_off_fb_permalink_info_bar",INVITE_OFF_FB_PERMALINK_LINK:"invite_off_fb_permalink_link",INVITE_OFF_FB_INVITE_BUTTON_DROPDOWN:"invite_off_fb_invite_button_dropdown",WARM_START:"warm_start",COLD_START:"cold_start",SEARCH_BUTTON:"search_button",CALL_REMINDER_CALL_LOG:"call_reminder_call_log",CALL_REMINDER_NEW_SCHEDULE:"call_reminder_new_schedule",CALL_REMINDER_XMA_SCHEDULE_CALL:"call_reminder_xma_schedule_call",CALL_REMINDER_ACTION_SHEET:"call_reminder_action_sheet",CALL_REMINDER_EVENT_EXIST_ALERT:"call_reminder_event_exist_conflict_alert",CALL_REMINDER_UPDATE_ALERT:"call_reminder_update_alert",PAGE_UPCOMING_EVENTS_CARD:"page_upcoming_events_card",PAGE_PAST_EVENTS_CARD:"page_past_events_card",BUY_TICKETS_CTA:"buy_tickets_cta",TICKETING_ONSITE_FLOW:"onsite_flow",BUY_TICKETS_ONSITE_PIVOT:"buy_onsite_tickets_pivot",CONTEXTUAL_RECOMMENDATIONS:"contextual_recommendations",EVENT_DISCOVER_SEE_MORE_PHOTO:"event_discover_see_more_photo",SUGGESTION_FEED_UNIT:"suggestion_feed_unit",NETEGO_SUGGESTION:"netego_suggestion",POPULAR_NEARBY:"popular_nearby",EVENTS_TAB:"events_tab",CALENDAR_TAB:"calendar_tab",HOSTING_TAB:"hosting_tab",POPULAR_SOCIAL:"popular_social",RELATED_HISTORY:"related_history",FRIENDS_ONLY:"friends_only",NON_FRIENDS:"non_friends",ADMIN_BANNER:"admin_banner",COHOST_ACCEPTANCE_UNIT:"cohost_acceptance_unit",HOME_TAB_SEE_SUGGESTED_EVENTS_TODAY:"home_tab_see_suggested_events_today",HOME_TAB_SEE_SUGGESTED_EVENTS_TOMORROW:"home_tab_see_suggested_events_tomorrow",HOME_TAB_SEE_SUGGESTED_EVENTS_FUTURE:"home_tab_see_suggested_events_future",HOME_TAB_SEE_ALL_UPCOMING_EVENTS_TAP:"home_tab_see_all_upcoming_events_tap",CALENDAR_TAB_EVENT:"calendar_tab_event",CALENDAR_TAB_INVITATION:"calendar_tab_invitation",CALENDAR_TAB_SUGGESTION:"calendar_tab_suggestion",HOME_TAB_UPCOMING_EVENT:"home_tab_upcoming_event",HOME_TAB_NEXT_EVENT:"home_tab_next_event",HOME_TAB_TODAY_EVENTS:"home_tab_today_events",HOME_TAB_THIS_WEEK_EVENTS:"home_tab_this_week_events",HOME_TAB_FUTURE_EVENTS:"home_tab_future_events",HOME_TAB_FRIENDS_EVENTS:"home_tab_friends_events",HOSTING_TAB_UPCOMING_EVENT:"hosting_tab_upcoming_event",HOSTING_TAB_DRAFT_EVENT:"hosting_tab_draft_event",HOSTING_TAB_PAST_EVENT:"hosting_tab_past_event",LOCATION_SETTINGS:"location_settings",TOURS:"tours",TOUR_MAP:"tour_map",SHARE_BUTTON_DROPDOWN:"share_button_dropdown",FEED_ATTACHMENT:"feed_attachment",CHECKIN_EVENTS_AT_PLACE_CHAINING_PIVOT:"checkin_events_at_place_chaining_pivot",OTHER_EVENTS_IN_TOUR_CARD:"other_events_in_tour_card",PAGE_UPCOMING_TOUR_EVENTS_CARD:"page_upcoming_tour_events_card",PERMALINK_EVENT_INFORMATION:"event_information",PERMALINK_TAB_BAR:"event_tab_bar",SOCIAL_CONTEXT:"social_context",MEDIA_EFFECTS:"media_effects",DASHBOARD_INVITES_TAB:"dashboard_invites_tab",MESSENGER_POLL_CALENDAR:"messenger_poll_calendar",MESSENGER_POLL_POLL_TYPE_SELECTOR:"messenger_poll_poll_type_selector",CAMERA_FRAMES_PAGELET:"camera_frames_pagelet",DASHBOARD_HOME_DISCOVERY_CATEGORIES:"dashboard_home_discovery_categories",DASHBOARD_HOME_DISCOVERY_FILTER:"dashboard_home_discovery_filter",PERMALINK_SHARE_SNACKBAR:"permalink_share_snackbar",PERMALINK_SCREENSHOT:"permalink_screenshot",PERMALINK_SCREENSHOT_SHARE_SNACKBAR:"permalink_screenshot_share_snackbar",CALENDAR_LIST:"calendar_list",CALENDAR_LIST_PAGING:"calendar_list_paging",BIRTHDAY_LIST_PAGING:"birthdays_list_paging",HOSTING_LIST_PAGING:"hosting_list_paging",UPCOMING_EVENTS_CARD:"upcoming_events_card",MESSAGE_FRIENDS_CARD:"message_friends_card",HOME_TAB_FEED_UNITS:"home_tab_feed_units",HOME_TAB_SEE_ALL_UPCOMING_EVENTS:"home_tab_see_all_upcoming_events",HOME_TAB_CATEGORIES:"home_tab_categories",HOME_EVENTS_NEARBY_MAP_VIEW:"home_events_nearby_map_view",UPCOMING_TIMES_CARD:"upcoming_times_card",SHARE_INFO_CARD_IN_PERMALINK:"share_info_card_in_permalink",INTERCEPT_PAGE_COMPOSER:"intercept_page_composer",EVENT_REGISTRATION_PAGELET:"event_registration_pagelet",TICKETS_PURCHASE_CARD:"tickets_purchase_card",SELF_SERVE_ADMIN:"self_serve_admin",PUBLISHING_TOOLS:"publishing_tools"}};}),null);
__d("MNCommercePageSetting",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"};}),null);
__d('TypingDetector',['ArbiterMixin','Event','Input','Run','SubscriptionsHandler','TypingStates','createObjectFrom','emptyFunction'],(function a(b,c,d,e,f,g){function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j;}Object.assign(h.prototype,c('ArbiterMixin'),{_timeout:7000,_currentState:c('TypingStates').INACTIVE,init:function i(){this.init=c('emptyFunction');this.reset();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(this._input,'keyup',this._update.bind(this)),c('Run').onUnload(this._onunload.bind(this)));},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c('TypingStates').INACTIVE;},setIgnoreKeys:function i(j){this._ignoreKeys=c('createObjectFrom')(j);},destroy:function i(){this._subscriptions.release();},_onunload:function i(){if(this._currentState==c('TypingStates').TYPING)this._transition(c('TypingStates').QUITTING);},_update:function i(event){var j=c('Event').getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c('Input').getValue(this._input);if(l.trim().length===0){if(k==c('TypingStates').TYPING)this._transition(c('TypingStates').INACTIVE);}else if(k==c('TypingStates').TYPING){this._recordKeystroke();}else if(k==c('TypingStates').INACTIVE){this._transition(c('TypingStates').TYPING);this._recordKeystroke();}}},_transition:function i(j){this.reset();this._currentState=j;this.inform('change',j);},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j){this._transition(c('TypingStates').INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10);}}});f.exports=h;}),null);
__d('TypingDetectorController',['ActorURI','AsyncRequest','AvailableList','AvailableListConstants','ChatVisibility','Keys','MercuryServerRequestsConfig','TypingDetector','TypingStates','emptyFunction','ifRequired','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g){'use strict';var h='/ajax/messaging/typ.php';function i(j,k,l,m,n,o,p){this.userID=j;this.input=k;this.source=l;this.threadID=n;this.pageID=p;this.remoteState=c('TypingStates').INACTIVE;this.notifyTimer=null;m=m||{};this.notifyDelay=m.notifyDelay||this.notifyDelay;this._typingDetector=new (c('TypingDetector'))(k,o);this._typingDetector.init(m);this._typingDetector.subscribe('change',this._stateChange.bind(this));}i.prototype.setUserAndThread=function(j,k){if(this.userID!==j||this.threadID!==k){this.resetState();this.userID=j;this.threadID=k;}};i.prototype.setIgnoreEnter=function(j){var k=j?[c('Keys').RETURN]:[];this._typingDetector.setIgnoreKeys(k);};i.prototype.resetState=function(){this._notifyState(c('TypingStates').INACTIVE);this.remoteState=c('TypingStates').INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};i.prototype.destroy=function(){this.resetState();this._typingDetector.destroy();};i.prototype._stateChange=function(j,k){if(k!=c('TypingStates').QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=c('setTimeoutAcrossTransitions')(c('shield')(this._notifyState,this,k),this.notifyDelay);}else this._notifyState(k,true);};i.prototype._notifyState=function(j,k){if(!this.userID&&!this.threadID||!c('ChatVisibility').isOnline()||j===this.remoteState||c('ifRequired')('ChannelConnection',function(l){return l.disconnected();},function(){return true;}))return;this._sendRequest(j,this.userID,k);};i.prototype._sendRequest=function(j,k,l){this.remoteState=j;var m={typ:j,to:k,source:this.source,thread:this.threadID},n=this.pageID?c('ActorURI').create(h,this.pageID):h,o=new (c('AsyncRequest'))().setHandler(this._onTypResponse.bind(this,k)).setErrorHandler(c('emptyFunction')).setData(m).setURI(n).setAllowCrossPageTransition(true).setOption('asynchronous_DEPRECATED',!l);if(c('MercuryServerRequestsConfig').msgrRegion)o.setRequestHeader('X-MSGR-Region',c('MercuryServerRequestsConfig').msgrRegion);o.send();};i.prototype._onTypResponse=function(j,k){var l=k.getPayload()||{};if(l.offline)c('AvailableList').set(j,c('AvailableListConstants').OFFLINE,'typing_response');};Object.assign(i.prototype,{notifyDelay:1000});f.exports=i;}),null);
__d('EmployeeLinkMatcher',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('^[\\s.,:]'),i=new RegExp('(?:\\b)(([BDTPSX]|(AIP))\\d{4,})(?:\\b)','im'),j=new RegExp('(?:\\b)(designpack:\/\/.+)(?:\\b)','im'),k=function n(o){if(!c('CurrentUser').isEmployee())return null;var p=i.exec(o)||j.exec(o);if(p===null)return null;return {lnk:p[1],idx:p.index+(h.exec(p[0])?1:0)};},l=function n(o){var p=c('CurrentUser').isEmployee()&&(i.exec(o)!==null||j.exec(o)!==null);return p;},m={match:k,isMatch:l};f.exports=m;}),null);
__d('EmployeeLinkRanges',['EmployeeLinkMatcher','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h={PHABRICATOR_PREFIX:'https://phabricator.intern.facebook.com/',TASKS_PREFIX:'https://our.intern.facebook.com/intern/tasks/?t=',BUSINESS_PREFIX:'https://our.intern.facebook.com/intern/business/?q=',SEV_PREFIX:'https://our.intern.facebook.com/intern/sevmanager/view/s/',CHRONOS_PREFIX:'https://our.intern.facebook.com/intern/chronos/lucky/?query=',ADS_PARTNER_PREFIX:'https://our.intern.facebook.com/intern/ads/partner_projects/projects/',get:function i(j){var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c('EmployeeLinkMatcher').match(l);if(!m)return [];var n=m.lnk,o=m.idx,p=c('UnicodeUtils').strlen(l.substr(0,o));k+=p;var q='';if(n.substr(0,3).toLowerCase()==='aip'){q=this.ADS_PARTNER_PREFIX+n.substr(3);}else switch(n[0].toLowerCase()){case 'd':if(n.indexOf('designpack://')===0){q=n;}else q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case 'p':q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case 't':q=this.TASKS_PREFIX+n.substr(1);break;case 'b':q=this.BUSINESS_PREFIX+n.substr(1);break;case 's':q=this.SEV_PREFIX+n.substr(1);break;case 'x':q=this.CHRONOS_PREFIX+n.substr(1);break;default:return [];}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r));}};f.exports=h;}),null);
__d('EventReminderDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false});}),null);
__d('EventReminderActions',['EventReminderDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null}),i={Types:h,updateEventReminder:function j(k,event){c('EventReminderDispatcher').dispatch({type:i.Types.UPDATE_EVENT_REMINDER,threadID:k,event:event});},deleteEventReminder:function j(k){c('EventReminderDispatcher').dispatch({type:i.Types.DELETE_EVENT_REMINDER,threadID:k});}};f.exports=i;}),null);
__d('EventReminderMembersMap',['CurrentUser','EventReminderConstants','Map'],(function a(b,c,d,e,f,g){'use strict';var h=c('EventReminderConstants').GuestStates;function i(){this.$EventReminderMembersMap1=new (c('Map'))();this.$EventReminderMembersMap2=new (c('Map'))();this.$EventReminderMembersMap3=new (c('Map'))();}i.prototype.setAllMembers=function(j,k){if(!j)return;this.$EventReminderMembersMap1.set(k,h.INVITED);var l=[],m=[],n=[];for(var o in j){var p=j[o];if(o===c('CurrentUser').getID())this.$EventReminderMembersMap1.set(k,p);var q={fbid:o,guestState:p,imageSrc:''};if(p===h.GOING){l.push(q);}else if(p===h.DECLINED){m.push(q);}else n.push(q);}this.$EventReminderMembersMap2.set(k,l.concat(m,n));this.$EventReminderMembersMap3.set(k,l);};i.prototype.clearMembers=function(j){this.$EventReminderMembersMap1['delete'](j);this.$EventReminderMembersMap2['delete'](j);this.$EventReminderMembersMap3['delete'](j);};i.prototype.getAllMembers=function(j){return this.$EventReminderMembersMap2.get(j);};i.prototype.getGoingMembers=function(j){return this.$EventReminderMembersMap3.get(j);};i.prototype.getSelfGuestState=function(j){if(!this.$EventReminderMembersMap1.has(j))return h.INVITED;return this.$EventReminderMembersMap1.get(j);};f.exports=i;}),null);
__d('EventReminderStateStore',['EventReminderActions','EventReminderDispatcher','EventReminderMembersMap','EventRemindersGating','FluxStore','Map'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=3600000;h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(){i.constructor.call(this,c('EventReminderDispatcher'));this.$EventReminderStateStore1={};this.$EventReminderStateStore2=new (c('EventReminderMembersMap'))();this.$EventReminderStateStore3=new (c('Map'))();}k.prototype.getEvent=function(l){return this.$EventReminderStateStore1[l];};k.prototype.getEventMembers=function(l){return this.$EventReminderStateStore2.getAllMembers(l);};k.prototype.getSelfGuestState=function(l){return this.$EventReminderStateStore2.getSelfGuestState(l);};k.prototype.getNumOfGoingMembers=function(l){var m=this.$EventReminderStateStore2.getGoingMembers(l);return m?m.length:0;};k.prototype.shouldShowCTA=function(l,m){var n=Date.now(),o=this.$EventReminderStateStore3.get(l);if(m>c('EventRemindersGating').eventPlanCTAThreashold&&(!o||n-o>j)&&c('EventRemindersGating').shouldShowCTA){this.$EventReminderStateStore3.set(l,n);return true;}else return false;};k.prototype.clearEventMembers=function(l){this.$EventReminderStateStore2.clearMembers(l);};k.prototype.__onDispatch=function(l){var m=c('EventReminderActions').Types,n=l.threadID;switch(l.type){case m.UPDATE_EVENT_REMINDER:var event=l.event,o=!!event.track_rsvp;this.$EventReminderStateStore1[n]={allowRSVP:o,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:true};if(o)this.$EventReminderStateStore2.setAllMembers(event.event_members,n);break;case m.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[n].exists=false;this.clearEventMembers(n);break;}this.__emitChange();};f.exports=new k();}),null);
__d('MercuryMessageRenderLocations',[],(function a(b,c,d,e,f,g){'use strict';var h={CHAT:'chat',MESSENGER:'messenger',PAGES:'pages'};f.exports=h;}),null);
__d('MessengerFormattingUtils',['React','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';function h(p){return {offset:p[1].length,length:c('UnicodeUtils').strlen(p[2])+2,innerOffset:1,innerText:p[2]};}var i={pattern:/([\s_~\'\"(]|^)\*(\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s_~\'\"(]|^)\*(?:\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/,formatter:function p(q){return c('React').createElement('b',null,q);},getRangeInMatch:h,recursivelyFormat:true},j={pattern:/([\s*~\'\"(]|^)_(\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*~\'\"(]|^)_(?:\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/,formatter:function p(q){return c('React').createElement('i',null,q);},getRangeInMatch:h,recursivelyFormat:true},k={pattern:/([\s*_\'\"(]|^)~(\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_\'\"(]|^)~(?:\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/,formatter:function p(q){return c('React').createElement('s',null,q);},getRangeInMatch:h,recursivelyFormat:true},l={pattern:/([\s*_~\'\"(]|^)`(\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_~\'\"(]|^)`(?:\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/,formatter:function p(q){return c('React').createElement('code',null,q);},getRangeInMatch:h,recursivelyFormat:false},m=[i,j,k,l];function n(p){var q=arguments.length<=1||arguments[1]===undefined?m:arguments[1];for(var r=0;r<q.length;r++){var s=q[r].nonCapturingPattern;if(s.test(p))return true;}return false;}function o(p){var q=arguments.length<=1||arguments[1]===undefined?m:arguments[1],r=[];for(var s=0;s<q.length;s++){var t=q[s];t.pattern.lastIndex=0;var u=void 0;while((u=t.pattern.exec(p))!=null){var v=t.getRangeInMatch(u),w=p.substr(0,u.index+v.offset),x=c('UnicodeUtils').strlen(w);r.push({offset:x,length:v.length,innerText:v.innerText,innerOffset:x+v.innerOffset,formatter:t.formatter,recursivelyFormat:t.recursivelyFormat});}}return r;}f.exports={defaultFormatConfigs:m,hasMatch:n,getRanges:o,formatConfigs:{bold:i,italic:j,strikethrough:k,code:l}};}),null);
__d('MessengerMathUtils',['UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=2,i=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,j=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function k(o){return i.test(o);}function l(o){return o.substring(h,o.length-h);}function m(o){j.lastIndex=0;return j.test(o);}function n(o){var p=arguments.length<=1||arguments[1]===undefined?0:arguments[1],q=[];j.lastIndex=0;var r=void 0;while((r=j.exec(o))!==null){var s=o.substring(0,r.index),t=c('UnicodeUtils').strlen(s);q.push({offset:t,length:c('UnicodeUtils').strlen(r[0]),math:true});}return q;}f.exports={MATH_DELIMITER_LENGTH:h,isMathBlock:k,hasInlineMath:m,getInlineMathRanges:n,getMathBlockInner:l};}),null);
__d('MessengerSupportedEmojiUtils',['cx','EmojiImageURL','EmojiLikeConstants','EmojiRenderer','EmoticonEmojiList','Image.react','MessengerSupportedEmoji','React','Utf16','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=65039,j='_fe0f',k=new RegExp('(\r\n|[ \r\n]|\s)'),l={getSupportedEmojiKey:function m(n){if(!n)return null;var o=null,p=this.parse(n);if(p.length===1&&p[0].length===n.length){var q=p[0].emoji.map(function(r){return c('Utf16').decode(r);});q[q.length-1]===i&&q.pop();o=q.map(function(r){return r.toString(16);}).join('_');}return this.isSupportedEmojiKey(o)?o:null;},isSupportedEmoji:function m(n){return !!this.getSupportedEmojiKey(n);},isSupportedEmojiKey:function m(n){return !!c('MessengerSupportedEmoji').emoji[n];},getSupportedEmojiCodesArray:function m(n){if(!n)return null;var o=this.parse(n);if(o.length===1&&o[0].length===n.length){var p=o[0].emoji.map(function(r){return c('Utf16').decode(r);});p[p.length-1]===i&&p.pop();var q=p.map(function(r){return r.toString(16);}).join('_');if(c('MessengerSupportedEmoji').emoji[q])return p;}return null;},getEmojiKeyFromCodes:function m(n){return n.map(function(o){return o.toString(16);}).join('_');},getClassSizeMap:function m(){var n,o=c('EmojiLikeConstants').size;return n={},n[o.XSMALL]="_2560",n[o.SMALL]="_1ifu",n[o.MEDIUM]="_19_r",n[o.LARGE]="_19_s",n;},getEmojiMatchObj:function m(n){var o=this.parse(n,1);if(o.length!==1)return null;var p=o[0].emoji,q=p.map(function(s){return c('Utf16').decode(s);});if(q[q.length-1]===i)q.pop();var r=q.map(function(s){return s.toString(16);}).join('_');return {emoji_key:r,emoji_str:p.join(''),is_supported:this.isSupportedEmojiKey(r),offset:o[0].offset,length:o[0].length};},getNewEmojiData:function m(n,o){if(!n)return null;var p=this.getSupportedEmojiKey(n);if(!p)return null;var q=this.getClassSizeMap();o=this.transferSize(o);var r=c('joinClasses')(q[o],"_1ift"),s=c('EmojiImageURL').getMessengerURL(p,c('EmojiLikeConstants').sizeMap[o]);return {emoji:c('React').createElement(c('Image.react'),{className:r,src:s}),emoji_key:p,url:s};},getEmojiOnlyContents:function m(n){var o=n||'',p=[];while(o.length>0&&o.trim().length>0){var q=k.exec(o),r='';while(q&&q.length&&q.index===0){r+=q[0];o=o.replace(k,'');q=k.exec(o);}if(r.length>0)p.push({text:r});var s=c('EmoticonEmojiList').noncapturingRegexp.exec(o);if(s&&s.index===0){var t=c('EmoticonEmojiList').names[s[1]],u=c('EmoticonEmojiList').emote2emojis[t];p.push({emojiKey:u,text:s[1]});o=o.replace(s[1],'');}else{s=this.getEmojiMatchObj(o);if(s&&s.is_supported){p.push({emojiKey:s.emoji_key,text:s.emoji_str});o=o.replace(s.emoji_str,'');}else return null;}}return p;},getUrl:function m(n,o){if(n.endsWith(j))n=n.replace(j,'');if(!c('MessengerSupportedEmoji').emoji[n])return null;o=this.transferSize(o);return c('EmojiImageURL').getMessengerURL(n,c('EmojiLikeConstants').sizeMap[o]);},containsEmoji:function m(n){return this.parse(n,1).length===1;},parse:function m(n,o){return c('EmojiRenderer').parse(n,o);},transferSize:function m(n){return c('EmojiLikeConstants').sizeMapTransfer[n]||n;}};f.exports=l;}),null);
__d('MessengerTextWithEntities.react',['Link.react','React','BaseTextWithEntities.react','MessengerTextWithEmoticons.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(l){return l.replace(/<3\b|&hearts;/g,'\u2665');}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessengerTextWithEntities1=function(q){if(this.props.renderEmoticons||this.props.renderEmoji){return c('React').createElement(c('MessengerTextWithEmoticons.react'),{text:q,customSize:this.props.customSize,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji});}else return j(q);}.bind(this),this.$MessengerTextWithEntities2=function(q,r){if(this.props.interpolator){return this.props.interpolator(q,r);}else return c('React').createElement(c('Link.react'),{href:r.entity},q);}.bind(this),m;}k.prototype.render=function(){return c('React').createElement(c('BaseTextWithEntities.react'),babelHelpers['extends']({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$MessengerTextWithEntities2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$MessengerTextWithEntities1}));};f.exports=k;}),null);
__d('P2PTriggersUtils',['P2PGKValues'],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c('P2PGKValues').P2PEnabled)return false;return true;},getMatches:function j(k){return k.match(h);}};f.exports=i;}),null);
__d('RedditLinkMatcher',[],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('(^|\\s)(\\/[ru]\\/\\w{1,21})(?:\\b)','i'),i=function l(m){var n=h.exec(m);if(n===null)return null;return {lnk:n[2],idx:n.index+n[1].length};},j=function l(m){return h.exec(m)!==null;},k={match:i,isMatch:j};f.exports=k;}),null);
__d('RedditLinkRanges',['RedditLinkMatcher','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h={REDDIT_PREFIX:'https://reddit.com',get:function i(j){var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c('RedditLinkMatcher').match(l);if(!m)return [];var n=m.lnk,o=m.idx,p=c('UnicodeUtils').strlen(l.substr(0,o));k+=p;var q='';switch(n[1].toLowerCase()){case 'r':q=this.REDDIT_PREFIX+n;break;case 'u':q=this.REDDIT_PREFIX+n;break;default:return [];}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r));}};f.exports=h;}),null);
__d("TextWithEntitiesMetadataType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,CONCEPT:1,INTENT:2});}),null);
__d("messengerContactActionsRe",[],(function a(b,c,d,e,f,g){'use strict';var h={ADD_OWNER:"ADD_OWNER",FREE_CALL:"FREE_CALL",MESSAGE:"MESSAGE",PROFILE:"PROFILE",REMOVE:"REMOVE",REMOVE_OWNER:"REMOVE_OWNER",SELECT:"SELECT"};g.actions=h;}),null);
__d('shouldAddMRefParam',['isFacebookURI'],(function a(b,c,d,e,f,g){var h=function i(j){if(!c('isFacebookURI')(j)||j.getFragment())return false;if(/^\/events\//.test(j.getPath()))return true;return false;};f.exports=h;}),null);
__d('MercuryMessageBody.react',['cx','fbt','BootloadedComponent.react','DateConsts','EmojiRenderer','EmoticonsList','EmoticonEmojiList','EmployeeLinkMatcher','EmployeeLinkRanges','EventReminderStateStore','EventRemindersGating','RedditLinkMatcher','RedditLinkRanges','JSResource','Link.react','MercuryConfig','MercuryIDs','MercuryMessageRenderLocations','messengerContactActionsRe','MessengerMathUtils','MessengerFormattingUtils','MessengerSupportedEmojiUtils','MessengerTextWithEntities.react','P2PTriggersUtils','React','TextWithEntities.react','TextWithEntitiesMetadataType','UnicodeUtils','URI','URLMatcher','emptyFunction','getURLRanges','ifRequired','shouldAddMRefParam'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerContactActionsRe').actions,m=c('React').PropTypes,n=function p(){n=c('emptyFunction');c('ifRequired')('ChatAppActions',function(q){q.setInitialDisplayDone();});};j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.interpolator=function(q,r){var s,t=this;if(r.className)return c('React').createElement('span',{className:r.className},q);if(r.math)return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('MessengerMath.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,inline:true,stripDelimiters:true,className:"_1e4d _1e4e"});if(r.id){var s=function(){var x={};if(!t.props.isFromViewer&&t.props.threadCustomColor)x.color=t.props.threadCustomColor;var y=t.props.onContactSelect,z=t.props.threadID?c('MercuryIDs').getThreadFBIDFromThreadID(t.props.threadID)===r.id:false,aa=c('React').createElement(c('Link.react'),{className:"_ih-",href:z?'#':r.url,style:x,onClick:y&&!z?function(ba){this.$MercuryMessageBody3(y,r,ba);}.bind(t):c('emptyFunction')},q);if(c('MercuryConfig').WWWMessengerAvatarActions&&!z&&y){if(typeof q==='string')r.contactName=q&&q.replace('@','');aa=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('MessengerAvatarActions.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:aa,avatar:aa,contact:r,showSendMessageItem:true,onAction:t.props.onContactSelect});}return {v:aa};}();if(typeof s==="object")return s.v;}if(r.formatter)if(r.recursivelyFormat){var u=this.renderBody(r.innerText,true,r.innerOffset);return r.formatter(u);}else return r.formatter(r.innerText);if(r.entity&&r.entity.url){var v=new (c('URI'))(r.entity.url.replace(/#+$/,''));if(c('shouldAddMRefParam')(v))v.addQueryData({__mref:'mb'});return c('React').createElement(c('Link.react'),{href:{url:v.toString(),shimhash:r.entity.shimhash},s:r.entity.s,target:'_blank'},q);}if(!r.entity){var w=typeof r.type==='number'?r.type:c('TextWithEntitiesMetadataType')[r.type];switch(w){case c('TextWithEntitiesMetadataType').NONE:return c('React').createElement('span',{className:"_2y9",title:JSON.stringify(r.data)},q);case c('TextWithEntitiesMetadataType').CONCEPT:return this.renderConceptMetadata(q,r.data);case c('TextWithEntitiesMetadataType').INTENT:return this.renderIntentMetadata(q,r.data);default:return q;}}return q;}.bind(this);this.state=this.parseMessageBody(p);}o.prototype.componentWillReceiveProps=function(p){if(this.props.body!==p.body||this.props.metaRanges!==p.metaRanges||this.props.ranges!==p.ranges)this.setState(this.parseMessageBody(p));};o.prototype.parseMessageBody=function(p){var q=(p.body||'').replace(/\s+$/,''),r=this.$MercuryMessageBody1(p.metaRanges||[]),s={normalizedBody:q,isEncrypted:false,isMathBlock:false,isRichText:false,ranges:[],filteredMetaRanges:r};if(q.length===0)return s;if(q.startsWith('?OTR')){s.isEncrypted=true;return s;}if(c('MercuryConfig').MessengerLatex&&c('MessengerMathUtils').isMathBlock(q)){s.isMathBlock=true;return s;}var t=p.ranges,u=p.metaRanges,v=t&&t.length||u&&u.length||c('EmoticonsList').noncapturingRegexp.test(q)||c('EmojiRenderer').containsEmoji(q)||c('URLMatcher').match(q)||c('EmployeeLinkMatcher').isMatch(q)||c('RedditLinkMatcher').isMatch(q)||this.$MercuryMessageBody2(q,p)||c('MessengerSupportedEmojiUtils').containsEmoji(q)||c('EmoticonEmojiList').noncapturingRegexp.test(q)||c('MessengerFormattingUtils').hasMatch(q)||c('MessengerMathUtils').hasInlineMath(q);if(!v)return s;s.isRichText=true;if(t&&t.length===1&&t[0].className==="__in")t=c('getURLRanges')(q).concat(t);t=t||[];t=t.concat(c('getURLRanges')(q),c('EmployeeLinkRanges').get(q));if(c('MercuryConfig').WWWRedditLinksGK)t=t.concat(c('RedditLinkRanges').get(q));if(c('MercuryConfig').MEFMT)t=t.concat(c('MessengerFormattingUtils').getRanges(q));if(c('MercuryConfig').MessengerLatex)t=t.concat(c('MessengerMathUtils').getInlineMathRanges(q));s.ranges=t.filter(function(w){return w!=undefined;});return s;};o.prototype.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted;};o.prototype.$MercuryMessageBody3=function(p,q,r){c('MercuryConfig').WWWMessengerAvatarActions?r.preventDefault():p(l.MESSAGE,q,r);};o.prototype.$MercuryMessageBody4=function(p){if(this.props.isFromViewer){return '\\color{#fff}{'+c('MessengerMathUtils').getMathBlockInner(p)+'}';}else return c('MessengerMathUtils').getMathBlockInner(p);};o.prototype.renderConceptMetadata=function(p,q){if(!q)return p;if(q.intent_name||q.name)return this.renderIntentMetadata(p,q);return p;};o.prototype.renderIntentMetadata=function(p,q){if(!q)return p;var r=q.intent_name||q.name;switch(r){case 'request_time':return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ServicesVerticalRequestTimeTriggers.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null,p),data:q,text:p,threadID:this.props.threadID});case 'timestamp':return this.props.renderLocation===c('MercuryMessageRenderLocations').CHAT&&this.$MercuryMessageBody5(q.value)&&c('EventRemindersGating').shouldShowTriggerWords?c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatEventPlanTriggers.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null,p),data:q,text:p,threadID:this.props.threadID}):p;default:return p;}};o.prototype.renderIntentCTA=function(p){if(p){var q=p.intent_name||p.name;switch(q){case 'request_time':return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ServicesRequestTimeIntentCTA.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null),data:p,threadID:this.props.threadID});case 'create_event':var r=this.props.threadID;return r&&c('EventReminderStateStore').shouldShowCTA(r,p.confidence)&&this.props.renderLocation===c('MercuryMessageRenderLocations').CHAT?c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatEventPlanCTA.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null),data:p,threadID:r}):null;}}return null;};o.prototype.renderCTAs=function(p){var q=null;if(p.length>0){var r=p[0]||{},s=typeof r.type==='number'?r.type:c('TextWithEntitiesMetadataType')[r.type];switch(s){case c('TextWithEntitiesMetadataType').CONCEPT:case c('TextWithEntitiesMetadataType').INTENT:q=this.renderIntentCTA(r.data);break;}}return q;};o.prototype.renderBody=function(p){var q=arguments.length<=1||arguments[1]===undefined?false:arguments[1],r=arguments.length<=2||arguments[2]===undefined?0:arguments[2],s=this.state,t=s.isRichText,u=s.ranges,v=s.filteredMetaRanges,w=c('UnicodeUtils').strlen(p);if(!t)return c('React').createElement('span',{className:this.props.className},p);if(q){u=u.filter(function(ba){return ba.offset>=r&&ba.offset+ba.length<=r+w;}).map(function(ba){return babelHelpers['extends']({},ba,{offset:ba.offset-r});});v=v.filter(function(ba){return ba.offset>=r&&ba.offset+ba.length<=r+w;}).map(function(ba){return babelHelpers['extends']({},ba,{offset:ba.offset-r});});}var x={className:this.props.className,interpolator:this.interpolator,metaRanges:v,ranges:u,renderEmoji:true,renderEmoticons:true,text:p};if(this.$MercuryMessageBody2(p)){var y=c('React').createElement(c('TextWithEntities.react'),x);return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:y,bootloadLoader:c('JSResource')('TextWithEntitiesAndP2P.react').__setRef('MercuryMessageBody.react')},x,{getMessengerEmote:this.$MercuryMessageBody6,isSupportedEmoji:this.$MercuryMessageBody7,threadID:this.props.threadID}));}var z=c('React').createElement(c('MessengerTextWithEntities.react'),x);if(q)return z;var aa=this.renderCTAs(this.props.metaRanges||[]);if(!aa)return z;return c('React').createElement('span',null,z,aa);};o.prototype.render=function(){var p=this.state,q=p.normalizedBody,r=p.isEncrypted,s=p.isMathBlock;if(q.length===0)return null;n();if(this.props.plainText){return c('React').createElement('span',null,q);}else if(r){return c('React').createElement('span',{className:"_89h"},i._("[encrypted message]"));}else if(s){return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('MessengerMath.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('div',null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,stripDelimiters:true,className:"_1e4d"});}else return this.renderBody(q);};o.prototype.$MercuryMessageBody7=function(p){return c('MessengerSupportedEmojiUtils').isSupportedEmojiKey(p);};o.prototype.$MercuryMessageBody6=function(p){var q=c('EmoticonEmojiList').emote2emojis[p];return c('MessengerSupportedEmojiUtils').isSupportedEmojiKey(q)?q:null;};o.prototype.$MercuryMessageBody5=function(p){var q=new Date(p*c('DateConsts').MS_PER_SEC),r=new Date(Date.now()+5*c('DateConsts').MS_PER_MIN),s=new Date(new Date().setFullYear(new Date().getFullYear()+1));return q>r&&q<s;};o.prototype.$MercuryMessageBody1=function(p){var q=p.filter(function(r){return r.data&&(r.data.intent_name==='create_event'||r.data.name==='create_event');});return q.length!==0?q:p;};o.prototype.$MercuryMessageBody2=function(p){var q=arguments.length<=1||arguments[1]===undefined?this.props:arguments[1];return !!(q.threadID&&c('P2PTriggersUtils').canSeeTriggers(q.threadID)&&c('P2PTriggersUtils').getMatches(p));};o.propTypes={body:m.string,customLike:m.object,isFromViewer:m.bool,metaRanges:m.array,ranges:m.array,threadCustomColor:m.string,threadID:m.string,onContactSelect:m.func,renderLocation:m.oneOf([c('MercuryMessageRenderLocations').CHAT,c('MercuryMessageRenderLocations').MESSENGER,c('MercuryMessageRenderLocations').PAGES])};f.exports=o;}),null);
__d('MercuryMessageDeliveryState',[],(function a(b,c,d,e,f,g){'use strict';var h={SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1};f.exports=h;}),null);
__d('MercuryMessageInfo',['MercuryActionStatus','MercuryMessageDeliveryState','MercuryViewer'],(function a(b,c,d,e,f,g){'use strict';var h={isOutbound:function i(j){return j.author===c('MercuryViewer').getID();},isInbound:function i(j){return !h.isOutbound(j);},isSending:function i(j){return j.status===c('MercuryActionStatus').UNSENT||j.status===c('MercuryActionStatus').UNCONFIRMED||j.status===c('MercuryActionStatus').UNABLE_TO_CONFIRM||j.status===c('MercuryActionStatus').RESENDING;},isSent:function i(j){return j.status===undefined||j.status===c('MercuryActionStatus').SUCCESS;},hasError:function i(j){return j.status===c('MercuryActionStatus').FAILED_UNKNOWN_REASON||j.status===c('MercuryActionStatus').UNABLE_TO_CONFIRM||j.status===c('MercuryActionStatus').ERROR;},getDeliveryState:function i(j,k){if(this.hasError(j))return c('MercuryMessageDeliveryState').ERROR;if(this.isSending(j))return c('MercuryMessageDeliveryState').SENDING;if(this.isSent(j)){if(j.timestamp<=k)return c('MercuryMessageDeliveryState').DELIVERED;return c('MercuryMessageDeliveryState').SENT;}return c('MercuryMessageDeliveryState').UNKNOWN;}};f.exports=h;}),null);
__d('MercuryErrorInfo',['fbt','MercuryErrorType','MercuryMessageInfo'],(function a(b,c,d,e,f,g,h){var i={getMessage:function j(k){var l='';if(i.isConnectionError(k)){l=h._("This message didn't send.");if(i.isTransient(k))l=h._("{message} Check your internet connection and click to try again.",[h.param('message',l)]);}else{if(k&&k.description){l=k.description;}else l=h._("This message failed to send.");if(i.isTransient(k))l=h._("{message} Click to send again.",[h.param('message',l)]);}return l;},isConnectionError:function j(k){if(k&&k.type==c('MercuryErrorType').TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function j(k){return k&&k.is_transient;},isPermanent:function j(k){return k?!this.isTransient(k):false;},hasErrorStatus:function j(k){return c('MercuryMessageInfo').hasError(k);}};f.exports=i;}),null);
__d('MercuryMessageError.react',['cx','CurrentUser','ImmutableObject','Link.react','MercuryErrorInfo','MercuryMessageActions','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.messageResend=function(r){r.preventDefault();var s=this.props.message,t=s.error_data;if(c('MercuryErrorInfo').isTransient(t))c('MercuryMessageActions').getForFBID(this.props.authorFBID).resend(this.props.message);}.bind(this),n;}l.prototype.render=function(){var m=this.props.message,n=m.error_data;return c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{href:'#',className:c('joinClasses')(this.props.className,this.$MercuryMessageError1(m)),tabIndex:c('MercuryErrorInfo').isTransient(n)?0:null,onClick:this.messageResend}),c('React').createElement('i',{className:"_2fs1"}),c('React').createElement('span',{className:"_61ag",dangerouslySetInnerHTML:{__html:this.$MercuryMessageError2(m)}}));};l.prototype.$MercuryMessageError1=function(m){if(c('MercuryErrorInfo').hasErrorStatus(m)){return "_2fs2"+(' '+"_2fs3")+(c('MercuryErrorInfo').isTransient(m.error_data)?' '+"_2fs4":'')+(c('MercuryErrorInfo').isPermanent(m.error_data)?' '+"_2fs5":'');}else return "_2fs6 _2fs2";};l.prototype.$MercuryMessageError2=function(m){var n='',o=m.error_data;if(c('MercuryErrorInfo').hasErrorStatus(m)){var p=c('MercuryErrorInfo').getMessage(o);if(p)n=p.toString();}if(typeof n==='object'&&n.__html)n=n.__html;return n;};l.propTypes={authorFBID:k.string,message:k.instanceOf(c('ImmutableObject')).isRequired};l.defaultProps={authorFBID:c('CurrentUser').getID()};f.exports=l;}),null);
__d("DragDropFileUpload",[],(function a(b,c,d,e,f,g){g.isSupported=function(){return typeof FileList!=="undefined";};}),null);
__d('DocumentDragDrop',['Arbiter','CSS','DOMQuery','DragDropFileUpload','Event','emptyFunction','getObjectValues','getOrCreateDOMID'],(function a(b,c,d,e,f,g){var h={},i=0;function j(){i=0;c('getObjectValues')(h).forEach(function(o){c('CSS').removeClass(o.element,o.className);c('Arbiter').inform('dragleave',{element:o.element});});}var k=null;function l(){k&&clearTimeout(k);k=setTimeout(function(){j();},500);}var m=function o(){if(!c('DragDropFileUpload').isSupported())return;c('Event').listen(document,'dragenter',function(p){if(i===0)c('getObjectValues')(h).forEach(function(q){c('CSS').addClass(q.element,q.className);c('Arbiter').inform('dragenter',{element:q.element,event:p});});i++;l();});c('Event').listen(document,'dragleave',function(p){i--;if(i===0)j();l();});c('Event').listen(document,'drop',function(p){j();var q=p.getTarget();if(c('DOMQuery').isNodeOfType(p.getTarget(),'input'))if(q.type==='file')return;p.prevent();});c('Event').listen(document,'dragover',c('Event').prevent);document.addEventListener('dragover',l,true);m=c('emptyFunction');},n={init:function o(){m();},registerStatusElement:function o(p,q){m();h[c('getOrCreateDOMID')(p)]={element:p,className:q};if(i>0)c('CSS').addClass(p,q);},removeStatusElement:function o(p){var q=c('getOrCreateDOMID')(p),r=h[q];if(r){c('CSS').removeClass(r.element,r.className);delete h[q];}}};f.exports=n;}),null);
__d('PhotosMimeType',[],(function a(b,c,d,e,f,g){var h={isImage:function j(k){return i(k)[0]==='image';},isJpeg:function j(k){var l=i(k);return h.isImage(k)&&(l[1]==='jpeg'||l[1]==='pjpeg');}};function i(j){return j.split('/');}f.exports=h;}),null);
__d('DataTransfer',['PhotosMimeType','createArrayFromMixed','emptyFunction'],(function a(b,c,d,e,f,g){var h=new RegExp('\u000D\u000A','g'),i='\u000A',j={'text/rtf':1,'text/html':1};function k(m){if(m.kind=='file')return m.getAsFile();}function l(m){'use strict';this.data=m;this.types=m.types?c('createArrayFromMixed')(m.types):[];}l.prototype.isRichText=function(){'use strict';if(this.getHTML()&&this.getText())return true;if(this.isImage())return false;return this.types.some(function(m){return j[m];});};l.prototype.getText=function(){'use strict';var m;if(this.data.getData)if(!this.types.length){m=this.data.getData('Text');}else if(this.types.indexOf('text/plain')!=-1)m=this.data.getData('text/plain');return m?m.replace(h,i):null;};l.prototype.getHTML=function(){'use strict';if(this.data.getData)if(!this.types.length){return this.data.getData('Text');}else if(this.types.indexOf('text/html')!=-1)return this.data.getData('text/html');};l.prototype.isLink=function(){'use strict';return this.types.some(function(m){return m.indexOf('Url')!=-1||m.indexOf('text/uri-list')!=-1||m.indexOf('text/x-moz-url');});};l.prototype.getLink=function(){'use strict';if(this.data.getData){if(this.types.indexOf('text/x-moz-url')!=-1){var m=this.data.getData('text/x-moz-url').split('\n');return m[0];}return this.types.indexOf('text/uri-list')!=-1?this.data.getData('text/uri-list'):this.data.getData('url');}return null;};l.prototype.isImage=function(){'use strict';var m=this.types.some(function(q){return q.indexOf('application/x-moz-file')!=-1;});if(m)return true;var n=this.getFiles();for(var o=0;o<n.length;o++){var p=n[o].type;if(!c('PhotosMimeType').isImage(p))return false;}return true;};l.prototype.getCount=function(){'use strict';if(Object.prototype.hasOwnProperty.call(this.data,'items')){return this.data.items.length;}else if(Object.prototype.hasOwnProperty.call(this.data,'mozItemCount')){return this.data.mozItemCount;}else if(this.data.files)return this.data.files.length;return null;};l.prototype.getFiles=function(){'use strict';if(this.data.items){return Array.prototype.slice.call(this.data.items).map(k).filter(c('emptyFunction').thatReturnsArgument);}else if(this.data.files){return Array.prototype.slice.call(this.data.files);}else return [];};l.prototype.hasFiles=function(){'use strict';return this.getFiles().length>0;};f.exports=l;}),null);
__d('DragDropTarget',['Arbiter','Event','SubscriptionsHandler','CSS','DataTransfer','DocumentDragDrop','DragDropFileUpload','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){this._element=i;this._listeners=new (c('SubscriptionsHandler'))();this._statusElem=i;this._dragEnterCount=0;this._enabled=false;}Object.assign(h.prototype,{_onFilesDropCallback:c('emptyFunction'),_onURLDropCallback:c('emptyFunction'),_onPlainTextDropCallback:c('emptyFunction'),_onDropCallback:c('emptyFunction'),_fileFilterFn:c('emptyFunction').thatReturnsArgument,setOnDocumentDragEnterCallback:function i(j){this._onDocumentDragEnterCallback=j;return this;},setOnDocumentDragLeaveCallback:function i(j){this._onDocumentDragLeaveCallback=j;return this;},setOnDragEnterCallback:function i(j){this._onDragEnterCallback=j;return this;},setOnDragLeaveCallback:function i(j){this._onDragLeaveCallback=j;return this;},setOnFilesDropCallback:function i(j){this._onFilesDropCallback=j;return this;},setOnURLDropCallback:function i(j){this._onURLDropCallback=j;return this;},setOnPlainTextDropCallback:function i(j){this._onPlainTextDropCallback=j;return this;},setOnDropCallback:function i(j){this._onDropCallback=j;return this;},enable:function i(){if(!c('DragDropFileUpload').isSupported())return this;this._listeners.engage();c('DocumentDragDrop').registerStatusElement(this._statusElem,'fbWantsDragDrop');this._listeners.addSubscriptions(c('Event').listen(this._element,'dragenter',this._onDragEnter.bind(this)),c('Event').listen(this._element,'dragleave',this._onDragLeave.bind(this)),c('Event').listen(this._element,'dragover',this._onDragOver.bind(this)),c('Event').listen(this._element,'drop',function(j){this._dragEnterCount=0;c('CSS').removeClass(this._statusElem,'fbDropReady');c('CSS').removeClass(this._statusElem,'fbDropReadyPhoto');c('CSS').removeClass(this._statusElem,'fbDropReadyPhotos');c('CSS').removeClass(this._statusElem,'fbDropReadyLink');var k=new (c('DataTransfer'))(j.dataTransfer),l={},m=false,n=this._fileFilterFn(j.dataTransfer.files);if(n.length){this._onFilesDropCallback(n,j);l.files=n;m=true;}var o=k.getLink();if(o){this._onURLDropCallback(o,j);l.url=o;m=true;}var p=k.getText();if(p){this._onPlainTextDropCallback(p,j);l.plainText=p;m=true;}if(m)this._onDropCallback(l,j);j.kill();}.bind(this)));this._listeners.addSubscriptions(c('Arbiter').subscribe('dragenter',this._onDocumentDragEnter.bind(this)),c('Arbiter').subscribe('dragleave',this._onDocumentDragLeave.bind(this)));this._enabled=true;return this;},disable:function i(){if(!this._enabled)return this;c('DocumentDragDrop').removeStatusElement(this._statusElem,'fbWantsDragDrop');c('CSS').removeClass(this._statusElem,'fbDropReady');c('CSS').removeClass(this._statusElem,'fbDropReadyPhoto');c('CSS').removeClass(this._statusElem,'fbDropReadyPhotos');c('CSS').removeClass(this._statusElem,'fbDropReadyLink');this._listeners.release();this._enabled=false;return this;},setFileFilter:function i(j){this._fileFilterFn=j;return this;},setStatusElement:function i(j){this._statusElem=j;return this;},_onDragEnter:function i(j){if(this._dragEnterCount===0){var k=new (c('DataTransfer'))(j.dataTransfer);c('CSS').addClass(this._statusElem,'fbDropReady');if(k.isLink()||!k.isImage()){c('CSS').addClass(this._statusElem,'fbDropReadyLink');}else if(k.getCount()>1){c('CSS').addClass(this._statusElem,'fbDropReadyPhotos');}else c('CSS').addClass(this._statusElem,'fbDropReadyPhoto');this._onDragEnterCallback&&this._onDragEnterCallback();}this._dragEnterCount++;j.preventDefault();},_onDragLeave:function i(j){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0){c('CSS').removeClass(this._statusElem,'fbDropReady');c('CSS').removeClass(this._statusElem,'fbDropReadyPhoto');c('CSS').removeClass(this._statusElem,'fbDropReadyPhotos');c('CSS').removeClass(this._statusElem,'fbDropReadyLink');this._onDragLeaveCallback&&this._onDragLeaveCallback();}},_onDragOver:function i(j){if(!j.dataTransfer){c('Event').kill(j);return;}try{var k=j.dataTransfer.effectAllowed;j.dataTransfer.dropEffect=k=='move'||k=='linkMove'?'move':'copy';}catch(l){}c('Event').kill(j);},_onDocumentDragEnter:function i(event,j){if(this._onDocumentDragEnterCallback&&j.element==this._element)this._onDocumentDragEnterCallback();},_onDocumentDragLeave:function i(event,j){this._dragEnterCount=0;this._onDragLeave(event);if(this._onDocumentDragLeaveCallback&&j.element==this._element)this._onDocumentDragLeaveCallback();}});f.exports=h;}),null);
__d('EventsActionsLogger',['Banzai','EventsActionsLoggerJSConfig','LoggerSlogXConfigs'],(function a(b,c,d,e,f,g){f.exports={log:function h(i,j,k){var l=babelHelpers['extends']({time:Date.now(),event_id:i,extra_data:k},j);c('Banzai').post('events_actions_logging',l);},Type:c('EventsActionsLoggerJSConfig').type,Target:c('EventsActionsLoggerJSConfig').target,Surface:c('EventsActionsLoggerJSConfig').surface,Mechanism:c('EventsActionsLoggerJSConfig').mechanism};}),null);
__d('EventDateTimePollActionsLogger',['EventsActionsLogger'],(function a(b,c,d,e,f,g){'use strict';f.exports={logClickOnEntryPoint:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_ENTRY_POINT,acontext:i});},logClickOnDateTimeTypeOption:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_DATE_TIME_TYPE_BUTTON,acontext:i});},logClickOnCustomTypeOption:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_BASIC_TYPE_BUTTON,acontext:i});},logClickOnCreateButton:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_CREATE_BUTTON,acontext:i});},logClickOnCancelButton:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_CANCEL_BUTTON,acontext:i});}};}),null);
__d('EventPlanExperiment',['EventRemindersGating','QE2Logger'],(function a(b,c,d,e,f,g){'use strict';var h='event_plan_entry_point_nux',i={shouldShowEntryPointNuxWithExposure:function j(){c('QE2Logger').logExposureForUser(h);return c('EventRemindersGating').shouldShowEntryPointNux;}};f.exports=i;}),null);
__d('EventReminderActionsLogger',['EventsActionsLogger'],(function a(b,c,d,e,f,g){f.exports={logViewOnChatTabSheet:function h(i){c('EventsActionsLogger').log(i,{type:c('EventsActionsLogger').Type.VIEW,target:c('EventsActionsLogger').Target.REMINDER_BANNER,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_BANNER}]}});},logViewOnTriggerWord:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.VIEW,target:c('EventsActionsLogger').Target.TRIGGER_WORD,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_WORD}]}});},logViewOnTriggerCTA:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.VIEW,target:c('EventsActionsLogger').Target.TRIGGER_CTA,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_WORD}]}});},logClickOnChatTabSheet:function h(i){c('EventsActionsLogger').log(i,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.REMINDER_BANNER,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_BANNER}]}});},logClickOnEntryPoint:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.REMINDER_ENTRYPOINT,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.MESSENGER_COMPOSER}]}});},logClickOnTriggerWord:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.TRIGGER_WORD,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_WORD}]}});},logClickOnTriggerCTA:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.TRIGGER_CTA,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_WORD}]}});}};}),null);
__d("XEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/eventreminder\/",{event_reminder_id:{type:"Int",required:true}});}),null);
__d('EventReminderRequestHelper',['AsyncRequest','EventReminderActions','XEventReminderController'],(function a(b,c,d,e,f,g){'use strict';var h={fetchEventReminder:function i(j,k,l){var m=c('XEventReminderController').getURIBuilder().setInt('event_reminder_id',k);new (c('AsyncRequest'))(m.getURI()).setHandler(function(n){if(n.payload){c('EventReminderActions').updateEventReminder(j,n.payload);l();}}).send();}};f.exports=h;}),null);
__d('WaterfallIDGenerator',['CurrentUser','md5'],(function a(b,c,d,e,f,g){function h(){var k=2147483647;return Math.random()*k;}function i(){return Math.floor(Date.now()/1000);}var j={generate:function k(){return c('md5')([c('CurrentUser').getID(),i(),h()].join(':'));}};f.exports=j;}),null);
__d('DraftJsEventsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:DraftJsEventsLoggerConfig',this.$DraftJsEventsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:DraftJsEventsLoggerConfig',this.$DraftJsEventsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$DraftJsEventsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$DraftJsEventsTypedLogger1=babelHelpers['extends']({},this.$DraftJsEventsTypedLogger1,j);return this;};h.prototype.setAnonymizedDom=function(j){this.$DraftJsEventsTypedLogger1.anonymized_dom=j;return this;};h.prototype.setEvent=function(j){this.$DraftJsEventsTypedLogger1.event=j;return this;};h.prototype.setExtraParams=function(j){this.$DraftJsEventsTypedLogger1.extra_params=j;return this;};h.prototype.setScriptPath=function(j){this.$DraftJsEventsTypedLogger1.script_path=j;return this;};h.prototype.setSelectionState=function(j){this.$DraftJsEventsTypedLogger1.selection_state=j;return this;};h.prototype.setVC=function(j){this.$DraftJsEventsTypedLogger1.vc=j;return this;};var i={anonymized_dom:true,event:true,extra_params:true,script_path:true,selection_state:true,vc:true};f.exports=h;}),null);
__d('MessengerBotsWebTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerBotsWebLoggerConfig',this.$MessengerBotsWebTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerBotsWebLoggerConfig',this.$MessengerBotsWebTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerBotsWebTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerBotsWebTypedLogger1=babelHelpers['extends']({},this.$MessengerBotsWebTypedLogger1,j);return this;};h.prototype.setCount=function(j){this.$MessengerBotsWebTypedLogger1.count=j;return this;};h.prototype.setEvent=function(j){this.$MessengerBotsWebTypedLogger1.event=j;return this;};h.prototype.setIndex=function(j){this.$MessengerBotsWebTypedLogger1.index=j;return this;};h.prototype.setPageID=function(j){this.$MessengerBotsWebTypedLogger1.page_id=j;return this;};h.prototype.setPayload=function(j){this.$MessengerBotsWebTypedLogger1.payload=j;return this;};h.prototype.setTitle=function(j){this.$MessengerBotsWebTypedLogger1.title=j;return this;};h.prototype.setTitles=function(j){this.$MessengerBotsWebTypedLogger1.titles=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setType=function(j){this.$MessengerBotsWebTypedLogger1.type=j;return this;};h.prototype.setURL=function(j){this.$MessengerBotsWebTypedLogger1.url=j;return this;};h.prototype.setVC=function(j){this.$MessengerBotsWebTypedLogger1.vc=j;return this;};var i={count:true,event:true,index:true,page_id:true,payload:true,title:true,titles:true,type:true,url:true,vc:true};f.exports=h;}),null);
__d('MessengerMessageActionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageActionsLoggerConfig',this.$MessengerMessageActionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageActionsLoggerConfig',this.$MessengerMessageActionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerMessageActionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerMessageActionsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageActionsTypedLogger1,j);return this;};h.prototype.setAction=function(j){this.$MessengerMessageActionsTypedLogger1.action=j;return this;};h.prototype.setAppID=function(j){this.$MessengerMessageActionsTypedLogger1.appid=j;return this;};h.prototype.setAppversion=function(j){this.$MessengerMessageActionsTypedLogger1.appversion=j;return this;};h.prototype.setClienttime=function(j){this.$MessengerMessageActionsTypedLogger1.clienttime=j;return this;};h.prototype.setContainermodule=function(j){this.$MessengerMessageActionsTypedLogger1.containermodule=j;return this;};h.prototype.setCountry=function(j){this.$MessengerMessageActionsTypedLogger1.country=j;return this;};h.prototype.setEntryPoint=function(j){this.$MessengerMessageActionsTypedLogger1.entry_point=j;return this;};h.prototype.setErrorText=function(j){this.$MessengerMessageActionsTypedLogger1.error_text=j;return this;};h.prototype.setGroupSize=function(j){this.$MessengerMessageActionsTypedLogger1.group_size=j;return this;};h.prototype.setMessageType=function(j){this.$MessengerMessageActionsTypedLogger1.message_type=j;return this;};h.prototype.setMid=function(j){this.$MessengerMessageActionsTypedLogger1.mid=j;return this;};h.prototype.setName=function(j){this.$MessengerMessageActionsTypedLogger1.name=j;return this;};h.prototype.setOfflineThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.offline_threadid=j;return this;};h.prototype.setPreviousReaction=function(j){this.$MessengerMessageActionsTypedLogger1.previous_reaction=j;return this;};h.prototype.setReaction=function(j){this.$MessengerMessageActionsTypedLogger1.reaction=j;return this;};h.prototype.setRecipientID=function(j){this.$MessengerMessageActionsTypedLogger1.recipient_id=j;return this;};h.prototype.setThreadType=function(j){this.$MessengerMessageActionsTypedLogger1.thread_type=j;return this;};h.prototype.setThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.threadid=j;return this;};h.prototype.setVC=function(j){this.$MessengerMessageActionsTypedLogger1.vc=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$MessengerMessageActionsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageActionsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,error_text:true,group_size:true,message_type:true,mid:true,name:true,offline_threadid:true,previous_reaction:true,reaction:true,recipient_id:true,thread_type:true,threadid:true,vc:true};f.exports=h;}),null);
__d('MessengerMessageRequestsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageRequestsLoggerConfig',this.$MessengerMessageRequestsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageRequestsLoggerConfig',this.$MessengerMessageRequestsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerMessageRequestsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerMessageRequestsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageRequestsTypedLogger1,j);return this;};h.prototype.setAction=function(j){this.$MessengerMessageRequestsTypedLogger1.action=j;return this;};h.prototype.setAppID=function(j){this.$MessengerMessageRequestsTypedLogger1.appid=j;return this;};h.prototype.setAppversion=function(j){this.$MessengerMessageRequestsTypedLogger1.appversion=j;return this;};h.prototype.setClienttime=function(j){this.$MessengerMessageRequestsTypedLogger1.clienttime=j;return this;};h.prototype.setContainermodule=function(j){this.$MessengerMessageRequestsTypedLogger1.containermodule=j;return this;};h.prototype.setCountry=function(j){this.$MessengerMessageRequestsTypedLogger1.country=j;return this;};h.prototype.setEntryPoint=function(j){this.$MessengerMessageRequestsTypedLogger1.entry_point=j;return this;};h.prototype.setExtraClientData=function(j){this.$MessengerMessageRequestsTypedLogger1.extra_client_data=j;return this;};h.prototype.setFolderType=function(j){this.$MessengerMessageRequestsTypedLogger1.folder_type=j;return this;};h.prototype.setName=function(j){this.$MessengerMessageRequestsTypedLogger1.name=j;return this;};h.prototype.setSurface=function(j){this.$MessengerMessageRequestsTypedLogger1.surface=j;return this;};h.prototype.setThreadID=function(j){this.$MessengerMessageRequestsTypedLogger1.thread_id=j;return this;};h.prototype.setThreadKeyMobile=function(j){this.$MessengerMessageRequestsTypedLogger1.thread_key_mobile=j;return this;};h.prototype.setThreadKeyWeb=function(j){this.$MessengerMessageRequestsTypedLogger1.thread_key_web=j;return this;};h.prototype.setVC=function(j){this.$MessengerMessageRequestsTypedLogger1.vc=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$MessengerMessageRequestsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageRequestsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,extra_client_data:true,folder_type:true,name:true,surface:true,thread_id:true,thread_key_mobile:true,thread_key_web:true,vc:true};f.exports=h;}),null);
__d('MessengerWebViewReactionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerWebViewReactionsLoggerConfig',this.$MessengerWebViewReactionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerWebViewReactionsLoggerConfig',this.$MessengerWebViewReactionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerWebViewReactionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerWebViewReactionsTypedLogger1=babelHelpers['extends']({},this.$MessengerWebViewReactionsTypedLogger1,j);return this;};h.prototype.setEmojiGroup=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group=j;return this;};h.prototype.setEmojiGroupCount=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group_count=j;return this;};h.prototype.setEvent=function(j){this.$MessengerWebViewReactionsTypedLogger1.event=j;return this;};h.prototype.setMid=function(j){this.$MessengerWebViewReactionsTypedLogger1.mid=j;return this;};h.prototype.setSenderID=function(j){this.$MessengerWebViewReactionsTypedLogger1.sender_id=j;return this;};h.prototype.setVC=function(j){this.$MessengerWebViewReactionsTypedLogger1.vc=j;return this;};var i={emoji_group:true,emoji_group_count:true,event:true,mid:true,sender_id:true,vc:true};f.exports=h;}),null);
__d('StickersTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:StickersLoggerConfig',this.$StickersTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:StickersLoggerConfig',this.$StickersTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$StickersTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$StickersTypedLogger1=babelHelpers['extends']({},this.$StickersTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$StickersTypedLogger1.event=j;return this;};h.prototype.setNumsearchresults=function(j){this.$StickersTypedLogger1.numsearchresults=j;return this;};h.prototype.setPackid=function(j){this.$StickersTypedLogger1.packid=j;return this;};h.prototype.setPackids=function(j){this.$StickersTypedLogger1.packids=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setSearchtoken=function(j){this.$StickersTypedLogger1.searchtoken=j;return this;};h.prototype.setStickerid=function(j){this.$StickersTypedLogger1.stickerid=j;return this;};h.prototype.setTagid=function(j){this.$StickersTypedLogger1.tagid=j;return this;};h.prototype.setTriggeredword=function(j){this.$StickersTypedLogger1.triggeredword=j;return this;};h.prototype.setTriggerused=function(j){this.$StickersTypedLogger1.triggerused=j;return this;};var i={event:true,numsearchresults:true,packid:true,packids:true,searchtoken:true,stickerid:true,tagid:true,triggeredword:true,triggerused:true};f.exports=h;}),null);
__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"});}),null);
__d('MessagesViewer',['AsyncRequest','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','emptyFunction','ge'],(function a(b,c,d,e,f,g){var h={renderSpotlight:function j(k,l,m,n){var o=k.setID;if(!o)o=c('MessagesViewerSetID').MESSAGES;i(c('React').createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c('PhotoStore').hasBeenCreated(o)&&k.endpoint){var p=new (c('AsyncRequest'))(k.endpoint);if(l)p.setRelativeTo(l);p.send();}},renderVideo:function j(k){i(k);}};function i(j){var k=c('ge')('messages_viewer');if(!k){k=c('DOM').create('div',{id:'messages_viewer'});document.body.appendChild(k);}c('ReactDOM').render(j,k,function(){this.subscribeOnce('close',function(){c('ReactDOM').unmountComponentAtNode(k);});});}f.exports=h;}),null);
__d('MercuryAttachmentViewer',['Bootloader','MessagesViewer','React','Run','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h={renderVideo:function i(j){c('Bootloader').loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(k,l){c('MessagesViewer').renderVideo(c('React').createElement(k,babelHelpers['extends']({},j,{forwardDialogComponent:l})));},'MercuryAttachmentViewer');},bootstrapWithConfig:function i(j,k){c('Bootloader').loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(l,m){c('MessagesViewer').renderSpotlight(j,k,l,m);},'MercuryAttachmentViewer');},preload:function i(){c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],c('emptyFunction'),'MercuryAttachmentViewer');});}};f.exports=h;}),null);
__d('ChatAnimatedGifs',['URI'],(function a(b,c,d,e,f,g){var h={shouldHideBody:function i(j){if(!j.has_attachment)return false;for(var k=0;k<j.attachments.length;k++){var l=j.attachments[k];if(l.preview_url){var m=h.getRawUrlFromSafeUrl(l.preview_url);if(j.body==m)return true;}}return false;},getRawUrlFromSafeUrl:function i(j){return new (c('URI'))(j).getQueryData().url;}};f.exports=h;}),null);
__d('EmojiOnlyMessage.react',['cx','EmojiImageURL','EmojiLikeConstants','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m="_1ift _1ifu",n=0,o=this.props.contents.map(function(p){n++;if(p.emojiKey){var q=c('EmojiImageURL').getMessengerURL(p.emojiKey,c('EmojiLikeConstants').sizeMap.dp32);return c('React').createElement(c('Image.react'),{alt:p.text,className:m,key:n,src:q});}else return c('React').createElement('span',{key:n},p.text);});return c('React').createElement('div',{tabIndex:'0'},o);};function l(){i.apply(this,arguments);}l.propTypes={contents:k.arrayOf(k.shape({emojiKey:k.string,text:k.string.isRequired})).isRequired};f.exports=l;}),null);
__d('MessagingGiftWrap.react',['cx','MessengerEnvironment','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap();}.bind(this),n;}l.prototype.render=function(){var m=c('MessengerEnvironment').messengerui;return c('React').createElement('div',{className:"_4p0m"+(this.state.unwrapped?' '+"_4p0o":'')+(m?' '+"_mxz":'')+(m?' '+"_4br2":'')+(!m?' '+"_3_om":'')+(this.props.isSticker?' '+"_52vq":''),onClick:this.$MessagingGiftWrap1,role:'presentation'},c('React').createElement('div',{className:"_4p0r"}),c('React').createElement('div',{className:"_4p0s _4p0t"}),c('React').createElement('div',{className:"_4p0s _4p0u"}));};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c('emptyFunction')};f.exports=l;}),null);
__d('messengerCustomColorUtils',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){j=j||{};j.backgroundColor=i;return j;}f.exports={customBubbleStyle:h};}),null);
__d('ChatBubble.react',['cx','DOMDimensions','EmojiOnlyMessage.react','MercuryMessageBody.react','MercuryMessageRenderLocations','MessagingGiftWrap.react','MessengerMathUtils','MessengerSupportedEmojiUtils','React','ReactDOM','joinClasses','messengerCustomColorUtils'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=2,k=c('React').createClass({displayName:'ChatBubble',_boxWidth:0,propTypes:{insideDecorators:i.arrayOf(i.object),attachments:i.node,body:i.string,className:i.string,customColor:i.string,customLike:i.object,isEmojiLike:i.bool,isFromViewer:i.bool,isGiftWrapped:i.bool,maxWidth:i.number.isRequired,message:i.object,metaRanges:i.array,onUnwrap:i.func,ranges:i.array,threadCustomColor:i.string,threadID:i.string},getInitialState:function l(){return {emojis:undefined,bubbleWidth:null};},componentDidMount:function l(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var m=this.props.body||'',n=c('MessengerSupportedEmojiUtils').getEmojiOnlyContents(m);if(n&&n.length)this.setState({emojis:n});}this._restyleBubble(this.props);},componentDidUpdate:function l(m){if(m.maxWidth!==this.props.maxWidth||m.body!==this.props.body||!m.attachments&&this.props.attachments)this._restyleBubble(m);},render:function l(){var m=this.props,n=m.attachments,o=m.body,p=o===undefined?'':o,q=m.className,r=m.insideDecorators,s=m.maxWidth,t=babelHelpers.objectWithoutProperties(m,['attachments','body','className','insideDecorators','maxWidth']),u=Object.assign({},t);delete u.customColor;delete u.customLike;delete u.isEmojiLike;delete u.isFromViewer;delete u.message;delete u.metaRanges;delete u.ranges;delete u.threadCustomColor;delete u.threadID;return c('React').createElement('div',babelHelpers['extends']({},u,{className:c('joinClasses')("_5w1r"+(!this.state.emojis?' '+"_3_om":'')+(!!this.state.emojis?' '+"_31xx":''),q),ref:'bubble',style:{maxWidth:s,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:p.length>=15?'break-word':'inherit'}}),c('React').createElement('div',{className:"_4gx_",ref:'inner'},this._renderContent(),n),r,this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null);},_renderContent:function l(){if(!this.props.body||this.props.isEmojiLike)return null;var m={},n=null;if(this.state.emojis){n=c('React').createElement(c('EmojiOnlyMessage.react'),{contents:this.state.emojis});}else{n=c('React').createElement(c('MercuryMessageBody.react'),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:c('MercuryMessageRenderLocations').CHAT});if(this.props.customColor)m=c('messengerCustomColorUtils').customBubbleStyle(this.props.customColor,m);}return c('React').createElement('div',{className:"_d97"+(!!this.state.emojis?' '+"_31xy":''),ref:'contentWrapper',style:m},c('React').createElement('span',{className:"_5yl5",ref:'content'},n));},_restyleBubble:function l(m){if(this.props.attachments||this.props.body!=null&&c('MessengerMathUtils').isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return;}var n=c('ReactDOM').findDOMNode(this.refs.bubble);if(m.maxWidth!==this.props.maxWidth||c('DOMDimensions').getElementDimensions(n).width>this.props.maxWidth){var o=this.props.maxWidth;this.setState({bubbleWidth:o},this._shrinkBubble);return;}this._shrinkBubble();},_shrinkBubble:function l(){var m=c('ReactDOM').findDOMNode(this.refs.bubble),n=c('DOMDimensions').getElementDimensions(m).width,o=c('ReactDOM').findDOMNode(this.refs.content),p=o?c('DOMDimensions').getElementDimensions(o).width+c('DOMDimensions').measureElementBox(c('ReactDOM').findDOMNode(this.refs.contentWrapper),'width',true,false,false):0,q=p+j;if(p>0&&q<this.props.maxWidth&&n-q-this.getBoxWidth()>0)this.setState({bubbleWidth:q});},contentWraps:function l(){var m=c('ReactDOM').findDOMNode(this.refs.content);if(!m)return false;var n=m.getClientRects(),o=c('DOMDimensions').getElementDimensions(m).height;return n&&n.length>1&&n[0].height<o;},getBoxWidth:function l(){if(!this._boxWidth)this._boxWidth=c('DOMDimensions').measureElementBox(c('ReactDOM').findDOMNode(this.refs.bubble),'width',true,true,false);return this._boxWidth;}});f.exports=k;}),null);
__d('ChatCodePasteUtils',['cx','BanzaiODS','ChatBubble.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=/`{3,}/;function j(l){return !!(l&&i.test(l)&&l.split('\n').length>1);}function k(l,m,n,o,p){var q=l.split(i),r=[];for(var s=0;s<q.length;s+=2){var t=q[s].trim();if(t)r.push(c('React').createElement('div',{key:s,className:"_5wde"+(' '+"_n4o")},c('React').createElement(c('ChatBubble.react'),{body:t,customColor:p||undefined,className:"clearfix _5wdf",maxWidth:m,ranges:n||undefined,threadID:o||undefined})));if(s+1<q.length&&q[s+1]){var u=q[s+1].split('\n'),v=u[0].replace(/[^a-zA-Z]+/g,''),w=u.slice(1).join('\n');c('BanzaiODS').bumpEntityKey('chat_code_paste','render_bubble');r.push(c('React').createElement('div',{key:s+1,className:"_5wde"+(' '+"_n4o")},c('React').createElement('div',{ref:'bubble',className:"_3_om _4yng _5wdf"},c('React').createElement('div',{ref:'syntaxTarget'+s,className:'language-'+v},w))));}}return r;}f.exports={containsCodeBlock:j,getCodeAndMessageBubbles:k};}),null);
__d('ChatTabBlinking',['cx','CSS','setIntervalAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';var i=600,j="highlightTitle",k={_blinkMap:{},_interval:null,_isHighlighting:false,blinkTab:function l(m,n){if(!this._blinkMap[m])this._blinkMap[m]={view:n,elem:n.getTabElem()};this.checkInterval();},unblinkTab:function l(m){if(this._blinkMap[m]){var n=this._blinkMap[m].elem;if(n)c('CSS').removeClass(n,j);delete this._blinkMap[m];}this.checkInterval();},checkInterval:function l(){var m=Object.keys(this._blinkMap).length;if(m>0){if(!this._interval)this._interval=c('setIntervalAcrossTransitions')(this._toggleBlinkHighlight.bind(this),i);}else if(this._interval){clearInterval(this._interval);this._interval=null;}},_toggleBlinkHighlight:function l(){this._isHighlighting=!this._isHighlighting;for(var m in this._blinkMap)if(Object.prototype.hasOwnProperty.call(this._blinkMap,m)){var n=this._blinkMap[m],o=n.elem,p=n.view;if(o&&o.parentNode&&!p.isFocused()&&!p.isHovered()){c('CSS').conditionClass(o,j,this._isHighlighting);}else this.unblinkTab(m);}}};f.exports=k;}),null);
__d('ChatCloseButton.react',['cx','fbt','Link.react','React','TrackingNodes','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.CLOSE_BUTTON),o=i._("Press Esc to close"),p=i._("Close tab"),q="_4vu4";return c('React').createElement(c('Link.react'),{'aria-label':this.props.active?o:p,className:c('joinClasses')(this.props.className,'close','button',q),'data-ft':n,'data-hover':'tooltip','data-tooltip-content':this.props.active?o:p,'data-tooltip-position':'above',onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown});};function m(){j.apply(this,arguments);}m.propTypes={onClick:l.func,onKeyUp:l.func,onMouseDown:l.func,active:l.bool};m.defaultProps={active:false};f.exports=m;}),null);
__d('ChatCollapsedLogMessageGroup.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n;}l.prototype.render=function(){var m=i._("See latest activity"),n=i._("See less activity");return c('React').createElement('div',{className:"_5w0o"},c('React').createElement(c('Link.react'),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed});}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c('React').createElement('div',null,c('React').createElement('div',{className:"_2zsu"}),this.props.children,c('React').createElement('div',{className:"_2zsu"})):null);};f.exports=l;}),null);
__d('ChatDateBreak.react',['cx','React','formatDate','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){'use strict';return this.props.date.getTime()!==m.date.getTime();};l.prototype.render=function(){'use strict';var m=c('formatDate')(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return c('React').createElement('time',{className:c('joinClasses')(this.props.className,"_5w-5")},c('React').createElement('span',{className:"_5w-6"},m));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l;}),null);
__d("MessageBorderType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLOWERS:"flowers"});}),null);
__d("MessageCustomizationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BORDER:"border"});}),null);
__d('MessagingFlowerCornerArrangements',['invariant','ix','Random','randomShuffle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={TOP_LEFT:'topLeft',BOTTOM_RIGHT:'bottomRight'},k={PINK:'pink',PURPLE:'purple',YELLOW:'yellow'},l={ROUND:'round',POINTY:'pointy'},m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c('Random').random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c('Random').random()>=.5?l.ROUND:l.POINTY];c('randomShuffle')(t);c('randomShuffle')(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]));}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999");}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000");}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r);};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop();};n.prototype.flower=function(r){var s=c('Random').random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y});};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y});};n.prototype.$ElementProducer9=function(r,s){var t=s.pivot*100+'%',u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,aa=void 0,ba=void 0,ca=void 0;if(this.$ElementProducer2){var da=u;u=v;v=da;y=-y;}if(this.$ElementProducer1===j.BOTTOM_RIGHT){ca=this.$ElementProducer4+u+'px';aa=this.$ElementProducer4+v+'px';w=100+w;y+=180;}else if(this.$ElementProducer1===j.TOP_LEFT){ba=this.$ElementProducer4+u+'px';z=this.$ElementProducer4+v+'px';}else h(0);var ea=[];if(w!==0)ea.push('translate('+w+'%, '+w+'%)');ea.push('scale('+x+')');if(y!==0)ea.push('rotate('+y+'deg)');return {style:{bottom:aa,left:ba,position:'absolute',right:ca,top:z,transform:ea.join(' '),transformOrigin:t+' '+t},image:r};};function o(r){return [r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})];}function p(r){return [r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})];}function q(r,s){var t=new n(r,s);return c('Random').random()<.5?o(t):p(t);}f.exports={createFlowers:q,corners:j};}),null);
__d('MessagingFlowerBorder.react',['Image.react','MessagingFlowerCornerArrangements','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.TOP_LEFT,this.props.offset).concat(c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.BOTTOM_RIGHT,this.props.offset));}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m;}k.prototype.render=function(){return c('React').createElement('div',null,this.state.elements.map(function(l,m){return c('React').createElement(c('Image.react'),{key:m,style:l.style,src:l.image});}));};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k;}),null);
__d('WebGraphQLLegacyHelper',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';f.exports={getURI:function i(j){var k=j.controller,l=j.docID,m=j.queryID,n=j.variables;l!=m&&(l||m)!=null||h(0);var o=k.getURIBuilder();if(m){o.setFBID('query_id',m);}else o.setFBID('doc_id',l);if(n)o.setString('variables',JSON.stringify(n));return o.getURI();}};}),null);
__d("XWebGraphQLMutationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/webgraphql\/mutation\/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"}});}),null);
__d('WebGraphQLMutationBase',['invariant','CurrentUser','WebGraphQLLegacyHelper','XWebGraphQLMutationController','base62'],(function a(b,c,d,e,f,g,h){'use strict';var i=0;function j(k){this.$WebGraphQLMutationBase1=k;}j.prototype.__getVariables=function(){return this.$WebGraphQLMutationBase1;};j.prototype.__getDocID=function(){return this.constructor.__getDocID();};j.__getController=function(){return c('XWebGraphQLMutationController');};j.__getDocID=function(){h(0);};j.getURI=function(k){return c('WebGraphQLLegacyHelper').getURI({controller:this.__getController(),docID:this.__getDocID(),variables:{data:babelHelpers['extends']({client_mutation_id:c('base62')(i++),actor_id:c('CurrentUser').getID()},k)}});};f.exports=j;}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1491398900900362";};j.getQueryID=function(){"use strict";return "254517288326467";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('ContextualLayerAutoFlipHorizontal',['ContextualLayerAutoFlip'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ContextualLayerAutoFlip'));i=h&&h.prototype;j.prototype.getValidPositions=function(k){'use strict';return [k.getPosition()];};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('ContextualLayerHideOnScrollOut',['Event','SubscriptionsHandler'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$ContextualLayerHideOnScrollOut1=i;}h.prototype.enable=function(){'use strict';if(!this.$ContextualLayerHideOnScrollOut2){this.$ContextualLayerHideOnScrollOut2=new (c('SubscriptionsHandler'))();this.$ContextualLayerHideOnScrollOut2.addSubscriptions(this.$ContextualLayerHideOnScrollOut1.subscribe('contextchange',this.$ContextualLayerHideOnScrollOut3.bind(this)),this.$ContextualLayerHideOnScrollOut1.subscribe('show',this.$ContextualLayerHideOnScrollOut4.bind(this)),this.$ContextualLayerHideOnScrollOut1.subscribe('hide',this.$ContextualLayerHideOnScrollOut5.bind(this)));}};h.prototype.disable=function(){'use strict';if(this.$ContextualLayerHideOnScrollOut2){this.$ContextualLayerHideOnScrollOut2.release();this.$ContextualLayerHideOnScrollOut2=undefined;}this.$ContextualLayerHideOnScrollOut5();};h.prototype.$ContextualLayerHideOnScrollOut4=function(){'use strict';if(!this.$ContextualLayerHideOnScrollOut6){this.$ContextualLayerHideOnScrollOut7=this.$ContextualLayerHideOnScrollOut1.getContextScrollParent();if(this.$ContextualLayerHideOnScrollOut7===window)return;this.$ContextualLayerHideOnScrollOut6=c('Event').listen(this.$ContextualLayerHideOnScrollOut7,'scroll',this.$ContextualLayerHideOnScrollOut8.bind(this));}};h.prototype.$ContextualLayerHideOnScrollOut5=function(){'use strict';if(this.$ContextualLayerHideOnScrollOut6){this.$ContextualLayerHideOnScrollOut6.remove();this.$ContextualLayerHideOnScrollOut6=undefined;this.$ContextualLayerHideOnScrollOut7=undefined;}};h.prototype.$ContextualLayerHideOnScrollOut8=function(){'use strict';var i=this.$ContextualLayerHideOnScrollOut1.getContent().getBoundingClientRect(),j=this.$ContextualLayerHideOnScrollOut7.getBoundingClientRect(),k=i.bottom<=j.top||i.top>=j.bottom,l=i.right<=j.left||i.left>=j.right;if(k||l)this.$ContextualLayerHideOnScrollOut1.hide();};h.prototype.$ContextualLayerHideOnScrollOut3=function(){'use strict';this.detach();if(this.$ContextualLayerHideOnScrollOut1.isShown())this.attach();};f.exports=h;}),null);
__d('MessengerReactionsContextualDialog.react',['cx','AccessibleLayer','ContextualLayerAutoFlipHorizontal','ContextualLayerHideOnScrollOut','ContextualLayerUpdateOnScroll','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal'),c('ContextualLayerHideOnScrollOut'),c('ContextualLayerUpdateOnScroll'),c('LayerHideOnEscape'),c('AccessibleLayer')],displayName:'MessengerReactionsContextualDialog',shouldSetARIAProperties:false,theme:{wrapperClassName:"_4owc"}}));f.exports=i;}),null);
__d('EmojiFormat',[],(function a(b,c,d,e,f,g){'use strict';function h(l){return l.split('_').map(function(m){return parseInt(m,16);});}function i(l){return l.map(function(m){return m.toString(16);}).join('_');}function j(l){var m='';for(var n=0;n<l.length;n++)m+=String.fromCodePoint(l[n]);return m;}function k(l){var m=this.codeStringToCodeArray(l);return this.codeArrayToUnicode(m);}f.exports={codeArrayToCodeString:i,codeArrayToUnicode:j,codeStringToCodeArray:h,codeStringToUnicode:k};}),null);
__d('MessengerReactionsUtil',['EmojiFormat'],(function a(b,c,d,e,f,g){'use strict';var h=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]],i={};h.forEach(function(j,k){i[c('EmojiFormat').codeArrayToUnicode(j)]=k+1;});f.exports={sortFunction:function j(k,l){if(!i[k]&&!i[l]){return 0;}else if(!i[k]){return 1;}else if(!i[l])return -1;return i[k]-i[l];},defaultReactions:h.map(c('EmojiFormat').codeArrayToUnicode)};}),null);
__d("MessagingThreadType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5});}),null);
__d('getThreadTypeNameFromThreadType',['MessagingThreadType'],(function a(b,c,d,e,f,g){'use strict';function h(i){for(var j in c('MessagingThreadType'))if(c('MessagingThreadType')[j]===i)return j;return '';}f.exports=h;}),null);
__d('MessengerReactionsMenu.react',['cx','Bootloader','CurrentUser','DOM','DOMContainer.react','MercuryConfig','MercuryIDs','MercuryMessages','MercuryThreads','MessengerMessageActionsTypedLogger','MessengerReactionsContextualDialog.react','MessengerTextWithEmoticons.react','MessengerReactionsUtil','MessageReactionMutationWebGraphQLMutation','React','XAsyncRequest','getThreadTypeNameFromThreadType'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={animations:{}},this.$MessengerReactionsMenu2=function(q){!q&&this.props.onHide();}.bind(this),m;}k.prototype.componentDidMount=function(){if(c('MercuryConfig').WWWMessengerReaction)this.loadAnimation();};k.prototype.$MessengerReactionsMenu1=function(l,m){var n=c('DOM').create('span');l.loadAnimation({wrapper:n,animationData:m,renderer:'svg',loop:true,autoplay:true});return n;};k.prototype.loadAnimation=function(){var l=Date.now();c('Bootloader').loadModules(["bodymovin","MessengerReactionEmojiLove","MessengerReactionEmojiHaha","MessengerReactionEmojiWow","MessengerReactionEmojiSad","MessengerReactionEmojiAngry","MessengerReactionEmojiThumbsUp","MessengerReactionEmojiThumbsDown"],function(m){var n=c('MessengerReactionsUtil').defaultReactions,o={};for(var p=arguments.length,q=Array(p>1?p-1:0),r=1;r<p;r++)q[r-1]=arguments[r];for(var s=0;s<n.length;s++){var t=n[s];o[t]=this.$MessengerReactionsMenu1(m,q[s]);}this.setState({animations:o});c('Bootloader').loadModules(["MessengerRestReactionTypedLogger"],function(u){new u().setLoadedTime(Date.now()-l).log();},'MessengerReactionsMenu.react');}.bind(this),'MessengerReactionsMenu.react');};k.prototype.render=function(){var l=c('CurrentUser').getID(),m=this.props.message.reactions&&this.props.message.reactions[l];return c('React').createElement(c('MessengerReactionsContextualDialog.react'),{alignment:'center',contextRef:this.props.refProp,shown:true,onBlur:this.props.onHide,onToggle:this.$MessengerReactionsMenu2},c('React').createElement('div',{role:'select',className:"_1z8q _fy2"},c('MessengerReactionsUtil').defaultReactions.map(function(n){return c('React').createElement('span',{className:"_1z8r"+(n===m?' '+"_5-2b":''),id:n,key:n,onClick:function(){return this.$MessengerReactionsMenu3(n);}.bind(this),role:'option',tabIndex:'0'},!this.state.animations[n]?c('React').createElement(c('MessengerTextWithEmoticons.react'),{customSize:true,renderEmoticons:true,renderEmoji:true,text:n}):c('React').createElement(c('DOMContainer.react'),null,this.state.animations[n]));}.bind(this))));};k.prototype.$MessengerReactionsMenu3=function(l){var m=this.props,n=m.message,o=m.entryPoint,p=c('CurrentUser').getID(),q=n.reactions&&n.reactions[p],r=c('MercuryMessages').get().getServerMessageID(n.message_id),s=c('MessageReactionMutationWebGraphQLMutation').getURI({action:l===q?'REMOVE_REACTION':'ADD_REACTION',message_id:r,actor_id:p,reaction:l}),t=function u(v){var w=n.other_user_fbid||n.thread_fbid,x=c('MercuryThreads').get().getThreadMetaNow(n.thread_id),y=x&&x.participants?x.participants.length:0,z=c('getThreadTypeNameFromThreadType')(x&&x.thread_type),aa=n.attachments[0],ba=new (c('MessengerMessageActionsTypedLogger'))().setAction('reaction').setOfflineThreadid(n.offline_threading_id).setMid(r).setRecipientID(c('MercuryIDs').getUserIDFromParticipantID(n.author)).setEntryPoint(o).setReaction(l).setPreviousReaction(q).setGroupSize(y).setThreadType(z).setThreadid(w);if(v.errorSummary)ba=ba.setErrorText(v.errorSummary.toString());if(aa)ba=ba.setMessageType(aa.attach_type);ba.log();};new (c('XAsyncRequest'))(s).setMethod('POST').setHandler(t).send();this.props.onHide();};f.exports=k;}),null);
__d('MessengerReactionsPrompt.react',['cx','ix','Image.react','MessengerReactionsMenu.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={open:false},this.$MessengerReactionsPrompt1=function(){this.setState({open:true},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open);}.bind(this));}.bind(this),this.$MessengerReactionsPrompt2=function(){this.setState({open:false},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open);}.bind(this));}.bind(this),n;}l.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;return c('React').createElement('span',{className:(!this.props.isQuickAdd?"_5zvq":'')+(this.props.isQuickAdd?' '+"_yav":''),onClick:this.state.open?null:this.$MessengerReactionsPrompt1,ref:'button'},c('React').createElement(c('Image.react'),{src:this.props.isQuickAdd?i("278123"):this.state.open?i("277597"):i("277596")}),this.renderMenu());};l.prototype.renderMenu=function(){if(!this.state.open)return null;return c('React').createElement(c('MessengerReactionsMenu.react'),{entryPoint:'awareness_plus',message:this.props.message,onHide:this.$MessengerReactionsPrompt2,refProp:function(){return this.refs.button;}.bind(this)});};f.exports=l;}),null);
__d('MessengerReactions.react',['cx','fbt','Bootloader','CurrentUser','MercuryIDs','MercuryParticipants','MessengerEnvironment','MessengerReactionsUtil','MessengerReactionsPrompt.react','MessengerTextWithEmoticons.react','MessengerWebViewReactionsTypedLogger','TooltipData','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='ALL',n=c('CurrentUser').getID(),o=3,p=9;j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.$MessengerReactions2=function(){var w=c('MessengerEnvironment').messengerui,x=this.props,y=x.isFromViewer,z=x.message,aa=x.participants,ba=z.reactions;new (c('MessengerWebViewReactionsTypedLogger'))().setEvent('open_details').setMid(z.message_id).setSenderID(z.author).setEmojiGroup(m).setEmojiGroupCount(Object.values(ba).length).log();if(w){c('Bootloader').loadModules(["messengerDialogsRe","messengerReactionsDialogReact"],function(ca,da){var ea=da.jsComponent;ca.showDialog(function(){return c('React').createElement(ea,{isFromViewer:y,participants:aa,message:z});});},'MessengerReactions.react');}else c('Bootloader').loadModules(["ChatReactionsDialog"],function(ca){ca.show(z,aa,y);},'MessengerReactions.react');}.bind(this),s;}q.prototype.render=function(){var r=this.props,s=r.message,t=r.participants,u=r.renderQuickAdd,v=s.reactions;if((!v||!t)&&!u)return null;var w={},x=0,y=false;Object.entries(v||{}).forEach(function(da){var ea=da[0],fa=da[1];if(typeof fa==='string'){if(ea===n)y=true;if(!w[fa])w[fa]=0;w[fa]++;x++;}});var z=Object.keys(w).sort(c('MessengerReactionsUtil').sortFunction).slice(0,o).map(function(da,ea,fa){return c('React').createElement('span',{className:"_4kf5",style:{zIndex:fa.length-ea,marginLeft:ea===0?0:'-4px'},key:da},c('React').createElement(c('MessengerTextWithEmoticons.react'),{customSize:true,renderEmoticons:true,renderEmoji:true,text:da}));}),aa=x>0?c('React').createElement('span',{className:"_4kf5"+(' '+"_4kf6")+(y?' '+"_fy2":'')},x):null,ba=u&&!y?c('React').createElement('div',{className:"_aou _aov"},c('React').createElement('span',{className:"_aow"},c('React').createElement(c('MessengerReactionsPrompt.react'),{message:s,messageIsSelected:true,isQuickAdd:true}))):null,ca=c('TooltipData').propsFor(this.$MessengerReactions1());return c('React').createElement('div',babelHelpers['extends']({},ca,{className:"_4kf7 preview"}),c('React').createElement(c('ShimButton.react'),{className:"_aou",onClick:this.$MessengerReactions2},z,aa),ba);};q.prototype.$MessengerReactions1=function(){var r=this.props.message.reactions,s=this.props.participants;if(!r||!s)return '';var t=Object.keys(r),u=t.reduce(function(y,z){if(y.length>=p)return y;var aa=c('MercuryIDs').getParticipantIDFromUserID(z),ba=s.get(aa)||c('MercuryParticipants').getNow(aa),ca=ba&&ba.name;if(ca)y.push(ca);return y;},[]),v=u.length,w=u.join('\n');if(t.length>v){var x=i._("and {count} other(s)",[i.param('count',t.length-v)]);w+='\n'+x.toString();}return w;};q.propTypes={isFromViewer:l.bool.isRequired,message:l.object.isRequired,participants:l.object,renderQuickAdd:l.bool};f.exports=q;}),null);
__d('MessengerDecorator',['cssVar','cx','BootloadedComponent.react','CurrentUser','JSResource','MercuryAttachment','MercuryConfig','MercuryMessageActions','MercuryMessageCustomizations','MercuryTagHelper','MessageBorderType','MessageCustomizationType','MessagingFlowerBorder.react','MessagingGiftWrap.react','MessagingGiftWrapConstants','MessengerEnvironment','MessengerReactions.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function r(s){var t=s.attachments&&s.attachments.length===1&&s.attachments[0];if(!t)return false;if(c('MercuryAttachment').isPhotoGroupAttachment(t))return true;if(c('MercuryConfig').MessengerForwardButtonForSharedLinksGK&&c('MercuryAttachment').isShareAttachment(t)&&t.share&&(!t.share.target||!t.share.target.lwa_type))return true;if(c('MercuryConfig').MessengerForwardButtonForSharedFilesGK&&c('MercuryAttachment').isFileAttachment(t))return true;return false;},k=function r(s){var t=[],u=[];s.attachments.forEach(function(v){if(v.metadata&&v.metadata.fbid){t.push(v.metadata.fbid.toString());u.push(v.attach_type.toString());}if(c('MercuryConfig').MessengerForwardButtonForSharedLinksGK)if(c('MercuryAttachment').isShareAttachment(v)&&v.share&&v.share.share_id&&(!v.share.target||!v.share.target.lwa_type)){t.push(v.share.share_id.toString());u.push(v.attach_type);}if(c('MercuryConfig').MessengerForwardButtonForSharedFilesGK)if(c('MercuryAttachment').isFileAttachment(v)&&v.metadata&&v.metadata.file_id){t.push(v.metadata.file_id.toString());u.push(v.attach_type);}});return {ids:t,types:u};},l=[{name:'GiftWrap',check:function r(s){var t=function v(w){return c('MercuryTagHelper').get(w,c('MessagingGiftWrapConstants').TAG_PREFIX)===c('MessagingGiftWrapConstants').VALENTINES_GIFT;},u=function v(w){return !!c('MercuryTagHelper').get(w,c('MessagingGiftWrapConstants').UNWRAPPED_TAG);};return !!(s.tags&&t(s.tags)&&!u(s.tags));},render:function r(s,t){return c('React').createElement(c('MessagingGiftWrap.react'),{key:'giftwrap',onUnwrap:function u(){var v="2500ms",w=parseInt(v.substring(0,v.length-2),10);setTimeout(function(){return c('MercuryMessageActions').get().unwrap(s);},w);}});},getAdditionalClassNames:function r(){return null;}},{name:'FlowerBorder',check:function r(s){return c('MercuryConfig').WWWMessengerFlowerBorderViewer&&c('MercuryMessageCustomizations').getCustomizationValue(s,c('MessageCustomizationType').BORDER)===c('MessageBorderType').FLOWERS;},render:function r(s,t){if(c('MessengerEnvironment').messengerui)return c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10,key:'giftwrap:'+s.message_id});return c('React').createElement(c('MessagingFlowerBorder.react'),{key:'giftwrap:'+s.message_id});},getAdditionalClassNames:function r(){if(!c('MessengerEnvironment').messengerui)return "_337n";return null;}},{name:'Reactions',check:function r(s,t){var u=!!(s.reactions&&Object.keys(s.reactions).length>0),v=!!(!t&&j(s));return u||v;},render:function r(s,t,u){return c('React').createElement(c('MessengerReactions.react'),{isFromViewer:t,key:s.message_id+'-reactions',message:s,renderQuickAdd:j(s)&&!t,participants:u&&u.participants});},getAdditionalClassNames:function r(){return "_5z-5";}}],m=[],n=[{name:'ViewerMentioned',check:function r(s){return !!(c('MercuryConfig').MentionsReply&&s.profile_ranges&&s.profile_ranges.some(function(t){return t.id===c('CurrentUser').getID();}));},render:function r(s,t,u){var v=u?u.thread?u.thread.custom_color:u.threadCustomColor||u.customColor:undefined;return c('React').createElement(c('BootloadedComponent.react'),{key:'mention-reply:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerReplyToMention.react').__setRef('MessengerDecorator'),message:s,color:v});},getAdditionalClassNames:function r(){return "_aol";}}],o=[{name:'MontageReply',check:function r(s){if(!c('MercuryConfig').MontageThreadViewer)return false;var t=s.montage_reply_data&&s.montage_reply_data.message_id;return !!t;},render:function r(s,t){var u=s.montage_reply_data&&s.montage_reply_data.message_id,v=s.montage_reply_data&&s.montage_reply_data.reply_action;return c('React').createElement(c('BootloadedComponent.react'),{key:'montagereply:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MontageReplyDecoratorContainer.react').__setRef('MessengerDecorator'),isFromViewer:t,messageID:u,replyAction:v,replyAuthorID:s.author,threadID:s.thread_id});},getAdditionalClassNames:function r(){return null;}}],p=[{name:'ForwardImages',check:function r(s){return j(s);},render:function r(s,t){var u=k(s),v=u.ids,w=u.types;return c('React').createElement(c('BootloadedComponent.react'),{key:'forwardimages:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('MessengerEnvironment').messengerui?c('JSResource')('MessengerPhotoForwardButton.react').__setRef('MessengerDecorator'):c('JSResource')('ChatPhotoForwardButton.react').__setRef('MessengerDecorator'),attachmentIDs:v,attachmentTypes:w,isFromViewer:t});},getAdditionalClassNames:function r(){return "_ylc";}},{name:'ReactionPrompt',check:function r(s){return !j(s);},render:function r(s,t,u){return c('React').createElement(c('BootloadedComponent.react'),{key:'reactionprompt:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerReactionsPrompt.react').__setRef('MessengerDecorator'),message:s,messageIsSelected:u&&u.messageIsSelected,onShowMenu:u&&u.onShowMenu});},getAdditionalClassNames:function r(){return null;}},{name:'MessageActions',check:function r(s){return c('MessengerEnvironment').messengerui;},render:function r(s,t,u){return c('React').createElement(c('BootloadedComponent.react'),{key:'messageactions:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerMessageActions.react').__setRef('MessengerDecorator'),message:s,isActive:u&&u.messageIsSelected,onShowMenu:u&&u.onShowMenu,includeReactions:j(s),isShowingOriginal:u&&u.isShowingOriginal,hasFormatting:u&&u.hasFormatting,onToggleOriginal:u&&u.handleToggleOriginal});},getAdditionalClassNames:function r(){return null;}}],q={getBeforeDecorators:function r(){return o;},getAfterDecorators:function r(){return l;},getInnerDecorators:function r(){return p;},getAfterExternalDecorators:function r(){return m;},getInsideDecorators:function r(){return n;}};f.exports=q;}),null);
__d('MessengerInnerDecorators.react',['cx','MessengerDecorator','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={shown:false},this.$MessengerInnerDecorators1=function(q){this.setState({shown:q});}.bind(this),m;}k.prototype.render=function(){var l=c('MessengerDecorator').getInnerDecorators().map(function(m){if(m.check(this.props.message))return m.render(this.props.message,this.props.isFromViewer,babelHelpers['extends']({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$MessengerInnerDecorators1}));return null;}.bind(this)).filter(Boolean);return c('React').createElement('span',{className:"_40fu"},c('React').createElement('span',{className:"_2u_d"},l));};f.exports=k;}),null);
__d('MessengerVideoAutoplayActions',['MessengerFluxReduceDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h='messenger_video',i=c('keyMirror')({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null}),j={Types:i,Namespace:h,onScroll:function k(l,m,n,o){c('MessengerFluxReduceDispatcher').dispatch({type:i.SCROLL,namespace:h,threadID:l,messageIDs:m,messageRectMap:n,viewportRect:o});},updateStore:function k(l,m){c('MessengerFluxReduceDispatcher').dispatch({type:i.UPDATE,namespace:h,threadID:l,messageIDs:m});},deleteThread:function k(l){c('MessengerFluxReduceDispatcher').dispatch({type:i.DESTROY,namespace:h,threadID:l});},deleteAllThreads:function k(){c('MessengerFluxReduceDispatcher').dispatch({type:i.DESTROY_ALL,namespace:h});}};f.exports=j;}),null);
__d('MessengerVideoAutoplayStore',['FluxReduceStore','immutable','MessengerVideoAutoplayActions','MessengerFluxReduceDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('MessengerVideoAutoplayActions').Types;h=babelHelpers.inherits(m,c('immutable').Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));i=h&&h.prototype;function m(){h.apply(this,arguments);}j=babelHelpers.inherits(n,c('FluxReduceStore'));k=j&&j.prototype;n.prototype.getInitialState=function(){return c('immutable').Map();};n.prototype.reduce=function(o,p){if(p.namespace!==c('MessengerVideoAutoplayActions').Namespace)return o;switch(p.type){case l.SCROLL:if(p.messageIDs)o=this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);return this.$MessengerVideoAutoplayStore2(o,p.threadID,p.messageRectMap,p.viewportRect);case l.UPDATE:return this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);case l.DESTROY:return this.$MessengerVideoAutoplayStore3(o,p.threadID);case l.DESTROY_ALL:return o.clear();}return o;};n.prototype.$MessengerVideoAutoplayStore1=function(o,p,q){if(!q)return o['delete'](p);return o.set(p,new m({currentVideoMessageID:null,lastVideoMessageID:q.first(),messageIDs:q,videoVisibilityMap:null}));};n.prototype.$MessengerVideoAutoplayStore3=function(o,p){return o['delete'](p);};n.prototype.$MessengerVideoAutoplayStore4=function(o,p,q,r,s){var t=null,u=q.map(function(v){if(t){return [v,false];}else{var w=this.$MessengerVideoAutoplayStore5(v,r,s);if(w)t=v;return [v,w];}}.bind(this)).fromEntrySeq().toOrderedMap();return o.mergeIn([p],{currentVideoMessageID:t,videoVisibilityMap:u});};n.prototype.$MessengerVideoAutoplayStore2=function(o,p,q,r){var s=o.getIn([p,'messageIDs']);if(!s||!q||!r)return o;if(!o.getIn([p,'currentVideoMessageID'])){return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);}else{var t=o.getIn([p,'videoVisibilityMap']),u=o.getIn([p,'lastVideoMessageID']),v=o.getIn([p,'currentVideoMessageID']);if(this.$MessengerVideoAutoplayStore5(u,q,r)){if(t&&t.first())return o;}else if(this.$MessengerVideoAutoplayStore5(v,q,r))return o;o=o.setIn([p,'currentVideoMessageID'],null);return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);}};n.prototype.$MessengerVideoAutoplayStore6=function(o,p){if(!o)return false;return o.top>p.top&&o.bottom<p.bottom;};n.prototype.$MessengerVideoAutoplayStore5=function(o,p,q){var r=p.get(o);return this.$MessengerVideoAutoplayStore6(r,q);};n.prototype.getVideoVisibilityMap=function(o){return this.getState().getIn([o,'videoVisibilityMap']);};n.prototype.getMessageIDs=function(o){return this.getState().getIn([o,'messageIDs']);};n.prototype.isVisible=function(o,p){return !!this.getState().getIn([o,'videoVisibilityMap',p]);};function n(){j.apply(this,arguments);}f.exports=new n(c('MessengerFluxReduceDispatcher'));}),null);
__d('convertMIGColorToFIGColor',['cssVar'],(function a(b,c,d,e,f,g,h){'use strict';var i={'#0077e5':"#4080ff",'#44bec7':"#54C7EC",'#ffc300':'#f5c33b','#fa3c4c':"#F35369",'#d696bb':'#d696bb','#6699cc':"#7596c8",'#13cf13':"#42b72a",'#ff7e29':"#F7923B",'#e68585':'#e68585','#7646ff':"#8C72CB",'#20cef5':"#54C7EC",'#67b868':"#A3CE71",'#d4a88c':'#cfa588','#ff5ca1':"#EC7EBD",'#a695c7':"#AF9CDA"};function j(k){return k&&i[k]||k||'';}f.exports=j;}),null);
__d('ChatMessage.react',['cx','fbt','BootloadedComponent.react','ChatAnimatedGifs','ChatBubble.react','EmojiLikeUtils','FluxContainer','MercuryTimestamp','CSS','immutable','ImmutableObject','Locale','JSResource','MercuryAttachment','MercuryConfig','MercuryErrorInfo','MercuryIDs','MercuryMessageCustomizations','MercuryMessageError.react','MercuryMessageInfo','MessageBorderType','MessageCustomizationType','MessagingGiftWrapChecker','MessengerDecorator','MessengerInnerDecorators.react','MessengerVideoAutoplayStore','ChatCodePasteUtils','MNCommerceMessageType','MercuryDisplayTimeFilterMessageRenderer','React','ReactDOM','TooltipData','XUISpinner.react','convertMIGColorToFIGColor','isRTL','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={isVisible:false},this.$ChatMessage1=function(){return this.setState({hovered:true});}.bind(this),this.$ChatMessage2=function(){return this.setState({hovered:false});}.bind(this),o;}m.getStores=function(){return [c('MessengerVideoAutoplayStore')];};m.calculateState=function(n,o){return {isVisible:c('MessengerVideoAutoplayStore').isVisible(o.message.thread_id,o.message.message_id)};};m.prototype.componentDidMount=function(){c('CSS').conditionClass(c('ReactDOM').findDOMNode(this),"_2cnu",this.isOneLine());};m.prototype.isOneLine=function(){var n=this.props.message;return c('MercuryMessageInfo').isInbound(n)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps();};m.prototype.shouldComponentUpdate=function(n,o){var p=n.message!==this.props.message,q=false,r=false,s=this.props.thread;if(s){q=s.custom_like_icon!==n.thread.custom_like_icon;r=s.custom_color!==n.thread.custom_color;}else if(n.thread)return true;return p||q||r||o.isVisible!==this.state.isVisible;};m.prototype.render=function(){var n=this.props.message,o=c('MercuryAttachment').get(n).length>0,p=c('MercuryMessageInfo').isInbound(n),q=c('MercuryIDs').isGroupChat(n.thread_id),r=c('MercuryErrorInfo').hasErrorStatus(n),s="_5wd4"+(p?' '+"_1nc7":'')+(!p?' '+"_1nc6":'')+(o?' '+"_2_-t":'')+(p&&q?' '+"_5ysy":'')+(r?' '+"_1zcs":''),t=this.props,u=t.isFromViewer,v=t.participants,w=[],x=n;if(x)c('MessengerDecorator').getBeforeDecorators().forEach(function(y){if(y.check(x))w.push(y.render(x,u));});return c('React').createElement('div',{className:c('joinClasses')(this.props.className,s),onMouseEnter:this.$ChatMessage1,onMouseLeave:this.$ChatMessage2},c('React').createElement('div',{className:"_h8t"},w,this.$ChatMessage3()),c('React').createElement(c('MessengerInnerDecorators.react'),{message:n,isFromViewer:this.props.isFromViewer||false,hovered:this.state.hovered,messageProps:this.props}),this.$ChatMessage4(x,u),this.$ChatMessage5());};m.prototype.$ChatMessage3=function(){var n=this.props.message,o={};if(c('MercuryMessageInfo').isOutbound(n)){var p=i._("{time}",[i.param('time',c('MercuryTimestamp').getPreciseTimestamp(n.timestamp))]);Object.assign(o,c('TooltipData').propsFor(p,'right'));}if(n.is_filtered_content)return c('React').createElement('div',babelHelpers['extends']({className:"_5wd9"+(' '+"_5wdc")+(' '+"uiBoxYellow")+(' '+"clearfix"),ref:'inner'},o),c('MercuryDisplayTimeFilterMessageRenderer').renderFilteredContent(n));var q=this.$ChatMessage6('outside'),r=n.body&&n.body!==''?c('isRTL')(n.body):c('Locale').isRTL();return c('React').createElement('div',babelHelpers['extends']({className:"_5wd9"+(r?' '+"direction_rtl":'')+(!r?' '+"direction_ltr":''),ref:'inner'},o),this.$ChatMessage7(!q),q);};m.prototype.$ChatMessage4=function(n,o){var p,q=this;if(n){var p=function(){var r=[],s=[];c('MessengerDecorator').getAfterExternalDecorators().forEach(function(u){if(n&&u.check(n)){r.push(u.render(n,o,this.props));s.push(u.getAdditionalClassNames());}}.bind(q));if(s.length===0&&r.length===0)return {v:null};var t=s.join(' ');return {v:c('React').createElement('div',{className:c('joinClasses')(t,"_5ijz"+(!o?' '+"isFromOther":''))},r)};}();if(typeof p==="object")return p.v;}return null;};m.prototype.$ChatMessage5=function(){var n=this.props.message;if(n.is_filtered_content||!c('MercuryMessageInfo').hasError(n))return null;return c('React').createElement('div',{className:"_3ry4",ref:'undertext'},c('React').createElement(c('MercuryMessageError.react'),{className:"_5wda clearfix",message:n,ref:'status'}),this.$ChatMessage8());};m.prototype.$ChatMessage8=function(){return this.props.message.is_spoof_warning?c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('MercurySpoofWarning.react').__setRef('ChatMessage.react'),authorID:this.props.message.author,className:"_5wdb"}):null;};m.prototype.$ChatMessage9=function(){return c('React').createElement('div',{style:{padding:'20px',text_align:'center'}},c('React').createElement(c('XUISpinner.react'),null));};m.prototype.$ChatMessage6=function(n){if(this.props.message.commerce_message_type===c('MNCommerceMessageType').RIDE_INTENT)return null;var o=this.props.message,p=this.props.thread?this.props.thread.custom_like_icon:null,q=n=='inside'?'attachmentsInside':'attachmentsOutside',r=c('MercuryAttachment').get(o).filter(function(v){var w=c('MercuryAttachment').isBubblePreferred(v);return w&&n==='inside'||!w&&n==='outside';}),s=this.props.thread?c('convertMIGColorToFIGColor')(this.props.thread.custom_color):'',t=[],u=[];if(n==='outside'&&o)c('MessengerDecorator').getAfterDecorators().forEach(function(v){if(v.check(o,this.props.isFromViewer)){t.push(v.render(o,this.props.isFromViewer,this.props));u.push(v.getAdditionalClassNames());}}.bind(this));if(r.length>0)return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:this.$ChatMessage9(),bootloadLoader:c('JSResource')('MercuryAttachments.react').__setRef('ChatMessage.react'),className:c('joinClasses')((n==='outside'?"_3e7u":'')+(!!o.body?' '+"_16ys":'')+(!!s?' '+"_3al":'')+(' '+"_n4o"),u),attachments:r,customLike:p,customColor:s,hasFlowerBorder:c('MercuryConfig').WWWMessengerFlowerBorderViewer&&c('MercuryMessageCustomizations').getCustomizationValue(o,c('MessageCustomizationType').BORDER)===c('MessageBorderType').FLOWERS&&n==='outside',isChat:true,isGiftWrapped:c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(o)&&n==='outside',afterDecorators:t,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:o,onUnwrap:this.$ChatMessage10,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:q});return null;};m.prototype.$ChatMessage7=function(n){var o=this.props,p=o.isFromViewer,q=o.message,r=o.thread,s=q.body,t=this.$ChatMessage6('inside'),u=[],v=[],w=[],x=q;if(x){if(n)c('MessengerDecorator').getAfterDecorators().forEach(function(aa){if(aa.check(x,p)){u.push(aa.render(x,p,this.props));v.push(aa.getAdditionalClassNames());}}.bind(this));c('MessengerDecorator').getInsideDecorators().forEach(function(aa){if(aa.check(x,p)){w.push(aa.render(x,p,this.props));v.push(aa.getAdditionalClassNames());}}.bind(this));c('MessengerDecorator').getBeforeDecorators().forEach(function(aa){if(aa.check(x,p))v.push(aa.getAdditionalClassNames());});}var y=v.join(' ');if(c('ChatAnimatedGifs').shouldHideBody(q))s='';var z=q.ranges;if(q.profile_ranges&&q.profile_ranges.length)z=(z||[]).concat(q.profile_ranges.map(function(aa){return babelHelpers['extends']({},aa,{url:'/'+aa.id});}));if(c('ChatCodePasteUtils').containsCodeBlock(s))return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{height:22}}),bootloadLoader:c('JSResource')('ChatCodeBubble.react').__setRef('ChatMessage.react'),body:s,className:"_5wdf",maxWidth:this.props.maxBubbleWidth,ranges:z,threadID:q.thread_id,customColor:r&&p?c('convertMIGColorToFIGColor')(r.custom_color):''});if(s||t)return c('React').createElement('div',{className:c('joinClasses')(y,"_5wde"+(' '+"_n4o"))},c('React').createElement(c('ChatBubble.react'),{attachments:t,body:s,className:"_5wdf",insideDecorators:w,isEmojiLike:c('EmojiLikeUtils').isEmojiLike(q),isFromViewer:this.props.isFromViewer,metaRanges:q.meta_ranges,message:q,maxWidth:this.props.maxBubbleWidth,ranges:z,ref:'bubble',threadID:q.thread_id,customLike:q.customLike,customColor:r&&p?c('convertMIGColorToFIGColor')(r.custom_color):'',threadCustomColor:r&&c('convertMIGColorToFIGColor')(r.custom_color)}),u);return null;};m.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,maxBubbleWidth:l.number.isRequired,onAttachmentLoad:l.func,onStickerClick:l.func,participants:l.instanceOf(c('immutable').Map).isRequired,readReceipts:l.instanceOf(c('immutable').OrderedMap).isRequired,thread:l.instanceOf(c('ImmutableObject'))};f.exports=c('FluxContainer').create(m,{withProps:true});}),null);
__d('ChatMessageGroup.react',['cx','fbt','ChatConfig','ChatDateBreak.react','ChatMessage.react','Image.react','immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryTimestamp','MessengerTextWithEmoticons.react','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('immutable').OrderedMap,k=c('React').PropTypes,l=new (c('ImmutableObject'))({name:'',href:'#',image_src:''}),m=c('ChatConfig').get('chattab_rounded_profile',false),n=c('React').createClass({displayName:'ChatMessageGroup',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{activeMessageID:k.string,author:k.string,hasDateBreak:k.bool,isCanonical:k.bool,isFromViewer:k.bool,isPageMessage:k.bool,maxBubbleWidth:k.number,messages:k.instanceOf(c('immutable').List).isRequired,readReceipts:k.instanceOf(j).isRequired,onAttachmentLoad:k.func,onStickerClick:k.func,thread:k.instanceOf(c('ImmutableObject')),threadID:k.string},statics:{calculateState:function p(q){return {participants:o(q)};}},shouldComponentUpdate:function p(q,r){return this.props.activeMessageID!==q.activeMessageID||this.props.isFromViewer!==q.isFromViewer||!c('immutable').is(this.props.messages,q.messages)||!c('immutable').is(this.state.participants,r.participants)||!c('immutable').is(this.props.thread,q.thread);},render:function p(){return c('React').createElement('div',{className:"_4tdt"+(this.props.isFromViewer?' '+"_ua0":'')+(!this.props.isFromViewer?' '+"_ua1":'')+(this._hasSeenHeadsAtBottom()?' '+"_3lil":'')},this._renderProfileColumn(),c('React').createElement('div',{className:"_ua2"},this._renderName(),c('React').createElement('div',{className:"_4tdv"},this._renderMessages())));},_renderProfileColumn:function p(){if(this.props.isFromViewer)return null;var q=this.state.participants.get(this.props.author)||l,r=i._("{name} {time}",[i.param('name',q.name),i.param('time',c('MercuryTimestamp').getPreciseTimestamp(this.props.messages.last().timestamp))]),s=q.image_src?c('React').createElement(c('Image.react'),{src:q.image_src}):null;return c('React').createElement('div',{className:"_31o4"+(m?' '+"_3njy":'')},c('React').createElement('a',{'aria-label':r,className:"_4tdw",'data-hover':'tooltip','data-tooltip-content':r,'data-tooltip-position':'left',href:q.href,ref:'link'},s));},_renderName:function p(){if(this.props.isCanonical||this.props.isFromViewer)return null;var q=this.state.participants.get(this.props.messages.first().author);if(!q)return null;var r=q.short_name;if(this.props.thread&&this.props.thread.custom_nickname){var s=c('MercuryIDs').getUserIDFromParticipantID(q.id);if(this.props.thread.custom_nickname[s])r=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:this.props.thread.custom_nickname[s]});}return c('React').createElement('div',{className:"_4tdx"},r);},_renderMessages:function p(){var q=this.props.messages.size,r=[];this.props.messages.forEach(function(s,t,u){var v=s.message_id===this.props.activeMessageID;if(v&&!(t===0&&this.props.hasDateBreak))r.push(c('React').createElement(c('ChatDateBreak.react'),{date:new Date(s.timestamp),key:'db:'+s.message_id}));r.push(c('React').createElement(c('ChatMessage.react'),{isFromViewer:this.props.isFromViewer,key:s.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:s,participants:this.state.participants,readReceipts:this.props.readReceipts,ref:s.message_id,nextTimestamp:this._getNextTimestamp(u,q,t),onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,thread:this.props.thread}));}.bind(this));return r;},_hasSeenHeadsAtBottom:function p(){var q=this.props,r=q.messages,s=q.nextTimestamp,t=q.readReceipts,u=r.last().timestamp,v=0;t.forEach(function(w){if(w>=u&&w<s)if(++v===2)return false;return null;});return v===2;},_getNextTimestamp:function p(q,r,s){return s<r-1?q.get(s+1).timestamp:this.props.nextTimestamp;},getMessageElement:function p(q){return c('ReactDOM').findDOMNode(this.refs[q]);}});function o(p){return c('immutable').Map().withMutations(function(q){p.readReceipts.forEach(function(r,s){q.set(s,c('MercuryParticipants').getOrFetch(s));});q.set(p.author,c('MercuryParticipants').getOrFetch(p.author));});}f.exports=n;}),null);
__d('MercuryMessageRendererUtils',['cx','invariant','HovercardLink','MercuryViewer','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={getLinkToParticipant:function k(l,m){var n=l.fbid,o=c('HovercardLink').constructEndpoint({id:n}),p=m&&m.custom_nickname&&m.custom_nickname[n];if(p)p=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:p});var q=p?p:l.name;if(l.href)return c('React').createElement('a',{className:"_5wzt",href:l.href,'data-hovercard':o},q);return q;},moveCurrentUserToFront:function k(){var l=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];l||i(0);var m=l.indexOf(c('MercuryViewer').getID());if(m>0){var n=l.filter(function(o){return o!==c('MercuryViewer').getID();});return [c('MercuryViewer').getID()].concat(n);}return l;}};f.exports=j;}),null);
__d("TimeSpentRoomTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"});}),null);
__d('MessageThreadAssociatedObjectUtils',['TimeSpentRoomTypeEnum'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRender:function i(j){return j&&j.room_type===c('TimeSpentRoomTypeEnum').GROUP&&!j.is_workplace_community;},isLinkedToGroupChat:function i(j){return j&&j.room_type===c('TimeSpentRoomTypeEnum').GROUP&&!j.is_workplace_community;}};f.exports=h;}),null);
__d("MessengerParticipantAddModeTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"});}),null);
__d('MessengerAdminGroupUtils',['fbt','MercuryConfig','MercuryIDs','MessageThreadAssociatedObjectUtils','MessengerApprovalModeTypes','MessengerJoinableModeType','MessengerParticipantAddModeTypes','WorkModeConfig'],(function a(b,c,d,e,f,g,h){'use strict';var i={isJoinableAndOpenThread:function j(k){return this.isJoinableThread(k)&&this.isApprovalOpenThread(k);},isJoinableAndApprovalRequiredThread:function j(k){return !!(this.isJoinableThread(k)&&k&&k.approval_mode===c('MessengerApprovalModeTypes').APPROVALS);},shouldAddToApprovalQueue:function j(k,l){return !!(this.isJoinableAndApprovalRequiredThread(k)&&k&&!i.isViewerAdmin(k.admin_ids,l));},isJoinableThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.is_thread_queue_enabled===true&&k.joinable_mode&&k.joinable_mode.mode===c('MessengerJoinableModeType').JOINABLE);},isGroupChat:function j(k){return !!(k&&c('MessageThreadAssociatedObjectUtils').isLinkedToGroupChat(k.associated_object));},shouldInvite:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.participant_add_mode===c('MessengerParticipantAddModeTypes').INVITE);},isApprovalOpenThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.approval_mode===c('MessengerApprovalModeTypes').OPEN);},isOwner:function j(k,l){return k&&this.isJoinableThread(l);},canSeeGroupOptions:function j(k,l,m){var n=c('WorkModeConfig').is_work_user;return !n&&this.isJoinableThread(l);},canMakeOthersAdmins:function j(k,l,m){return this.isOwner(k,m)&&!l;},canMakeSelfAdmin:function j(k,l){return this.isJoinableThread(l)&&l.admin_ids.length===0&&k;},canRemoveAdmin:function j(k,l,m){return this.isOwner(k,m)&&l;},canRemoveFromGroup:function j(k,l){return this.isOwner(k,l)||!this.isJoinableThread(l);},showJoinableLink:function j(k){var l=!!(k&&k.joinable_mode&&k.joinable_mode.link),m=i.isJoinableThread(k);return m&&l;},showJoinableApprovalToggle:function j(k,l){if(k.associated_object&&!k.associated_object.approval_mode_toggleable)return false;var m=i.isViewerAdmin(k.admin_ids,l);return i.isOwner(m,k);},showApprovalQueue:function j(k,l){var m=i.isViewerAdmin(k.admin_ids,l),n=i.isOwner(m,k),o=0;if(k&&k.approval_queue_ids&&k.approval_queue_ids.length)o=k.approval_queue_ids.length;var p=i.isJoinableAndApprovalRequiredThread(k);return p&&n&&o>0;},showParticipantsModal:function j(k,l,m){return this.isJoinableThread(m)&&!k&&!l;},canUpdateThreadCustomization:function j(k,l){var m=i.isJoinableThread(k),n=i.isViewerAdmin(k.admin_ids,l);return k.is_subscribed&&(!m||n);},isViewerAdmin:function j(k,l){return this.isAdmin(k,c('MercuryIDs').getParticipantIDFromUserID(l));},isAdmin:function j(k,l){return k!==null&&k!==undefined&&k.indexOf(l)!==-1;},getLeaveGroupBodyText:function j(k,l){return this.isOwner(k,l)?h._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):h._("You will stop receiving messages from this conversation and people will see that you left.");},getLeaveGroupTitleText:function j(k,l){return this.isOwner(k,l)?h._("Leave this conversation?"):h._("Leave Conversation?");},getLeaveGroupButtonText:function j(k,l){return this.isOwner(k,l)?h._("Leave converstaion"):h._("Leave");},getMakeOwnerBodyText:function j(k,l){return k?h._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):h._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[h.param('owner\'s name',l)]);},getMakeOwnerTitleText:function j(k){return k?h._("Become group owner?"):h._("Add group owner?");},getMakeOwnerButtonText:function j(k){return k?h._("Become owner"):h._("Make owner");},getRemoveOwnerBodyText:function j(k,l,m){var n=void 0;if(k&&l){n=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");}else if(k&&!l){n=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");}else n=h._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[h.param('owner\'s name',m)]);return n;}};f.exports=i;}),null);
__d('MessengerLightweightActionUtils',['MercuryAttachmentType'],(function a(b,c,d,e,f,g){'use strict';function h(k){return !!(k&&k.attach_type===c('MercuryAttachmentType').SHARE&&k.share&&k.share.target&&k.share.target.lwa_type);}function i(k){var l=k.attachments;return !!(l&&l.length===1&&h(l[0]));}function j(k){return k.attachments[0].share.title;}f.exports={isLWAMessage:i,isLWAAttachment:h,getCollapsedLWAText:j};}),null);
__d('MercuryLogMessageRenderer',['cx','fbt','invariant','ix','Bootloader','CSS','Image.react','MercuryAttachmentViewer','MercuryViewer','MercuryLogMessageType','MessengerAdminGroupUtils','MessengerLightweightActionUtils','MessengerTextWithEmoticons.react','MercuryParticipants','React','ReactDOM','MercuryMessageRendererUtils','MercuryThreads','TooltipLink.react','UserAgent','convertMIGColorToFIGColor'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('MercuryThreads').get(),m='source:messenger_growth:event_upcoming_bump',n={renderText:function fa(ga,ha,ia,ja){ha=ha||l.getThreadMetaNow(ga.thread_id);if(c('MessengerLightweightActionUtils').isLWAMessage(ga)){ja(c('MessengerLightweightActionUtils').getCollapsedLWAText(ga));return;}switch(ga.log_message_type){case c('MercuryLogMessageType').SUBSCRIBE:var ka=ga.author;ga.log_message_data||j(0);var la=ga.log_message_data.added_participants;la||j(0);var ma=la.length===1&&ka===la[0];if(ma){c('Bootloader').loadModules(["MercuryJoinableMessageRenderer"],function(oa){oa.renderText(ga,ha,ja);},'MercuryLogMessageRenderer');}else q(ga,ja);break;case c('MercuryLogMessageType').UNSUBSCRIBE:if(c('MessengerAdminGroupUtils').isJoinableThread(ha)){c('MessengerAdminGroupUtils').isGroupChat(ha)?ca(ga,ja):w(ga,ja);}else v(ga,ja);break;case c('MercuryLogMessageType').THREAD_NAME:if(ha&&c('MessengerAdminGroupUtils').isJoinableThread(ha)){c('MessengerAdminGroupUtils').isGroupChat(ha)?da(ga,ha,ja):x(ga,ha,ja);}else y(ga,ha,ja);break;case c('MercuryLogMessageType').THREAD_IMAGE:if(ha&&c('MessengerAdminGroupUtils').isJoinableThread(ha)){c('MessengerAdminGroupUtils').isGroupChat(ha)?ea(ga,ha,ja):z(ga,ha,ja);}else aa(ga,ha,ja);break;case c('MercuryLogMessageType').WALLPAPER:ba(ga,ja);break;case c('MercuryLogMessageType').GENERIC_ADMIN_TEXT:var na=c('convertMIGColorToFIGColor')(ha&&ha.custom_color);c('Bootloader').loadModules(["MercuryXMATRenderer"],function(oa){ja(oa.renderText(na,ga,ia));},'MercuryLogMessageRenderer');break;default:c('Bootloader').loadModules(["MercurySpecialLogMessageRenderer"],function(oa){oa.renderText(ga,ja);},'MercuryLogMessageRenderer');break;}},renderIcon:function fa(ga){return c('React').createElement(c('Image.react'),{className:o(ga.log_message_type,ga.log_message_data),src:k("99239")});},renderLegacy:function fa(ga,ha,ia,ja){o(ja.log_message_type,ja.log_message_data).split(' ').forEach(function(ka){return ka&&c('CSS').addClass(ga,ka);});this.renderText(ja,null,false,function(ka){c('ReactDOM').render(c('React').createElement('span',null,ka),ha);});this.renderAttachmentLegacy(ia,ja);},renderAttachmentLegacy:function fa(ga,ha){var ia;if(ha.log_message_type===c('MercuryLogMessageType').THREAD_IMAGE)(function(){ha.log_message_data||j(0);var ja=ha.log_message_data.image;if(ja&&ja.preview_url){c('ReactDOM').render(c('React').createElement(c('Image.react'),{className:"_z6a",onClick:function ka(){return p(ja);},src:ja.preview_url}),ga);c('CSS').show(ga);}})();}};f.exports=n;function o(fa,ga){var ha=!!(ga&&ga.answered);return "_5wzu"+(fa===c('MercuryLogMessageType').SUBSCRIBE?' '+"_5wzj":'')+(fa===c('MercuryLogMessageType').UNSUBSCRIBE?' '+"_5wzk":'')+(fa===c('MercuryLogMessageType').THREAD_NAME?' '+"_5wzl":'')+(fa===c('MercuryLogMessageType').THREAD_IMAGE?' '+"_5wzm":'')+(fa===c('MercuryLogMessageType').VIDEO_CALL&&ha?' '+"_5wzn":'')+(fa===c('MercuryLogMessageType').VIDEO_CALL&&!ha?' '+"_5wzo":'')+(fa===c('MercuryLogMessageType').PHONE_CALL&&ha?' '+"_5wzp":'')+(fa===c('MercuryLogMessageType').PHONE_CALL&&!ha?' '+"_5wzq":'')+(fa===c('MercuryLogMessageType').SERVER_ERROR?' '+"_5wzr":'')+(!fa?' '+"_2r5l":'');}function p(fa){c('MercuryAttachmentViewer').bootstrapWithConfig({src:fa.preview_url,endpoint:fa.url,fbid:fa.metadata.fbid,dimensions:fa.metadata.dimensions,disablePaging:true},null);}function q(fa,ga){fa.log_message_data||j(0);var ha=c('MercuryMessageRendererUtils').moveCurrentUserToFront(fa.log_message_data.added_participants);ha||j(0);switch(ha.length){case 1:r(fa,ga,ha);break;case 2:s(fa,ga,ha);break;case 3:t(fa,ga,ha);break;default:u(fa,ga,ha);break;}}function r(fa,ga,ha){var ia=[fa.author,ha[0]];c('MercuryParticipants').getMulti(ia,function(ja){if(fa.author===c('MercuryViewer').getID()){ga(i._("You added {subscriber1}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]]))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} added you.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author]))]));}else ga(i._("{actor} added {subscriber1}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]]))]));});}function s(fa,ga,ha){var ia=[fa.author].concat(ha);c('MercuryParticipants').getMulti(ia,function(ja){if(fa.author===c('MercuryViewer').getID()){ga(i._("You added {subscriber1} and {subscriber2}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]]))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} added you and {subscriber2}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]]))]));}else ga(i._("{actor} added {subscriber1} and {subscriber2}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]]))]));});}function t(fa,ga,ha){var ia=[fa.author].concat(ha);c('MercuryParticipants').getMulti(ia,function(ja){if(fa.author===c('MercuryViewer').getID()){ga(i._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[2]]))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} added you, {subscriber2} and {subscriber3}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[2]]))]));}else ga(i._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[2]]))]));});}function u(fa,ga,ha){var ia=[fa.author].concat(ha);c('MercuryParticipants').getMulti(ia,function(ja){function ka(ma){var na=c('React').createElement('div',null,ma.map(function(oa){return c('React').createElement('div',null,oa.name);}));return c('React').createElement(c('TooltipLink.react'),{alignH:'center',position:'above',tooltip:na},i._({"*":"{num} more"},[i.param('num',ma.length,[0])]));}var la=ha.map(function(ma){return ja[ma];});if(fa.author===c('MercuryViewer').getID()){ga(i._("You added {subscriber1}, {subscriber2} and {more_people}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(la[0])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(la[1])),i.param('more_people',ka(la.slice(2)))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} added you, {subscriber2} and {more_people}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(la[1])),i.param('more_people',ka(la.slice(2)))]));}else ga(i._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(la[0])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(la[1])),i.param('more_people',ka(la.slice(2)))]));});}function v(fa,ga){var ha=[fa.author];fa.log_message_data||j(0);var ia=fa.log_message_data.removed_participants;ia||j(0);var ja=void 0;if(ia.length===1){ja=ia[0];ha.push(ja);}c('MercuryParticipants').getMulti(ha,function(ka){var la=ka[fa.author],ma=ka[ja];if(fa.author===c('MercuryViewer').getID()){if(!ja||ja===fa.author){ga(i._("You left the conversation."));}else ga(i._("You removed {name} from the conversation.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));}else if(!ja||ja===fa.author){ga(i._("{actor} left the conversation.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else if(ja===c('MercuryViewer').getID()){ga(i._("{actor} removed you from the conversation.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else ga(i._("{actor} removed {name} from the conversation.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));});}function w(fa,ga){var ha=[fa.author];fa.log_message_data||j(0);var ia=fa.log_message_data.removed_participants;ia||j(0);var ja=void 0;if(ia.length===1){ja=ia[0];ha.push(ja);}c('MercuryParticipants').getMulti(ha,function(ka){var la=ka[fa.author],ma=ka[ja];if(fa.author===c('MercuryViewer').getID()){if(!ja||ja===fa.author){ga(i._("You left the room."));}else ga(i._("You removed {name} from the room.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));}else if(!ja||ja===fa.author){ga(i._("{actor} left the room.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else if(ja===c('MercuryViewer').getID()){ga(i._("{actor} removed you from the room.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else ga(i._("{actor} removed {name} from the room.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));});}function x(fa,ga,ha){fa.log_message_data||j(0);var ia=fa.log_message_data.name,ja="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(fa.author===c('MercuryViewer').getID()){if(ia){var ka=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("You named the room: {name}.",[i.param('name',c('React').createElement('span',{className:ja},ka))]));}else ha(i._("You removed the room name."));}else c('MercuryParticipants').get(fa.author,function(la){var ma=c('MercuryMessageRendererUtils').getLinkToParticipant(la,ga);if(ia){var na=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("{actor} named the room: {name}.",[i.param('actor',ma),i.param('name',c('React').createElement('span',{className:ja},na))]));}else ha(i._("{actor} removed the room name.",[i.param('actor',ma)]));});}function y(fa,ga,ha){fa.log_message_data||j(0);var ia=fa.log_message_data.name,ja="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(ia&&fa.tags&&fa.tags.indexOf(m)!==-1){ha(i._("The group has been named {name}.",[i.param('name',c('React').createElement('span',{className:ja},c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia})))]));}else if(fa.author===c('MercuryViewer').getID()){if(ia){var ka=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("You named the conversation: {name}.",[i.param('name',c('React').createElement('span',{className:ja},ka))]));}else ha(i._("You removed the conversation name."));}else c('MercuryParticipants').get(fa.author,function(la){var ma=c('MercuryMessageRendererUtils').getLinkToParticipant(la,ga);if(ia){var na=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("{actor} named the conversation: {name}.",[i.param('actor',ma),i.param('name',c('React').createElement('span',{className:ja},na))]));}else ha(i._("{actor} removed the conversation name.",[i.param('actor',ma)]));});}function z(fa,ga,ha){if(fa.author===c('MercuryViewer').getID()){fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("You changed the room picture."));}else ha(i._("You removed the room picture."));}else c('MercuryParticipants').get(fa.author,function(ia){var ja=c('MercuryMessageRendererUtils').getLinkToParticipant(ia,ga);fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("{actor} changed the room picture.",[i.param('actor',ja)]));}else ha(i._("{actor} removed the room picture.",[i.param('actor',ja)]));});}function aa(fa,ga,ha){if(fa.tags!==undefined&&fa.tags.indexOf(m)!==-1){ha(i._("The conversation picture has been set."));}else if(fa.author===c('MercuryViewer').getID()){fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("You changed the conversation picture."));}else ha(i._("You removed the conversation picture."));}else c('MercuryParticipants').get(fa.author,function(ia){var ja=c('MercuryMessageRendererUtils').getLinkToParticipant(ia,ga);fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("{actor} changed the conversation picture.",[i.param('actor',ja)]));}else ha(i._("{actor} removed the conversation picture.",[i.param('actor',ja)]));});}function ba(fa,ga){if(fa.author===c('MercuryViewer').getID()){ga(i._("You changed the wallpaper."));}else c('MercuryParticipants').get(fa.author,function(ha){var ia=c('MercuryMessageRendererUtils').getLinkToParticipant(ha);ga(i._("{actor} changed the wallpaper.",[i.param('actor',ia)]));});}function ca(fa,ga){var ha=[fa.author];fa.log_message_data||j(0);var ia=fa.log_message_data.removed_participants;ia||j(0);var ja=void 0;if(ia.length===1){ja=ia[0];ha.push(ja);}c('MercuryParticipants').getMulti(ha,function(ka){var la=ka[fa.author],ma=ka[ja];if(fa.author===c('MercuryViewer').getID()){if(!ja||ja===fa.author){ga(i._("You left the chat."));}else ga(i._("You removed {name} from the chat.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));}else if(!ja||ja===fa.author){ga(i._("{actor} left the chat.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else if(ja===c('MercuryViewer').getID()){ga(i._("{actor} removed you from the chat.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else ga(i._("{actor} removed {name} from the chat.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));});}function da(fa,ga,ha){fa.log_message_data||j(0);var ia=fa.log_message_data.name,ja="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(fa.author===c('MercuryViewer').getID()){if(ia){var ka=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("You named the chat {name}.",[i.param('name',c('React').createElement('span',{className:ja},ka))]));}else ha(i._("You removed the chat name."));}else c('MercuryParticipants').get(fa.author,function(la){var ma=c('MercuryMessageRendererUtils').getLinkToParticipant(la,ga);if(ia){var na=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("{actor} named the chat {name}.",[i.param('actor',ma),i.param('name',c('React').createElement('span',{className:ja},na))]));}else ha(i._("{actor} removed the chat name.",[i.param('actor',ma)]));});}function ea(fa,ga,ha){if(fa.author===c('MercuryViewer').getID()){fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("You changed the chat picture."));}else ha(i._("You removed the chat picture."));}else c('MercuryParticipants').get(fa.author,function(ia){var ja=c('MercuryMessageRendererUtils').getLinkToParticipant(ia,ga);fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("{actor} changed the chat picture.",[i.param('actor',ja)]));}else ha(i._("{actor} removed the chat picture.",[i.param('actor',ja)]));});}}),null);
__d('MercuryLogMessage.react',['cx','fbt','DOM','DOMDimensions','Event','EventReminderRequestHelper','ImmutableObject','MercuryLogMessageRenderer','MercuryLogMessageType','MessagingGenericAdminTextType','React','ShimButton.react','cancelAnimationFrame','emptyFunction','formatDate','joinClasses','requestAnimationFrame','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={messageText:null,showEventReminderFlyout:false},this.$MercuryLogMessage4=function(){this.$MercuryLogMessage5();}.bind(this),this.$MercuryLogMessage9=function(){if(!this.state.showEventReminderFlyout){c('EventReminderRequestHelper').fetchEventReminder(this.props.thread.thread_id,this.props.thread.lightweight_event.oid,function(){this.$MercuryLogMessage1&&this.setState({showEventReminderFlyout:true});}.bind(this));}else this.setState({showEventReminderFlyout:false});}.bind(this),this.$MercuryLogMessage11=function(s){if(s!==this.state.showEventReminderFlyout)this.setState({showEventReminderFlyout:s});}.bind(this),o;}m.prototype.componentDidMount=function(){this.$MercuryLogMessage1=true;this.componentWillReceiveProps(this.props);};m.prototype.componentWillUnmount=function(){this.$MercuryLogMessage1=false;if(this.$MercuryLogMessage2)c('cancelAnimationFrame')(this.$MercuryLogMessage2);};m.prototype.$MercuryLogMessage3=function(){return c('React').createElement(c('ShimButton.react'),{form:'link',onClick:this.$MercuryLogMessage4},i._("Show previous messages."));};m.prototype.$MercuryLogMessage5=function(){var n=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(!this.$MercuryLogMessage1)return;if(n){this.setState({messageText:this.$MercuryLogMessage3()});}else{var o=i._("Couldn't find previous messages.");this.setState({messageText:o});}};m.prototype.componentWillReceiveProps=function(n){if(n.message.log_message_type===c('MercuryLogMessageType').SERVER_ERROR)return;c('MercuryLogMessageRenderer').renderText(n.message,n.thread,n.isLastOfType,function(o){this.$MercuryLogMessage1&&this.setState({messageText:o});}.bind(this));};m.prototype.shouldComponentUpdate=function(n,o){return this.state.messageText!=o.messageText||n.maxWidth!==this.props.maxWidth||this.state.showEventReminderFlyout!==o.showEventReminderFlyout;};m.prototype.componentDidUpdate=function(){this.$MercuryLogMessage6();if(!this.refs.attachment)return;c('MercuryLogMessageRenderer').renderAttachmentLegacy(this.refs.attachment,this.props.message);c('DOM').scry(this.refs.wrap,'img').forEach(function(n){var o=c('Event').listen(n,'load',function(){this.$MercuryLogMessage6();o.remove();}.bind(this));}.bind(this));};m.prototype.render=function(){return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_5ye6"),ref:'wrap',style:babelHelpers['extends']({},this.props.style,this.$MercuryLogMessage7()),title:c('formatDate')(new Date(this.props.message.timestamp),'g:ia')}),c('React').createElement('div',{className:"_5ye7"},c('MercuryLogMessageRenderer').renderIcon(this.props.message),this.state.messageText),c('React').createElement('div',{className:"_5ye8",ref:'attachment'},this.$MercuryLogMessage8()));};m.prototype.$MercuryLogMessage8=function(){if(this.props.thread&&!this.props.thread.lightweight_event||!this.props.message.log_message_data)return null;var n=void 0;c('requireWeak')('EventReminderStateStore',function(r){n=r.getEvent(this.props.thread.thread_id);}.bind(this));if(!n||!n.exists)return null;var o;c('requireWeak')('Link.react',function(r){o=r;});var p=void 0;switch(this.props.message.log_message_data.message_type){case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_CREATE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TIME:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TITLE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE:p=i._("Change");break;default:p=null;}var q=c('React').createElement(o,{href:'#',onClick:this.$MercuryLogMessage9,title:i._("Edit Event"),ref:'event_rem_link'},p);if(this.props.displayItems)q=null;return c('React').createElement('span',null,q,this.$MercuryLogMessage10());};m.prototype.$MercuryLogMessage10=function(){if(!this.state.showEventReminderFlyout)return null;var n={alignment:'right',position:'above',contextRef:function(){return this.refs.event_rem_link;}.bind(this),shown:this.state.showEventReminderFlyout,onToggle:this.$MercuryLogMessage11},o=void 0;c('requireWeak')('EventsActionsLogger',function(s){o=s;});var p={action_history:[{surface:o.Surface.MESSENGER_CHAT_TAB,mechanism:o.Mechanism.REMINDER_ADMIN_TEXT}]},q={threadID:this.props.thread.thread_id,dialogProps:n,flyoutNoSheet:true,isEditing:true,actionContext:p},r;c('requireWeak')('ChatEventReminderContainer.react',function(s){r=s;});return c('React').createElement(r,q);};m.prototype.$MercuryLogMessage7=function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null;};m.prototype.$MercuryLogMessage6=function(){if(this.$MercuryLogMessage2)c('cancelAnimationFrame')(this.$MercuryLogMessage2);this.$MercuryLogMessage2=c('requestAnimationFrame')(function(){this.props.onImageLoad&&this.props.onImageLoad(c('DOMDimensions').getElementDimensions(this.refs.wrap).height);delete this.$MercuryLogMessage2;}.bind(this));};m.propTypes={loadMoreMessages:l.func,maxWidth:l.number,message:l.instanceOf(c('ImmutableObject')).isRequired,onImageLoad:l.func,thread:l.object};m.defaultProps={onImageLoad:c('emptyFunction')};f.exports=m;}),null);
__d('MercuryMessageGroup',['MercuryActionType','MercuryAttachmentType','MercuryShareAttachmentRenderLocations','MercuryThreadlistConstants','MessengerLightweightActionUtils','enumerate'],(function a(b,c,d,e,f,g){'use strict';var h={calculateMessageGroups:function k(l,m){var n=[],o=null,p={value:null},q=c('enumerate')(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o);}o.push(r.value);p=r;}return n;},canAppendMessageToLastGroup:function k(l,m,n){var o=c('MercuryThreadlistConstants').GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes)return false;return true;}};function i(k,l){var m=k.has_attachment;if(m&&(l===c('MercuryShareAttachmentRenderLocations').MESSENGER||l===c('MercuryShareAttachmentRenderLocations').CHAT))m=j(k);return !!(c('MessengerLightweightActionUtils').isLWAMessage(k)||k.action_type==c('MercuryActionType').LOG_MESSAGE||m||k.html_body||k.body&&k.body.length>c('MercuryThreadlistConstants').MAX_CHARS_BEFORE_BREAK);}function j(k){var l=k.attachments[0];return !l||l.attach_type===c('MercuryAttachmentType').STICKER||l.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE;}f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabActionKeys',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false});}),null);
__d('PagesMessagingMercuryChatTabActions',['PagesMessagingMercuryChatTabActionKeys','PagesMessagingMercuryChatTabDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={requestGreetingConfig:function i(j){c('PagesMessagingMercuryChatTabDispatcher').dispatch({actionType:c('PagesMessagingMercuryChatTabActionKeys').REQUEST_GREETING_CONFIG,threadID:j});},notifyGreetingConfigReceived:function i(j,k){c('PagesMessagingMercuryChatTabDispatcher').dispatch({actionType:c('PagesMessagingMercuryChatTabActionKeys').NOTIFY_GREETING_CONFIG_RECEIVED,threadID:j,payload:k});}};f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('immutable').Record({pagesGreetingShouldShow:false,pagesGreetingContent:null,pageResponsiveness:null,coverPhotoData:null,connectionContext:null,pageOnlineMessage:null}));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/mercury\/greeting\/",{});}),null);
__d('PagesMessagingMercuryChatTabStore',['invariant','PagesMessagingMercuryChatTabActionKeys','PagesMessagingMercuryChatTabActions','AsyncRequest','PagesMessagingMercuryChatTabDispatcher','FluxStore','Map','MercuryIDs','PagesMessagingMercuryChatTabState','XMercuryChatTabPagesNullStateConfigController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FluxStore'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesMessagingMercuryChatTabDispatcher'));this.$PagesMessagingMercuryChatTabStore1=new (c('Map'))();}k.prototype.getStateByThread=function(l){if(!this.$PagesMessagingMercuryChatTabStore1.has(l))this.$PagesMessagingMercuryChatTabStore1.set(l,new (c('PagesMessagingMercuryChatTabState'))());var m=this.$PagesMessagingMercuryChatTabStore1.get(l);m||h(0);return m;};k.prototype.__onDispatch=function(l){var m=l.actionType,n=l.payload,o=l.threadID,p=this.getStateByThread(o);p||h(0);switch(m){case c('PagesMessagingMercuryChatTabActionKeys').REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(o);break;case c('PagesMessagingMercuryChatTabActionKeys').NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(o,this.$PagesMessagingMercuryChatTabStore4(n,p));break;}};k.prototype.$PagesMessagingMercuryChatTabStore2=function(l){var m=c('XMercuryChatTabPagesNullStateConfigController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({page_id:c('MercuryIDs').getUserIDFromThreadID(l)}).setHandler(function(n){return c('PagesMessagingMercuryChatTabActions').notifyGreetingConfigReceived(l,n.payload);}).send();};k.prototype.$PagesMessagingMercuryChatTabStore3=function(l,m){this.$PagesMessagingMercuryChatTabStore1.set(l,m);this.__emitChange();};k.prototype.$PagesMessagingMercuryChatTabStore4=function(l,m){return m.set('pagesGreetingShouldShow',l.pagesGreetingShouldShow).set('pagesGreetingContent',l.pagesGreetingContent).set('pageResponsiveness',l.pageResponsiveness).set('coverPhotoData',l.coverPhotoData).set('connectionContext',l.connectionContext).set('pageOnlineMessage',l.pageOnlineMessage);};f.exports=new k();}),null);
__d('PagesMessageListGreeting.react',['cx','FluxContainer','PagesMessagingMercuryChatTabActions','PagesMessagingMercuryChatTabStore','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.getStores=function(){return [c('PagesMessagingMercuryChatTabStore')];};k.calculateState=function(l,m){if(m.messageCount>0)return {shouldShowGreeting:false};var n=c('PagesMessagingMercuryChatTabStore').getStateByThread(m.threadID);return {greetingContent:n.pagesGreetingContent,shouldShowGreeting:n.pagesGreetingShouldShow};};k.prototype.componentDidMount=function(){c('PagesMessagingMercuryChatTabActions').requestGreetingConfig(this.props.threadID);};k.prototype.render=function(){if(!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0)return null;return c('React').createElement('div',{className:"_4fsh _3-8z"},this.state.greetingContent);};function k(){i.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d("messengerDomIDsRe",["uniqueID"],(function a(b,c,d,e,f,g){'use strict';var h={COMPOSER_INPUT_DESCRIPTION:c("uniqueID")(),CONVERSATION:c("uniqueID")(),MAIN_LABEL:c("uniqueID")(),MUTE_DIALOG_TITLE:c("uniqueID")(),THREAD_INFO_PANEL:c("uniqueID")(),THREAD_TITLE:c("uniqueID")()};g.ids=h;}),null);
__d('MessageList.react',['cx','immutable','ImmutableObject','MercuryActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageGroup','MessagingGenericAdminTextType','MessengerAdminGroupUtils','messengerDomIDsRe','MessengerLightweightActionUtils','PagesMessageListGreeting.react','React','ReactDOM','MercuryShareAttachmentRenderLocations','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDomIDsRe').ids,l=c('React').PropTypes,m=1000*60*60,n=function v(w){var x,y,z,aa=(x=w)!=null?(x=x.log_message_data)!=null?x.message_type:x:x;switch(aa){case c('MessagingGenericAdminTextType').GROUP_POLL:return (y=w)!=null?(y=y.log_message_data)!=null?(y=y.untypedData)!=null?y.question_id:y:y:y;case c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE:return (z=w)!=null?(z=z.log_message_data)!=null?(z=z.untypedData)!=null?z.game_id:z:z:z;default:return null;}},o=function v(w){if(c('MessengerLightweightActionUtils').isLWAMessage(w))return 'lwa';return null;};i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;function p(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=j.constructor).call.apply(v,[this].concat(y)),this.state={activeMessageID:null,messageGroups:c('MercuryMessageGroup').calculateMessageGroups(this.props.messages,this.props.location)},this.$MessageList4=function(aa){this.setState(function(ba){return {activeMessageID:ba.activeMessageID===aa?null:ba.activeMessageID};});}.bind(this),this.$MessageList5=function(aa){this.setState({activeMessageID:aa});}.bind(this),w;}p.prototype.componentWillReceiveProps=function(v){if(v.messages!==this.props.messages)this.setState({messageGroups:c('MercuryMessageGroup').calculateMessageGroups(v.messages,v.location)});};p.prototype.render=function(){var v=this.props,w=v.DateBreak,x=v.location,y=v.MessageGroup,z=v.CollapsedLogMessageGroup,aa=[],ba=[],ca=void 0,da=this.props.thread&&this.props.thread.custom_color,ea=da?{backgroundColor:da}:null,fa=this.state.activeMessageID,ga=this.state.messageGroups,ha=ga.length,ia=this.props.readReceipts,ja=ia.last(),ka=ja?ja.watermark:0,la=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),ma=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread),na={};for(var oa=this.props.messages.size-1;oa>=0;oa--){var pa=this.props.messages.get(oa),qa=n(pa)||o(pa);if(qa&&!na[qa])na[qa]=pa.message_id;}for(var ra=0;ra<ha;ra++){var sa=ra>0?ga[ra-1]:null,ta=sa&&sa.length>0?sa[sa.length-1]:null,ua=ga[ra],va=ua[0],wa=ua[ua.length-1],xa=false;if(!ta||va.timestamp-ta.timestamp>m){xa=true;var ya=c('React').createElement(w,{date:new Date(va.timestamp),key:'db:'+va.message_id,ref:'db:'+va.message_id});if(ba.length===0)aa.push(ya);}if(c('MessengerLightweightActionUtils').isLWAMessage(va))if(na[o(va)]!==va.message_id){var za=this.$MessageList1(va,na);aa.push(za);continue;}if(va.action_type==c('MercuryActionType').LOG_MESSAGE){var ab,bb=(ab=va)!=null?(ab=ab.log_message_data)!=null?ab.message_type:ab:ab,cb=bb===c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE,db=bb===c('MessagingGenericAdminTextType').GROUP_POLL;if((x===c('MercuryShareAttachmentRenderLocations').CHAT||x===c('MercuryShareAttachmentRenderLocations').MESSENGER)&&(va.log_message_type===c('MercuryLogMessageType').VIDEO_CALL||va.log_message_type===c('MercuryLogMessageType').PHONE_CALL)){var eb=this.$MessageList2(va,la,ga,ha,ra,ia,ka,wa);aa.push(eb);}else{var fb=this.$MessageList3(va,na);ca=va.message_id;if(ma&&!cb&&!db){ba.push(fb);}else{if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}aa.push(fb);}}continue;}if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}ua=c('immutable').List(ua);var gb=r(ga,ha,ra),hb=!t(ia,ua,gb),ib=s(ka,wa),jb=u(this.props.deliveryTimestamp,wa);aa.push(c('React').createElement(y,{activeMessageID:q(fa,ua),author:ua.first().author,deliveryTimestamp:jb,hasDateBreak:xa,isCanonical:this.props.isCanonical,isFromViewer:la===va.author,isPageMessage:this.props.isPageMessage,key:'mg:'+va.message_id,lastReadTimestamp:ib,maxBubbleWidth:this.props.maxBubbleWidth,messages:ua,nextTimestamp:gb,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,pageID:this.props.isPageMessage?this.props.viewer:null,readReceipts:hb?ia:c('immutable').OrderedMap(),ref:'mg:'+va.message_id,thread:this.props.thread,threadID:this.props.threadID}));}if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}var kb=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid,lb=null;if(x===c('MercuryShareAttachmentRenderLocations').MESSENGER&&kb&&this.props.isPageMessage)lb=c('React').createElement(c('PagesMessageListGreeting.react'),{messageCount:ba.length+ha,threadID:kb});return c('React').createElement('div',{id:x===c('MercuryShareAttachmentRenderLocations').MESSENGER?k.CONVERSATION:null},lb,aa);};p.prototype.getMessageElement=function(v,w){if(w){var x=this.refs['db:'+v];if(x)return c('ReactDOM').findDOMNode(x);}var y=this.state.messageGroups.find(function(ba){return ba.some(function(ca){return ca.message_id===v;});});if(!y)return null;var z=y[0].message_id,aa=this.refs['mg:'+z];if(!aa)return null;if(w&&z===v)return c('ReactDOM').findDOMNode(aa);return aa.getMessageElement(v);};p.prototype.$MessageList2=function(v,w,x,y,z,aa,ba,ca){var da=this.props.MessageGroup,ea={attach_type:'share',share:{style_list:['rtc_call_log','fallback'],log_message_body:v.log_message_body,log_message_data:v.log_message_data,log_message_type:v.log_message_type,timestamp:v.timestamp}},fa=c('ImmutableObject').setProperty(v,'attachments',[ea]);fa=c('ImmutableObject').setProperty(fa,'body','');var ga=c('immutable').List([fa]),ha=r(x,y,z),ia=!t(aa,ga,ha),ja=s(ba,ca),ka=u(this.props.deliveryTimestamp,ca);return c('React').createElement(da,{author:ga.first().author,deliveryTimestamp:ka,isFromViewer:w===v.author,key:v.message_id,lastReadTimestamp:ja,maxBubbleWidth:this.props.maxBubbleWidth,messages:ga,nextTimestamp:ha,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,readReceipts:ia?aa:c('immutable').OrderedMap(),thread:this.props.thread,threadID:this.props.threadID});};p.prototype.$MessageList3=function(v,w){var x=this.props.LogMessage,y=w[n(v)];if(v.log_message_type!==c('MercuryLogMessageType').SERVER_ERROR)return c('React').createElement(x,{className:this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?"_5w0o":null,key:v.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:v,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:y===v.message_id});return null;};p.prototype.$MessageList1=function(v,w){var x=w[o(v)],y=this.props.LogMessage;return c('React').createElement(y,{className:this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?"_5w0o":null,key:v.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:v,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:x===v.message_id});};p.propTypes={CollapsedLogMessageGroup:l.func.isRequired,DateBreak:l.func.isRequired,deliveryTimestamp:l.number.isRequired,isCanonical:l.bool,isPageMessage:l.bool,location:l.string.isRequired,LogMessage:l.func.isRequired,loadMoreMessages:l.func,MessageGroup:l.func.isRequired,messages:l.instanceOf(c('immutable').List).isRequired,onAttachmentLoad:l.func,onStickerClick:l.func,readReceipts:l.instanceOf(c('immutable').OrderedMap).isRequired,viewer:l.string.isRequired,thread:l.object,threadID:l.string};function q(v,w){return w.find(function(x){return x.message_id===v;})?v:null;}function r(v,w,x){return x<w-1?v[x+1][0].timestamp:Infinity;}function s(v,w){return w.timestamp>v?v:Infinity;}function t(v,w,x){return w.isEmpty()||v.last()<w.first().timestamp||v.first()>=x;}function u(v,w){return w.timestamp>v?v:Infinity;}f.exports=p;}),null);
__d('ChatConversation.react',['cx','invariant','ChatCollapsedLogMessageGroup.react','ChatDateBreak.react','ChatMessageGroup.react','immutable','MercuryLogMessage.react','MercuryIDs','mercuryRogerRe','MessageList.react','React','Set','MercuryShareAttachmentRenderLocations','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('mercuryRogerRe').get(),k=c('immutable').OrderedMap,l=c('React').PropTypes,m=c('React').createClass({displayName:'ChatConversation',_raf:(undefined,Number),_onMountTimeout:(undefined,Number),propTypes:{contextBanner:l.object,isCanonical:l.bool.isRequired,loadMoreMessages:l.func,maxBubbleWidth:l.number.isRequired,messages:l.instanceOf(c('immutable').List).isRequired,onAttachmentLoad:l.func,onMount:l.func,onStickerClick:l.func,viewer:l.string.isRequired,thread:l.object,threadID:l.string.isRequired},componentDidMount:function n(){this._raf=c('requestAnimationFrame')(function(){this._onMountTimeout=setTimeout(function(){this.props.onMount&&this.props.onMount();delete this._onMountTimeout;}.bind(this),0);delete this._raf;}.bind(this));},componentWillUnmount:function n(){if(this._raf)c('cancelAnimationFrame')(this._raf);clearTimeout(this._onMountTimeout);},render:function n(){return c('React').createElement('div',null,this.props.contextBanner,c('React').createElement(c('MessageList.react'),{DateBreak:c('ChatDateBreak.react'),LogMessage:c('MercuryLogMessage.react'),MessageGroup:c('ChatMessageGroup.react'),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:c('MercuryShareAttachmentRenderLocations').CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:c('ChatCollapsedLogMessageGroup.react'),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,readReceipts:this._calculateReceipts(this.props),ref:'messageList',viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID}));},_calculateReceipts:function n(o){var p=c('MercuryIDs').getParticipantIDFromUserID(o.viewer),q=j.getSeenTimestamps(o.threadID),r=new (c('Set'))(o.thread?o.thread.participants:q.keys());r['delete'](p);return q.withMutations(function(s){c('immutable').Seq(o.messages).reverse().forEach(function(t){if(r.size===0)return false;if(!r.has(t.author))return null;s.update(t.author,function(u){if(!u||u.watermark<=t.timestamp)return {watermark:t.timestamp,action:t.timestamp};return u;});r['delete'](t.author);return null;});});},getMessageList:function n(){return this.refs.messageList;}});f.exports=m;}),null);
__d('ChatEditParticipantsUtils',['AsyncDialog','AsyncRequest','MercuryIDs','MercuryThreadIDMap','URI'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreadIDMap').get(),i={showParticipantsModal:function j(k){if(!c('MercuryIDs').isGroupChat(k))return;h.getServerIDFromClientID(k,function(l){c('AsyncDialog').send(new (c('AsyncRequest'))(new (c('URI'))('/ajax/browser/dialog/multichat_members/').addQueryData({id:l})));});}};f.exports=i;}),null);
__d('ChatFlyoutPlaceholder.react',['React','XUISpinner.react'],(function a(b,c,d,e,f,g){'use strict';var h={padding:'30px',textAlign:'center'},i=function j(){return c('React').createElement('div',{style:h},c('React').createElement(c('XUISpinner.react'),{size:'large'}));};f.exports=i;}),null);
__d('DefaultDraftBlockRenderMap',['cx','immutable','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Map,j=c('React').createElement('ul',{className:"_1bv0"}),k=c('React').createElement('ol',{className:"_1bv1"}),l=c('React').createElement('pre',{className:"_1bv2"}),m=i({'header-one':{element:'h1'},'header-two':{element:'h2'},'header-three':{element:'h3'},'header-four':{element:'h4'},'header-five':{element:'h5'},'header-six':{element:'h6'},'unordered-list-item':{element:'li',wrapper:j},'ordered-list-item':{element:'li',wrapper:k},blockquote:{element:'blockquote'},atomic:{element:'figure'},'code-block':{element:'pre',wrapper:l},unstyled:{element:'div',aliasedElements:['p']}});f.exports=m;}),null);
__d('DefaultDraftInlineStyle',[],(function a(b,c,d,e,f,g){'use strict';f.exports={BOLD:{fontWeight:'bold'},CODE:{fontFamily:'monospace',wordWrap:'break-word'},ITALIC:{fontStyle:'italic'},STRIKETHROUGH:{textDecoration:'line-through'},UNDERLINE:{textDecoration:'underline'}};}),null);
__d('CharacterMetadata',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Map,k=c('immutable').OrderedSet,l=c('immutable').Record,m=k(),n={style:m,entity:null},o=l(n);h=babelHelpers.inherits(p,o);i=h&&h.prototype;p.prototype.getStyle=function(){return this.get('style');};p.prototype.getEntity=function(){return this.get('entity');};p.prototype.hasStyle=function(s){return this.getStyle().includes(s);};p.applyStyle=function(s,t){var u=s.set('style',s.getStyle().add(t));return p.create(u);};p.removeStyle=function(s,t){var u=s.set('style',s.getStyle().remove(t));return p.create(u);};p.applyEntity=function(s,t){var u=s.getEntity()===t?s:s.set('entity',t);return p.create(u);};p.create=function(s){if(!s)return q;var t={style:m,entity:null},u=j(t).merge(s),v=r.get(u);if(v)return v;var w=new p(u);r=r.set(u,w);return w;};function p(){h.apply(this,arguments);}var q=new p(),r=j([[j(n),q]]);p.EMPTY=q;f.exports=p;}),null);
__d('ContentStateInlineStyle',['CharacterMetadata','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map,i={add:function k(l,m,n){return j(l,m,n,true);},remove:function k(l,m,n){return j(l,m,n,false);}};function j(k,l,m,n){var o=k.getBlockMap(),p=l.getStartKey(),q=l.getStartOffset(),r=l.getEndKey(),s=l.getEndOffset(),t=o.skipUntil(function(u,v){return v===p;}).takeUntil(function(u,v){return v===r;}).concat(h([[r,o.get(r)]])).map(function(u,v){var w,x;if(p===r){w=q;x=s;}else{w=v===p?q:0;x=v===r?s:u.getLength();}var y=u.getCharacterList(),z;while(w<x){z=y.get(w);y=y.set(w,n?c('CharacterMetadata').applyStyle(z,m):c('CharacterMetadata').removeStyle(z,m));w++;}return u.set('characterList',y);});return k.merge({blockMap:o.merge(t),selectionBefore:l,selectionAfter:l});}f.exports=i;}),null);
__d('DraftFeatureFlags-core',[],(function a(b,c,d,e,f,g){'use strict';var h={draft_accept_selection_after_refocus:false,draft_killswitch_allow_nontextnodes:false,draft_segmented_entities_behavior:false};f.exports=h;}),null);
__d('DraftODS',['cx','BanzaiODS','CurrentUser','fbjs/lib/CSSCore'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('CurrentUser').isEmployee()?'.employee':'',j={init:function k(){document.addEventListener('input',function(l){if(l.target.nodeType===1&&c('fbjs/lib/CSSCore').hasClass(l.target,"_5rpu"))c('BanzaiODS').bumpEntityKey('draft_js','input_events'+i);});}};f.exports=j;}),null);
__d('DraftFeatureFlags',['DraftFeatureFlags-core','DraftGK','DraftODS'],(function a(b,c,d,e,f,g){'use strict';Object.assign(c('DraftFeatureFlags-core'),c('DraftGK'));if(c('DraftGK').draft_ods_enabled)c('DraftODS').init();f.exports=c('DraftFeatureFlags-core');}),null);
__d('applyEntityToContentBlock',['CharacterMetadata'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,c('CharacterMetadata').applyEntity(m.get(j),l));j++;}return i.set('characterList',m);}f.exports=h;}),null);
__d('applyEntityToContentState',['immutable','applyEntityToContentBlock'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=i.getBlockMap(),m=j.getStartKey(),n=j.getStartOffset(),o=j.getEndKey(),p=j.getEndOffset(),q=l.skipUntil(function(r,s){return s===m;}).takeUntil(function(r,s){return s===o;}).toOrderedMap().merge(c('immutable').OrderedMap([[o,l.get(o)]])).map(function(r,s){var t=s===m?n:0,u=s===o?p:r.getLength();return c('applyEntityToContentBlock')(r,t,u,k);});return i.merge({blockMap:l.merge(q),selectionBefore:j,selectionAfter:j});}f.exports=h;}),null);
__d('DraftEntitySegments',[],(function a(b,c,d,e,f,g){'use strict';var h={getRemovalRange:function i(j,k,l,m,n){var o=l.split(' ');o=o.map(function(y,z){if(n==='forward'){if(z>0)return ' '+y;}else if(z<o.length-1)return y+' ';return y;});var p=m,q,r,s=null,t=null;for(var u=0;u<o.length;u++){r=o[u];q=p+r.length;if(j<q&&p<k){if(s!==null){t=q;}else{s=p;t=q;}}else if(s!==null)break;p=q;}var v=m+l.length,w=s===m,x=t===v;if(!w&&x||w&&!x)if(n==='forward'){if(t!==v)t++;}else if(s!==m)s--;return {start:s,end:t};}};f.exports=h;}),null);
__d('getRangesForDraftEntity',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k){var l=[];j.findEntityRanges(function(m){return m.getEntity()===k;},function(m,n){l.push({start:m,end:n});});!!l.length||h(0);return l;}f.exports=i;}),null);
__d('getCharacterRemovalRange',['invariant','DraftEntitySegments','getRangesForDraftEntity'],(function a(b,c,d,e,f,g,h){'use strict';function i(k,l,m,n,o){var p=n.getStartOffset(),q=n.getEndOffset(),r=l.getEntityAt(p),s=m.getEntityAt(q-1);if(!r&&!s)return n;var t=n;if(r&&r===s){t=j(k,l,t,o,r,true,true);}else if(r&&s){var u=j(k,l,t,o,r,false,true),v=j(k,m,t,o,s,false,false);t=t.merge({anchorOffset:u.getAnchorOffset(),focusOffset:v.getFocusOffset(),isBackward:false});}else if(r){var w=j(k,l,t,o,r,false,true);t=t.merge({anchorOffset:w.getStartOffset(),isBackward:false});}else if(s){var x=j(k,m,t,o,s,false,false);t=t.merge({focusOffset:x.getEndOffset(),isBackward:false});}return t;}function j(k,l,m,n,o,p,q){var r=m.getStartOffset(),s=m.getEndOffset(),t=k.__get(o),u=t.getMutability(),v=q?r:s;if(u==='MUTABLE')return m;var w=c('getRangesForDraftEntity')(l,o).filter(function(z){return v<=z.end&&v>=z.start;});w.length==1||h(0);var x=w[0];if(u==='IMMUTABLE')return m.merge({anchorOffset:x.start,focusOffset:x.end,isBackward:false});if(!p)if(q){s=x.end;}else r=x.start;var y=c('DraftEntitySegments').getRemovalRange(r,s,l.getText().slice(x.start,x.end),x.start,n);return m.merge({anchorOffset:y.start,focusOffset:y.end,isBackward:false});}f.exports=i;}),null);
__d('generateRandomKey',[],(function a(b,c,d,e,f,g){'use strict';var h={},i=Math.pow(2,24);function j(){var k=void 0;while(k===undefined||Object.prototype.hasOwnProperty.call(h,k)||!isNaN(+k))k=Math.floor(Math.random()*i).toString(32);h[k]=true;return k;}f.exports=j;}),null);
__d('findRangesImmutable',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){if(!i.size)return;var m=0;i.reduce(function(n,o,p){if(!j(n,o)){if(k(n))l(m,p);m=p;}return o;});k(i.last())&&l(m,i.count());}f.exports=h;}),null);
__d('removeEntitiesAtEdges',['invariant','CharacterMetadata','findRangesImmutable'],(function a(b,c,d,e,f,g,h){'use strict';function i(l,m){var n=l.getBlockMap(),o=l.getEntityMap(),p={},q=m.getStartKey(),r=m.getStartOffset(),s=n.get(q),t=k(o,s,r);if(t!==s)p[q]=t;var u=m.getEndKey(),v=m.getEndOffset(),w=n.get(u);if(q===u)w=t;var x=k(o,w,v);if(x!==w)p[u]=x;if(!Object.keys(p).length)return l.set('selectionAfter',m);return l.merge({blockMap:n.merge(p),selectionAfter:m});}function j(l,m,n){var o;c('findRangesImmutable')(l,function(p,q){return p.getEntity()===q.getEntity();},function(p){return p.getEntity()===m;},function(p,q){if(p<=n&&q>=n)o={start:p,end:q};});typeof o==='object'||h(0);return o;}function k(l,m,n){var o=m.getCharacterList(),p=n>0?o.get(n-1):undefined,q=n<o.count()?o.get(n):undefined,r=p?p.getEntity():undefined,s=q?q.getEntity():undefined;if(s&&s===r){var t=l.__get(s);if(t.getMutability()!=='MUTABLE'){var u=j(o,s,n),v=u.start,w=u.end,x;while(v<w){x=o.get(v);o=o.set(v,c('CharacterMetadata').applyEntity(x,null));v++;}return m.set('characterList',o);}}return m;}f.exports=i;}),null);
__d('getContentStateFragment',['generateRandomKey','removeEntitiesAtEdges'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j.getStartKey(),l=j.getStartOffset(),m=j.getEndKey(),n=j.getEndOffset(),o=c('removeEntitiesAtEdges')(i,j),p=o.getBlockMap(),q=p.keySeq(),r=q.indexOf(k),s=q.indexOf(m)+1,t=p.slice(r,s).map(function(u,v){var w=c('generateRandomKey')(),x=u.getText(),y=u.getCharacterList();if(k===m)return u.merge({key:w,text:x.slice(l,n),characterList:y.slice(l,n)});if(v===k)return u.merge({key:w,text:x.slice(l),characterList:y.slice(l)});if(v===m)return u.merge({key:w,text:x.slice(0,n),characterList:y.slice(0,n)});return u.set('key',w);});return t.toOrderedMap();}f.exports=h;}),null);
__d('BlockMapBuilder',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedMap,i={createFromArray:function j(k){return h(k.map(function(l){return [l.getKey(),l];}));}};f.exports=i;}),null);
__d('insertIntoList',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){if(k===i.count()){j.forEach(function(n){i=i.push(n);});}else if(k===0){j.reverse().forEach(function(n){i=i.unshift(n);});}else{var l=i.slice(0,k),m=i.slice(k);i=l.concat(j,m).toList();}return i;}f.exports=h;}),null);
__d('insertFragmentIntoContentState',['invariant','BlockMapBuilder','generateRandomKey','insertIntoList'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k,l){k.isCollapsed()||h(0);var m=k.getStartKey(),n=k.getStartOffset(),o=j.getBlockMap(),p=l.size,q,r;if(p===1){var s=o.get(m),t=l.first(),u=s.getText(),v=s.getCharacterList(),w=s.merge({text:u.slice(0,n)+t.getText()+u.slice(n),characterList:c('insertIntoList')(v,t.getCharacterList(),n),data:t.getData()});o=o.set(m,w);q=m;r=n+t.getText().length;return j.merge({blockMap:o.set(m,w),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}var x=[];j.getBlockMap().forEach(function(y,z){if(z!==m){x.push(y);return;}var aa=y.getText(),ba=y.getCharacterList(),ca=aa.length,da=aa.slice(0,n),ea=ba.slice(0,n),fa=l.first(),ga=y.merge({text:da+fa.getText(),characterList:ea.concat(fa.getCharacterList()),type:da?y.getType():fa.getType(),data:fa.getData()});x.push(ga);l.slice(1,p-1).forEach(function(la){x.push(la.set('key',c('generateRandomKey')()));});var ha=aa.slice(n,ca),ia=ba.slice(n,ca),ja=l.last();q=c('generateRandomKey')();var ka=ja.merge({key:q,text:ja.getText()+ha,characterList:ja.getCharacterList().concat(ia),data:ja.getData()});x.push(ka);});r=l.last().getLength();return j.merge({blockMap:c('BlockMapBuilder').createFromArray(x),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}f.exports=i;}),null);
__d('insertTextIntoContentState',['invariant','immutable','insertIntoList'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Repeat;function j(k,l,m,n){l.isCollapsed()||h(0);var o=m.length;if(!o)return k;var p=k.getBlockMap(),q=l.getStartKey(),r=l.getStartOffset(),s=p.get(q),t=s.getText(),u=s.merge({text:t.slice(0,r)+m+t.slice(r,s.getLength()),characterList:c('insertIntoList')(s.getCharacterList(),i(n,o).toList(),r)}),v=r+o;return k.merge({blockMap:p.set(q,u),selectionAfter:l.merge({anchorOffset:v,focusOffset:v})});}f.exports=j;}),null);
__d('modifyBlockForContentState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map;function i(j,k,l){var m=k.getStartKey(),n=k.getEndKey(),o=j.getBlockMap(),p=o.toSeq().skipUntil(function(q,r){return r===m;}).takeUntil(function(q,r){return r===n;}).concat(h([[n,o.get(n)]])).map(l);return j.merge({blockMap:o.merge(p),selectionBefore:k,selectionAfter:k});}f.exports=i;}),null);
__d('removeRangeFromContentState',['immutable'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){if(k.isCollapsed())return j;var l=j.getBlockMap(),m=k.getStartKey(),n=k.getStartOffset(),o=k.getEndKey(),p=k.getEndOffset(),q=l.get(m),r=l.get(o),s;if(q===r){s=i(q.getCharacterList(),n,p);}else s=q.getCharacterList().slice(0,n).concat(r.getCharacterList().slice(p));var t=q.merge({text:q.getText().slice(0,n)+r.getText().slice(p),characterList:s}),u=l.toSeq().skipUntil(function(v,w){return w===m;}).takeUntil(function(v,w){return w===o;}).concat(c('immutable').Map([[o,null]])).map(function(v,w){return w===m?t:null;});l=l.merge(u).filter(function(v){return !!v;});return j.merge({blockMap:l,selectionBefore:k,selectionAfter:k.merge({anchorKey:m,anchorOffset:n,focusKey:m,focusOffset:n,isBackward:false})});}function i(j,k,l){if(k===0){while(k<l){j=j.shift();k++;}}else if(l===j.count()){while(l>k){j=j.pop();l--;}}else{var m=j.slice(0,k),n=j.slice(l);j=m.concat(n).toList();}return j;}f.exports=h;}),null);
__d('splitBlockInContentState',['invariant','immutable','generateRandomKey'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Map;function j(k,l){l.isCollapsed()||h(0);var m=l.getAnchorKey(),n=l.getAnchorOffset(),o=k.getBlockMap(),p=o.get(m),q=p.getText(),r=p.getCharacterList(),s=p.merge({text:q.slice(0,n),characterList:r.slice(0,n)}),t=c('generateRandomKey')(),u=s.merge({key:t,text:q.slice(n),characterList:r.slice(n),data:i()}),v=o.toSeq().takeUntil(function(y){return y===p;}),w=o.toSeq().skipUntil(function(y){return y===p;}).rest(),x=v.concat([[s.getKey(),s],[u.getKey(),u]],w).toOrderedMap();return k.merge({blockMap:x,selectionBefore:l,selectionAfter:l.merge({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:false})});}f.exports=j;}),null);
__d('DraftModifier',['invariant','CharacterMetadata','ContentStateInlineStyle','DraftFeatureFlags','immutable','applyEntityToContentState','getCharacterRemovalRange','getContentStateFragment','insertFragmentIntoContentState','insertTextIntoContentState','modifyBlockForContentState','removeEntitiesAtEdges','removeRangeFromContentState','splitBlockInContentState'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').OrderedSet,j={replaceText:function k(l,m,n,o,p){var q=c('removeEntitiesAtEdges')(l,m),r=c('removeRangeFromContentState')(q,m),s=c('CharacterMetadata').create({style:o||i(),entity:p||null});return c('insertTextIntoContentState')(r,r.getSelectionAfter(),n,s);},insertText:function k(l,m,n,o,p){m.isCollapsed()||h(0);return j.replaceText(l,m,n,o,p);},moveText:function k(l,m,n){var o=c('getContentStateFragment')(l,m),p=j.removeRange(l,m,'backward');return j.replaceWithFragment(p,n,o);},replaceWithFragment:function k(l,m,n){var o=c('removeEntitiesAtEdges')(l,m),p=c('removeRangeFromContentState')(o,m);return c('insertFragmentIntoContentState')(p,p.getSelectionAfter(),n);},removeRange:function k(l,m,n){var o=void 0,p=void 0,q=void 0,r=void 0;if(m.getIsBackward())m=m.merge({anchorKey:m.getFocusKey(),anchorOffset:m.getFocusOffset(),focusKey:m.getAnchorKey(),focusOffset:m.getAnchorOffset(),isBackward:false});o=m.getAnchorKey();p=m.getFocusKey();q=l.getBlockForKey(o);r=l.getBlockForKey(p);var s=m.getStartOffset(),t=m.getEndOffset(),u=q.getEntityAt(s),v=r.getEntityAt(t-1);if(o===p)if(u&&u===v){var w=c('getCharacterRemovalRange')(l.getEntityMap(),q,r,m,n);return c('removeRangeFromContentState')(l,w);}var x=m;if(c('DraftFeatureFlags').draft_segmented_entities_behavior)x=c('getCharacterRemovalRange')(l.getEntityMap(),q,r,m,n);var y=c('removeEntitiesAtEdges')(l,x);return c('removeRangeFromContentState')(y,x);},splitBlock:function k(l,m){var n=c('removeEntitiesAtEdges')(l,m),o=c('removeRangeFromContentState')(n,m);return c('splitBlockInContentState')(o,o.getSelectionAfter());},applyInlineStyle:function k(l,m,n){return c('ContentStateInlineStyle').add(l,m,n);},removeInlineStyle:function k(l,m,n){return c('ContentStateInlineStyle').remove(l,m,n);},setBlockType:function k(l,m,n){return c('modifyBlockForContentState')(l,m,function(o){return o.merge({type:n,depth:0});});},setBlockData:function k(l,m,n){return c('modifyBlockForContentState')(l,m,function(o){return o.merge({data:n});});},mergeBlockData:function k(l,m,n){return c('modifyBlockForContentState')(l,m,function(o){return o.merge({data:o.getData().merge(n)});});},applyEntity:function k(l,m,n){var o=c('removeEntitiesAtEdges')(l,m);return c('applyEntityToContentState')(o,m,n);}};f.exports=j;}),null);
__d('BlockTree',['immutable','emptyFunction','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i=c('immutable').Repeat,j=c('immutable').Record,k=c('emptyFunction').thatReturnsTrue,l='-',m={start:null,end:null},n=j(m),o={start:null,end:null,decoratorKey:null,leaves:null},p=j(o),q={generate:function t(u,v,w){var x=v.getLength();if(!x)return h.of(new p({start:0,end:0,decoratorKey:null,leaves:h.of(new n({start:0,end:0}))}));var y=[],z=w?w.getDecorations(v,u):h(i(null,x)),aa=v.getCharacterList();c('findRangesImmutable')(z,s,k,function(ba,ca){y.push(new p({start:ba,end:ca,decoratorKey:z.get(ba),leaves:r(aa.slice(ba,ca).toList(),ba)}));});return h(y);},getFingerprint:function t(u){return u.map(function(v){var w=v.get('decoratorKey'),x=w!==null?w+'.'+(v.get('end')-v.get('start')):'';return ''+x+'.'+v.get('leaves').size;}).join(l);}};function r(t,u){var v=[],w=t.map(function(x){return x.getStyle();}).toList();c('findRangesImmutable')(w,s,k,function(x,y){v.push(new n({start:x+u,end:y+u}));});return h(v);}function s(t,u){return t===u;}f.exports=q;}),null);
__d('ContentBlock',['immutable','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=c('immutable').Map,l=c('immutable').OrderedSet,m=c('immutable').Record,n=l(),o={key:'',type:'unstyled',text:'',characterList:j(),depth:0,data:k()},p=m(o);h=babelHelpers.inherits(q,p);i=h&&h.prototype;q.prototype.getKey=function(){return this.get('key');};q.prototype.getType=function(){return this.get('type');};q.prototype.getText=function(){return this.get('text');};q.prototype.getCharacterList=function(){return this.get('characterList');};q.prototype.getLength=function(){return this.getText().length;};q.prototype.getDepth=function(){return this.get('depth');};q.prototype.getData=function(){return this.get('data');};q.prototype.getInlineStyleAt=function(t){var u=this.getCharacterList().get(t);return u?u.getStyle():n;};q.prototype.getEntityAt=function(t){var u=this.getCharacterList().get(t);return u?u.getEntity():null;};q.prototype.findStyleRanges=function(t,u){c('findRangesImmutable')(this.getCharacterList(),r,t,u);};q.prototype.findEntityRanges=function(t,u){c('findRangesImmutable')(this.getCharacterList(),s,t,u);};function q(){h.apply(this,arguments);}function r(t,u){return t.getStyle()===u.getStyle();}function s(t,u){return t.getEntity()===u.getEntity();}f.exports=q;}),null);
__d('DraftEntityInstance',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=j({type:'TOKEN',mutability:'IMMUTABLE',data:Object});h=babelHelpers.inherits(l,k);i=h&&h.prototype;l.prototype.getType=function(){return this.get('type');};l.prototype.getMutability=function(){return this.get('mutability');};l.prototype.getData=function(){return this.get('data');};function l(){h.apply(this,arguments);}f.exports=l;}),null);
__d('DraftEntity',['invariant','DraftEntityInstance','immutable'],(function a(b,c,d,e,f,g,h){var i=c('immutable').Map,j=i(),k=0;function l(n,o){}var m={getLastCreatedEntityKey:function n(){l('DraftEntity.getLastCreatedEntityKey','contentState.getLastCreatedEntityKey');return m.__getLastCreatedEntityKey();},create:function n(o,p,q){l('DraftEntity.create','contentState.createEntity');return m.__create(o,p,q);},add:function n(o){l('DraftEntity.add','contentState.addEntity');return m.__add(o);},get:function n(o){l('DraftEntity.get','contentState.getEntity');return m.__get(o);},mergeData:function n(o,p){l('DraftEntity.mergeData','contentState.mergeEntityData');return m.__mergeData(o,p);},replaceData:function n(o,p){l('DraftEntity.replaceData','contentState.replaceEntityData');return m.__replaceData(o,p);},__getLastCreatedEntityKey:function n(){return ''+k;},__create:function n(o,p,q){return m.__add(new (c('DraftEntityInstance'))({type:o,mutability:p,data:q||{}}));},__add:function n(o){var p=''+ ++k;j=j.set(p,o);return p;},__get:function n(o){var p=j.get(o);!!p||h(0);return p;},__mergeData:function n(o,p){var q=m.__get(o),r=babelHelpers['extends']({},q.getData(),p),s=q.set('data',r);j=j.set(o,s);return s;},__replaceData:function n(o,p){var q=m.__get(o),r=q.set('data',p);j=j.set(o,r);return r;}};f.exports=m;}),null);
__d('SelectionState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={anchorKey:'',anchorOffset:0,focusKey:'',focusOffset:0,isBackward:false,hasFocus:false},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.prototype.serialize=function(){return 'Anchor: '+this.getAnchorKey()+':'+this.getAnchorOffset()+', '+'Focus: '+this.getFocusKey()+':'+this.getFocusOffset()+', '+'Is Backward: '+String(this.getIsBackward())+', '+'Has Focus: '+String(this.getHasFocus());};m.prototype.getAnchorKey=function(){return this.get('anchorKey');};m.prototype.getAnchorOffset=function(){return this.get('anchorOffset');};m.prototype.getFocusKey=function(){return this.get('focusKey');};m.prototype.getFocusOffset=function(){return this.get('focusOffset');};m.prototype.getIsBackward=function(){return this.get('isBackward');};m.prototype.getHasFocus=function(){return this.get('hasFocus');};m.prototype.hasEdgeWithin=function(n,o,p){var q=this.getAnchorKey(),r=this.getFocusKey();if(q===r&&q===n){var s=this.getStartOffset(),t=this.getEndOffset();return o<=t&&s<=p;}if(n!==q&&n!==r)return false;var u=n===q?this.getAnchorOffset():this.getFocusOffset();return o<=u&&p>=u;};m.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset();};m.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey();};m.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset();};m.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey();};m.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset();};m.createEmpty=function(n){return new m({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:false,hasFocus:false});};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('sanitizeDraftText',[],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('\r','g');function i(j){return j.replace(h,'');}f.exports=i;}),null);
__d('ContentState',['BlockMapBuilder','CharacterMetadata','ContentBlock','DraftEntity','immutable','SelectionState','generateRandomKey','sanitizeDraftText'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=c('immutable').Record,l=c('immutable').Repeat,m={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null},n=k(m);h=babelHelpers.inherits(o,n);i=h&&h.prototype;o.prototype.getEntityMap=function(){return c('DraftEntity');};o.prototype.getBlockMap=function(){return this.get('blockMap');};o.prototype.getSelectionBefore=function(){return this.get('selectionBefore');};o.prototype.getSelectionAfter=function(){return this.get('selectionAfter');};o.prototype.getBlockForKey=function(p){var q=this.getBlockMap().get(p);return q;};o.prototype.getKeyBefore=function(p){return this.getBlockMap().reverse().keySeq().skipUntil(function(q){return q===p;}).skip(1).first();};o.prototype.getKeyAfter=function(p){return this.getBlockMap().keySeq().skipUntil(function(q){return q===p;}).skip(1).first();};o.prototype.getBlockAfter=function(p){return this.getBlockMap().skipUntil(function(q,r){return r===p;}).skip(1).first();};o.prototype.getBlockBefore=function(p){return this.getBlockMap().reverse().skipUntil(function(q,r){return r===p;}).skip(1).first();};o.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray();};o.prototype.getFirstBlock=function(){return this.getBlockMap().first();};o.prototype.getLastBlock=function(){return this.getBlockMap().last();};o.prototype.getPlainText=function(p){return this.getBlockMap().map(function(q){return q?q.getText():'';}).join(p||'\n');};o.prototype.getLastCreatedEntityKey=function(){return c('DraftEntity').__getLastCreatedEntityKey();};o.prototype.hasText=function(){var p=this.getBlockMap();return p.size>1||p.first().getLength()>0;};o.prototype.createEntity=function(p,q,r){c('DraftEntity').__create(p,q,r);return this;};o.prototype.mergeEntityData=function(p,q){c('DraftEntity').__mergeData(p,q);return this;};o.prototype.replaceEntityData=function(p,q){c('DraftEntity').__replaceData(p,q);return this;};o.prototype.addEntity=function(p){c('DraftEntity').__add(p);return this;};o.prototype.getEntity=function(p){return c('DraftEntity').__get(p);};o.createFromBlockArray=function(p,q){var r=Array.isArray(p)?p:p.contentBlocks,s=c('BlockMapBuilder').createFromArray(r),t=s.isEmpty()?new (c('SelectionState'))():c('SelectionState').createEmpty(s.first().getKey());return new o({blockMap:s,entityMap:q||c('DraftEntity'),selectionBefore:t,selectionAfter:t});};o.createFromText=function(p){var q=arguments.length<=1||arguments[1]===undefined?/\r\n?|\n/g:arguments[1],r=p.split(q),s=r.map(function(t){t=c('sanitizeDraftText')(t);return new (c('ContentBlock'))({key:c('generateRandomKey')(),text:t,type:'unstyled',characterList:j(l(c('CharacterMetadata').EMPTY,t.length))});});return o.createFromBlockArray(s);};function o(){h.apply(this,arguments);}f.exports=o;}),null);
__d('UnicodeBidiService',['invariant','UnicodeBidi','UnicodeBidiDirection','UnicodeBidiGlobalDirection'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){if(!j){j=c('UnicodeBidiGlobalDirection').getDir();}else c('UnicodeBidiDirection').isStrong(j)||h(0);this.$UnicodeBidiService1=j;this.reset();}i.prototype.reset=function(){this.$UnicodeBidiService2=this.$UnicodeBidiService1;};i.prototype.getDirection=function(j){this.$UnicodeBidiService2=c('UnicodeBidi').getDirection(j,this.$UnicodeBidiService2);return this.$UnicodeBidiService2;};f.exports=i;}),null);
__d('EditorBidiService',['immutable','UnicodeBidiService','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedMap,i,j={getDirectionMap:function k(l,m){if(!i){i=new (c('UnicodeBidiService'))();}else i.reset();var n=l.getBlockMap(),o=n.valueSeq().map(function(q){return c('nullthrows')(i).getDirection(q.getText());}),p=h(n.keySeq().zip(o));if(m!=null&&c('immutable').is(m,p))return m;return p;}};f.exports=j;}),null);
__d('EditorState',['BlockTree','ContentState','EditorBidiService','immutable','SelectionState'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedSet,i=c('immutable').Record,j=c('immutable').Stack,k={allowUndo:true,currentContent:null,decorator:null,directionMap:null,forceSelection:false,inCompositionMode:false,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:j(),selection:null,treeMap:null,undoStack:j()},l=i(k);m.createEmpty=function(v){return m.createWithContent(c('ContentState').createFromText(''),v);};m.createWithContent=function(v,w){var x=v.getBlockMap().first().getKey();return m.create({currentContent:v,undoStack:j(),redoStack:j(),decorator:w||null,selection:c('SelectionState').createEmpty(x)});};m.create=function(v){var w=v.currentContent,x=v.decorator,y=babelHelpers['extends']({},v,{treeMap:o(w,x),directionMap:c('EditorBidiService').getDirectionMap(w)});return new m(new l(y));};m.set=function(v,w){var x=v.getImmutable().withMutations(function(y){var z=y.get('decorator'),aa=z;if(w.decorator===null){aa=null;}else if(w.decorator)aa=w.decorator;var ba=w.currentContent||v.getCurrentContent();if(aa!==z){var ca=y.get('treeMap'),da;if(aa&&z){da=q(ba,ba.getBlockMap(),ca,aa,z);}else da=o(ba,aa);y.merge({decorator:aa,treeMap:da,nativelyRenderedContent:null});return;}var ea=v.getCurrentContent();if(ba!==ea)y.set('treeMap',p(v,ba.getBlockMap(),ba.getEntityMap(),aa));y.merge(w);});return new m(x);};m.prototype.toJS=function(){return this.getImmutable().toJS();};m.prototype.getAllowUndo=function(){return this.getImmutable().get('allowUndo');};m.prototype.getCurrentContent=function(){return this.getImmutable().get('currentContent');};m.prototype.getUndoStack=function(){return this.getImmutable().get('undoStack');};m.prototype.getRedoStack=function(){return this.getImmutable().get('redoStack');};m.prototype.getSelection=function(){return this.getImmutable().get('selection');};m.prototype.getDecorator=function(){return this.getImmutable().get('decorator');};m.prototype.isInCompositionMode=function(){return this.getImmutable().get('inCompositionMode');};m.prototype.mustForceSelection=function(){return this.getImmutable().get('forceSelection');};m.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get('nativelyRenderedContent');};m.prototype.getLastChangeType=function(){return this.getImmutable().get('lastChangeType');};m.prototype.getInlineStyleOverride=function(){return this.getImmutable().get('inlineStyleOverride');};m.setInlineStyleOverride=function(v,w){return m.set(v,{inlineStyleOverride:w});};m.prototype.getCurrentInlineStyle=function(){var v=this.getInlineStyleOverride();if(v!=null)return v;var w=this.getCurrentContent(),x=this.getSelection();if(x.isCollapsed())return s(w,x);return t(w,x);};m.prototype.getBlockTree=function(v){return this.getImmutable().getIn(['treeMap',v]);};m.prototype.isSelectionAtStartOfContent=function(){var v=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(v,0,0);};m.prototype.isSelectionAtEndOfContent=function(){var v=this.getCurrentContent(),w=v.getBlockMap(),x=w.last(),y=x.getLength();return this.getSelection().hasEdgeWithin(x.getKey(),y,y);};m.prototype.getDirectionMap=function(){return this.getImmutable().get('directionMap');};m.acceptSelection=function(v,w){return n(v,w,false);};m.forceSelection=function(v,w){if(!w.getHasFocus())w=w.set('hasFocus',true);return n(v,w,true);};m.moveSelectionToEnd=function(v){var w=v.getCurrentContent(),x=w.getLastBlock(),y=x.getKey(),z=x.getLength();return m.acceptSelection(v,new (c('SelectionState'))({anchorKey:y,anchorOffset:z,focusKey:y,focusOffset:z,isBackward:false}));};m.moveFocusToEnd=function(v){var w=m.moveSelectionToEnd(v);return m.forceSelection(w,w.getSelection());};m.push=function(v,w,x){if(v.getCurrentContent()===w)return v;var y=x!=='insert-characters',z=c('EditorBidiService').getDirectionMap(w,v.getDirectionMap());if(!v.getAllowUndo())return m.set(v,{currentContent:w,directionMap:z,lastChangeType:x,selection:w.getSelectionAfter(),forceSelection:y,inlineStyleOverride:null});var aa=v.getSelection(),ba=v.getCurrentContent(),ca=v.getUndoStack(),da=w;if(aa!==ba.getSelectionAfter()||r(v,x)){ca=ca.push(ba);da=da.set('selectionBefore',aa);}else if(x==='insert-characters'||x==='backspace-character'||x==='delete-character')da=da.set('selectionBefore',ba.getSelectionBefore());var ea=v.getInlineStyleOverride(),fa=['adjust-depth','change-block-type','split-block'];if(fa.indexOf(x)===-1)ea=null;var ga={currentContent:da,directionMap:z,undoStack:ca,redoStack:j(),lastChangeType:x,selection:w.getSelectionAfter(),forceSelection:y,inlineStyleOverride:ea};return m.set(v,ga);};m.undo=function(v){if(!v.getAllowUndo())return v;var w=v.getUndoStack(),x=w.peek();if(!x)return v;var y=v.getCurrentContent(),z=c('EditorBidiService').getDirectionMap(x,v.getDirectionMap());return m.set(v,{currentContent:x,directionMap:z,undoStack:w.shift(),redoStack:v.getRedoStack().push(y),forceSelection:true,inlineStyleOverride:null,lastChangeType:'undo',nativelyRenderedContent:null,selection:y.getSelectionBefore()});};m.redo=function(v){if(!v.getAllowUndo())return v;var w=v.getRedoStack(),x=w.peek();if(!x)return v;var y=v.getCurrentContent(),z=c('EditorBidiService').getDirectionMap(x,v.getDirectionMap());return m.set(v,{currentContent:x,directionMap:z,undoStack:v.getUndoStack().push(y),redoStack:w.shift(),forceSelection:true,inlineStyleOverride:null,lastChangeType:'redo',nativelyRenderedContent:null,selection:x.getSelectionAfter()});};function m(v){this.$EditorState1=v;}m.prototype.getImmutable=function(){return this.$EditorState1;};function n(v,w,x){return m.set(v,{selection:w,forceSelection:x,nativelyRenderedContent:null,inlineStyleOverride:null});}function o(v,w){return v.getBlockMap().map(function(x){return c('BlockTree').generate(v,x,w);}).toOrderedMap();}function p(v,w,x,y){var z=v.getCurrentContent().set('entityMap',x),aa=z.getBlockMap(),ba=v.getImmutable().get('treeMap');return ba.merge(w.toSeq().filter(function(ca,da){return ca!==aa.get(da);}).map(function(ca){return c('BlockTree').generate(z,ca,y);}));}function q(v,w,x,y,z){return x.merge(w.toSeq().filter(function(aa){return y.getDecorations(aa,v)!==z.getDecorations(aa,v);}).map(function(aa){return c('BlockTree').generate(v,aa,y);}));}function r(v,w){var x=v.getLastChangeType();return w!==x||w!=='insert-characters'&&w!=='backspace-character'&&w!=='delete-character';}function s(v,w){var x=w.getStartKey(),y=w.getStartOffset(),z=v.getBlockForKey(x);if(y>0)return z.getInlineStyleAt(y-1);if(z.getLength())return z.getInlineStyleAt(0);return u(v,x);}function t(v,w){var x=w.getStartKey(),y=w.getStartOffset(),z=v.getBlockForKey(x);if(y<z.getLength())return z.getInlineStyleAt(y);if(y>0)return z.getInlineStyleAt(y-1);return u(v,x);}function u(v,w){var x=v.getBlockBefore(w),y;while(x){y=x.getLength();if(y)return x.getInlineStyleAt(y-1);x=v.getBlockBefore(x.getKey());}return h();}f.exports=m;}),null);
__d('getEntityKeyForSelection',[],(function a(b,c,d,e,f,g){'use strict';function h(j,k){var l;if(k.isCollapsed()){var m=k.getAnchorKey(),n=k.getAnchorOffset();if(n>0){l=j.getBlockForKey(m).getEntityAt(n-1);return i(j.getEntityMap(),l);}return null;}var o=k.getStartKey(),p=k.getStartOffset(),q=j.getBlockForKey(o);l=p===q.getLength()?null:q.getEntityAt(p);return i(j.getEntityMap(),l);}function i(j,k){if(k){var l=j.__get(k);return l.getMutability()==='MUTABLE'?k:null;}return null;}f.exports=h;}),null);
__d('isSelectionAtLeafStart',[],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection(),k=j.getAnchorKey(),l=i.getBlockTree(k),m=j.getStartOffset(),n=false;l.some(function(o){if(m===o.get('start')){n=true;return true;}if(m<o.get('end'))return o.get('leaves').some(function(p){var q=p.get('start');if(m===q){n=true;return true;}return false;});return false;});return n;}f.exports=h;}),null);
__d('DraftEditorCompositionHandler',['DraftModifier','EditorState','Keys','getEntityKeyForSelection','isSelectionAtLeafStart'],(function a(b,c,d,e,f,g){'use strict';var h=20,i=false,j=false,k='',l={onBeforeInput:function m(n,o){k=(k||'')+o.data;},onCompositionStart:function m(n){j=true;},onCompositionEnd:function m(n){i=false;j=false;setTimeout(function(){if(!i)l.resolveComposition(n);},h);},onKeyDown:function m(n,o){if(!j){l.resolveComposition(n);n._onKeyDown(o);return;}if(o.which===c('Keys').RIGHT||o.which===c('Keys').LEFT)o.preventDefault();},onKeyPress:function m(n,o){if(o.which===c('Keys').RETURN)o.preventDefault();},resolveComposition:function m(n){if(j)return;i=true;var o=k;k='';var p=c('EditorState').set(n._latestEditorState,{inCompositionMode:false}),q=p.getCurrentInlineStyle(),r=c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection()),s=!o||c('isSelectionAtLeafStart')(p)||q.size>0||r!==null;if(s)n.restoreEditorDOM();n.exitCurrentMode();if(o){var t=c('DraftModifier').replaceText(p.getCurrentContent(),p.getSelection(),o,q,r);n.update(c('EditorState').push(p,t,'insert-characters'));return;}if(s)n.update(c('EditorState').set(p,{nativelyRenderedContent:null,forceSelection:true}));}};f.exports=l;}),null);
__d('DraftEditorTextNode.react',['invariant','React','ReactDOM','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('UserAgent').isBrowser('IE <= 11');function l(p){return k?p.textContent==='\n':p.tagName==='BR';}var m=k?c('React').createElement('span',{key:'A','data-text':'true'},'\n'):c('React').createElement('br',{key:'A','data-text':'true'}),n=k?c('React').createElement('span',{key:'B','data-text':'true'},'\n'):c('React').createElement('br',{key:'B','data-text':'true'});i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.$DraftEditorTextNode1=false;}o.prototype.shouldComponentUpdate=function(p){var q=c('ReactDOM').findDOMNode(this),r=p.children==='';q instanceof Element||h(0);if(r)return !l(q);return q.textContent!==p.children;};o.prototype.componentWillUpdate=function(){this.$DraftEditorTextNode1=!this.$DraftEditorTextNode1;};o.prototype.render=function(){if(this.props.children==='')return this.$DraftEditorTextNode1?m:n;return c('React').createElement('span',{key:this.$DraftEditorTextNode1?'A':'B','data-text':'true'},this.props.children);};f.exports=o;}),null);
__d('DraftJsDebugLogging',['CurrentUser','DraftJsEventsTypedLogger','ScriptPath'],(function a(b,c,d,e,f,g){'use strict';f.exports={logSelectionStateFailure:function h(i){var j=i.anonymizedDom,k=i.extraParams,l=i.selectionState;if(c('CurrentUser').isEmployee())new (c('DraftJsEventsTypedLogger'))().setEvent('selection_state_failure').setAnonymizedDom(j).setExtraParams(k).setScriptPath(c('ScriptPath').getScriptPath()).setSelectionState(l).log();}};}),null);
__d('setDraftEditorSelection',['invariant','DraftJsDebugLogging','containsNode','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';function i(p){if(!p)return '[empty]';var q=j(p);if(q.nodeType===Node.TEXT_NODE)return q.textContent;q instanceof Element||h(0);return q.innerHTML;}function j(p){if(p.nodeType===Node.TEXT_NODE){var q=p.textContent.length;return document.createTextNode('[text '+q+']');}var r=p.cloneNode(),s=p.childNodes;for(var t=0;t<s.length;t++)r.appendChild(j(s[t]));return r;}function k(p){var q=p;while(q)if(q instanceof Element&&q.hasAttribute('contenteditable')){return i(q);}else q=q.parentNode;return 'Could not find contentEditable parent of node';}function l(p){return p.nodeValue===null?p.childNodes.length:p.nodeValue.length;}function m(p,q,r,s,t){if(!c('containsNode')(document.documentElement,q))return;var u=b.getSelection(),v=p.getAnchorKey(),w=p.getAnchorOffset(),x=p.getFocusKey(),y=p.getFocusOffset(),z=p.getIsBackward();if(!u.extend&&z){var aa=v,ba=w;v=x;w=y;x=aa;y=ba;z=false;}var ca=v===r&&s<=w&&t>=w,da=x===r&&s<=y&&t>=y;if(ca&&da){u.removeAllRanges();o(u,q,w-s,p);n(u,q,y-s,p);return;}if(!z){if(ca){u.removeAllRanges();o(u,q,w-s,p);}if(da)n(u,q,y-s,p);}else{if(da){u.removeAllRanges();o(u,q,y-s,p);}if(ca){var ea=u.focusNode,fa=u.focusOffset;u.removeAllRanges();o(u,q,w-s,p);n(u,ea,fa,p);}}}function n(p,q,r,s){if(p.extend&&c('containsNode')(c('getActiveElement')(),q)){if(r>l(q))c('DraftJsDebugLogging').logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});try{p.extend(q,r);}catch(u){c('DraftJsDebugLogging').logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});throw u;}}else{var t=p.getRangeAt(0);t.setEnd(q,r);p.addRange(t.cloneRange());}}function o(p,q,r,s){var t=document.createRange();if(r>l(q))c('DraftJsDebugLogging').logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});t.setStart(q,r);p.addRange(t);}f.exports=m;}),null);
__d('DraftEditorLeaf.react',['invariant','ContentBlock','DraftEditorTextNode.react','React','ReactDOM','setDraftEditorSelection'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.$DraftEditorLeaf1=function(){var l=this.props.selection;if(l==null||!l.getHasFocus())return;var m=this.props,n=m.block,o=m.start,p=m.text,q=n.getKey(),r=o+p.length;if(!l.hasEdgeWithin(q,o,r))return;var s=c('ReactDOM').findDOMNode(this);s||h(0);var t=s.firstChild;t||h(0);var u=void 0;if(t.nodeType===Node.TEXT_NODE){u=t;}else if(t.tagName==='BR'){u=s;}else{u=t.firstChild;u||h(0);}c('setDraftEditorSelection')(l,u,q,o,r);};k.prototype.shouldComponentUpdate=function(l){var m=c('ReactDOM').findDOMNode(this.refs.leaf);m||h(0);return m.textContent!==l.text||l.styleSet!==this.props.styleSet||l.forceSelection;};k.prototype.componentDidUpdate=function(){this.$DraftEditorLeaf1();};k.prototype.componentDidMount=function(){this.$DraftEditorLeaf1();};k.prototype.render=function(){var l=this.props.block,m=this.props.text;if(m.endsWith('\n')&&this.props.isLast)m+='\n';var n=this.props,o=n.customStyleMap,p=n.customStyleFn,q=n.offsetKey,r=n.styleSet,s=r.reduce(function(u,v){var w={},x=o[v];if(x!==undefined&&u.textDecoration!==x.textDecoration)w.textDecoration=[u.textDecoration,x.textDecoration].join(' ').trim();return Object.assign(u,x,w);},{});if(p){var t=p(r,l);s=Object.assign(s,t);}return c('React').createElement('span',{'data-offset-key':q,ref:'leaf',style:s},c('React').createElement(c('DraftEditorTextNode.react'),null,m));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('DraftOffsetKey',[],(function a(b,c,d,e,f,g){'use strict';var h='-',i={encode:function j(k,l,m){return k+h+l+h+m;},decode:function j(k){var l=k.split(h),m=l[0],n=l[1],o=l[2];return {blockKey:m,decoratorKey:parseInt(n,10),leafKey:parseInt(o,10)};}};f.exports=i;}),null);
__d('getScrollPosition',['getDocumentScrollElement','getUnboundedScrollPosition'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('getDocumentScrollElement')(i.ownerDocument||i.document);if(i.Window&&i instanceof i.Window)i=j;var k=c('getUnboundedScrollPosition')(i),l=i===j?i.ownerDocument.documentElement:i,m=i.scrollWidth-l.clientWidth,n=i.scrollHeight-l.clientHeight;k.x=Math.max(0,Math.min(k.x,m));k.y=Math.max(0,Math.min(k.y,n));return k;}f.exports=h;}),null);
__d('DraftEditorBlock.react',['cx','invariant','DraftEditorLeaf.react','DraftOffsetKey','React','ReactDOM','Scroll','Style','UnicodeBidi','UnicodeBidiDirection','getElementPosition','getScrollPosition','getViewportDimensions','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=10;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.shouldComponentUpdate=function(o){return this.props.block!==o.block||this.props.tree!==o.tree||this.props.direction!==o.direction||n(o.selection,o.block.getKey())&&o.forceSelection;};m.prototype.componentDidMount=function(){var o=this.props.selection,p=o.getEndKey();if(!o.getHasFocus()||p!==this.props.block.getKey())return;var q=c('ReactDOM').findDOMNode(this),r=c('Style').getScrollParent(q),s=c('getScrollPosition')(r),t;if(r===window){var u=c('getElementPosition')(q),v=u.y+u.height,w=c('getViewportDimensions')().height;t=v-w;if(t>0)window.scrollTo(s.x,s.y+t+l);}else{q instanceof HTMLElement||i(0);var x=q.offsetHeight+q.offsetTop,y=r.offsetHeight+s.y;t=x-y;if(t>0)c('Scroll').setTop(r,c('Scroll').getTop(r)+t+l);}};m.prototype.$DraftEditorBlock1=function(){var o=this.props.block,p=o.getKey(),q=o.getText(),r=this.props.tree.size-1,s=n(this.props.selection,p);return this.props.tree.map(function(t,u){var v=t.get('leaves'),w=v.size-1,x=v.map(function(fa,ga){var ha=c('DraftOffsetKey').encode(p,u,ga),ia=fa.get('start'),ja=fa.get('end');return c('React').createElement(c('DraftEditorLeaf.react'),{key:ha,offsetKey:ha,block:o,start:ia,selection:s?this.props.selection:undefined,forceSelection:this.props.forceSelection,text:q.slice(ia,ja),styleSet:o.getInlineStyleAt(ia),customStyleMap:this.props.customStyleMap,customStyleFn:this.props.customStyleFn,isLast:u===r&&ga===w});}.bind(this)).toArray(),y=t.get('decoratorKey');if(y==null)return x;if(!this.props.decorator)return x;var z=c('nullthrows')(this.props.decorator),aa=z.getComponentForKey(y);if(!aa)return x;var ba=z.getPropsForKey(y),ca=c('DraftOffsetKey').encode(p,u,0),da=q.slice(v.first().get('start'),v.last().get('end')),ea=c('UnicodeBidiDirection').getHTMLDirIfDifferent(c('UnicodeBidi').getDirection(da),this.props.direction);return c('React').createElement(aa,babelHelpers['extends']({},ba,{contentState:this.props.contentState,decoratedText:da,dir:ea,key:ca,entityKey:o.getEntityAt(t.get('start')),offsetKey:ca}),x);}.bind(this)).toArray();};m.prototype.render=function(){var o=this.props,p=o.direction,q=o.offsetKey,r="_1mf"+(p==='LTR'?' '+"_1mj":'')+(p==='RTL'?' '+"_1mk":'');return c('React').createElement('div',{'data-offset-key':q,className:r},this.$DraftEditorBlock1());};function m(){j.apply(this,arguments);}function n(o,p){return o.getAnchorKey()===p||o.getFocusKey()===p;}f.exports=m;}),null);
__d('DraftEditorContents.react',['cx','DraftEditorBlock.react','DraftOffsetKey','EditorState','React','joinClasses','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(m){var n=this.props.editorState,o=m.editorState,p=n.getDirectionMap(),q=o.getDirectionMap();if(p!==q)return true;var r=n.getSelection().getHasFocus(),s=o.getSelection().getHasFocus();if(r!==s)return true;var t=o.getNativelyRenderedContent(),u=n.isInCompositionMode(),v=o.isInCompositionMode();if(n===o||t!==null&&o.getCurrentContent()===t||u&&v)return false;var w=n.getCurrentContent(),x=o.getCurrentContent(),y=n.getDecorator(),z=o.getDecorator();return u!==v||w!==x||y!==z||o.mustForceSelection();};k.prototype.render=function(){var m=this.props,n=m.blockRenderMap,o=m.blockRendererFn,p=m.customStyleMap,q=m.customStyleFn,r=m.editorState,s=r.getCurrentContent(),t=r.getSelection(),u=r.mustForceSelection(),v=r.getDecorator(),w=c('nullthrows')(r.getDirectionMap()),x=s.getBlocksAsArray(),y=[],z=null,aa=null;for(var ba=0;ba<x.length;ba++){var ca=x[ba],da=ca.getKey(),ea=ca.getType(),fa=o(ca),ga=void 0,ha=void 0,ia=void 0;if(fa){ga=fa.component;ha=fa.props;ia=fa.editable;}var ja=this.props.textDirectionality,ka=ja?ja:w.get(da),la=c('DraftOffsetKey').encode(da,0,0),ma={contentState:s,block:ca,blockProps:ha,customStyleMap:p,customStyleFn:q,decorator:v,direction:ka,forceSelection:u,key:da,offsetKey:la,selection:t,tree:r.getBlockTree(da)},na=n.get(ea),oa=na.wrapper,pa=na.element||n.get('unstyled').element,qa=ca.getDepth(),ra=this.props.blockStyleFn(ca);if(pa==='li'){var sa=aa!==oa||z===null||qa>z;ra=c('joinClasses')(ra,l(ea,qa,sa,ka));}var ta=ga||c('DraftEditorBlock.react'),ua={className:ra,'data-block':true,'data-editor':this.props.editorKey,'data-offset-key':la,key:da};if(ia!==undefined)ua=babelHelpers['extends']({},ua,{contentEditable:ia,suppressContentEditableWarning:true});var va=c('React').createElement(pa,ua,c('React').createElement(ta,ma));y.push({block:va,wrapperTemplate:oa,key:da,offsetKey:la});if(oa){z=ca.getDepth();}else z=null;aa=oa;}var wa=[];for(var xa=0;xa<y.length;){var ya=y[xa];if(ya.wrapperTemplate){var za=[];do{za.push(y[xa].block);xa++;}while(xa<y.length&&y[xa].wrapperTemplate===ya.wrapperTemplate);var ab=c('React').cloneElement(ya.wrapperTemplate,{key:ya.key+'-wrap','data-offset-key':ya.offsetKey},za);wa.push(ab);}else{wa.push(ya.block);xa++;}}return c('React').createElement('div',{'data-contents':'true'},wa);};function k(){i.apply(this,arguments);}function l(m,n,o,p){return (m==='unordered-list-item'?"_3kpz":'')+(m==='ordered-list-item'?' '+"_3kp_":'')+(o?' '+"_3kq0":'')+(n===0?' '+"_3kq1":'')+(n===1?' '+"_3kq2":'')+(n===2?' '+"_3kq3":'')+(n===3?' '+"_3kq4":'')+(n===4?' '+"_3kq5":'')+(p==='LTR'?' '+"_3kq6":'')+(p==='RTL'?' '+"_3kq7":'');}f.exports=k;}),null);
__d('getSelectionOffsetKeyForNode',[],(function a(b,c,d,e,f,g){'use strict';function h(i){if(i instanceof Element){var j=i.getAttribute('data-offset-key');if(j)return j;for(var k=0;k<i.childNodes.length;k++){var l=h(i.childNodes[k]);if(l)return l;}}return null;}f.exports=h;}),null);
__d('findAncestorOffsetKey',['getSelectionOffsetKeyForNode'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i;while(j&&j!==document.documentElement){var k=c('getSelectionOffsetKeyForNode')(j);if(k!=null)return k;j=j.parentNode;}return null;}f.exports=h;}),null);
__d('getTextContentFromFiles',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';var i=/\.textClipping$/,j={'text/plain':true,'text/html':true,'text/rtf':true},k=5000;function l(n,o){var p=0,q=[];n.forEach(function(r){m(r,function(s){p++;s&&q.push(s.slice(0,k));if(p==n.length)o(q.join('\r'));});});}function m(n,o){if(!b.FileReader||n.type&&!(n.type in j)){o('');return;}if(n.type===''){var p='';if(i.test(n.name))p=n.name.replace(i,'');o(p);return;}var q=new FileReader();q.onload=function(){var r=q.result;typeof r==='string'||h(0);o(r);};q.onerror=function(){o('');};q.readAsText(n);}f.exports=l;}),null);
__d('getUpdatedSelectionState',['DraftOffsetKey','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){var n=c('nullthrows')(i.getSelection()),o=c('DraftOffsetKey').decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=c('DraftOffsetKey').decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x;if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}f.exports=h;}),null);
__d('isEventHandled',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return i==='handled'||i===true;}f.exports=h;}),null);
__d('DraftEditorDragHandler',['DataTransfer','DraftModifier','EditorState','findAncestorOffsetKey','getTextContentFromFiles','getUpdatedSelectionState','isEventHandled','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(event,l){var m=null,n=null;if(typeof document.caretRangeFromPoint==='function'){var o=document.caretRangeFromPoint(event.x,event.y);m=o.startContainer;n=o.startOffset;}else if(event.rangeParent){m=event.rangeParent;n=event.rangeOffset;}else return null;m=c('nullthrows')(m);n=c('nullthrows')(n);var p=c('nullthrows')(c('findAncestorOffsetKey')(m));return c('getUpdatedSelectionState')(l,p,n,p,n);}var i={onDragEnd:function l(m){m.exitCurrentMode();},onDrop:function l(m,n){var o=new (c('DataTransfer'))(n.nativeEvent.dataTransfer),p=m._latestEditorState,q=h(n.nativeEvent,p);n.preventDefault();m.exitCurrentMode();if(q==null)return;var r=o.getFiles();if(r.length>0){if(m.props.handleDroppedFiles&&c('isEventHandled')(m.props.handleDroppedFiles(q,r)))return;c('getTextContentFromFiles')(r,function(t){t&&m.update(k(p,q,t));});return;}var s=m._internalDrag?'internal':'external';if(m.props.handleDrop&&c('isEventHandled')(m.props.handleDrop(q,o,s)))return;if(m._internalDrag){m.update(j(p,q));return;}m.update(k(p,q,o.getText()));}};function j(l,m){var n=c('DraftModifier').moveText(l.getCurrentContent(),l.getSelection(),m);return c('EditorState').push(l,n,'insert-fragment');}function k(l,m,n){var o=c('DraftModifier').insertText(l.getCurrentContent(),m,n,l.getCurrentInlineStyle());return c('EditorState').push(l,o,'insert-fragment');}f.exports=i;}),null);
__d('editOnBeforeInput',['BlockTree','DraftModifier','EditorState','UserAgent','getEntityKeyForSelection','isEventHandled','isSelectionAtLeafStart','nullthrows','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h='\'',i='\/',j=c('UserAgent').isBrowser('Firefox');function k(n){return j&&(n==h||n==i);}function l(n,o,p,q){var r=c('DraftModifier').replaceText(n.getCurrentContent(),n.getSelection(),o,p,q);return c('EditorState').push(n,r,'insert-characters');}function m(n,o){if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined;}var p=n._latestEditorState,q=o.data;if(!q)return;if(n.props.handleBeforeInput&&c('isEventHandled')(n.props.handleBeforeInput(q,p))){o.preventDefault();return;}var r=p.getSelection(),s=r.getAnchorKey();if(!r.isCollapsed()){o.preventDefault();n.update(l(p,q,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection())));return;}var t=l(p,q,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection())),u=false;if(!u)u=c('isSelectionAtLeafStart')(n._latestCommittedEditorState);if(!u){var v=b.getSelection();if(v.anchorNode!==null&&v.anchorNode.nodeType===Node.TEXT_NODE){var w=v.anchorNode.parentNode;u=w.nodeName==='SPAN'&&w.firstChild.nodeType===Node.TEXT_NODE&&w.firstChild.nodeValue.indexOf('\t')!==-1;}}if(!u){var x=c('BlockTree').getFingerprint(p.getBlockTree(s)),y=c('BlockTree').getFingerprint(t.getBlockTree(s));u=x!==y;}if(!u)u=k(q);if(!u)u=c('nullthrows')(t.getDirectionMap()).get(s)!==c('nullthrows')(p.getDirectionMap()).get(s);if(u){o.preventDefault();n.update(t);return;}t=c('EditorState').set(t,{nativelyRenderedContent:t.getCurrentContent()});n._pendingStateFromBeforeInput=t;c('setImmediate')(function(){if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined;}});}f.exports=m;}),null);
__d('editOnBlur',['EditorState','containsNode','getActiveElement'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){if(c('getActiveElement')()===document.body){var k=b.getSelection(),l=i.refs.editor;if(k.rangeCount===1&&c('containsNode')(l,k.anchorNode)&&c('containsNode')(l,k.focusNode))k.removeAllRanges();}var m=i._latestEditorState,n=m.getSelection();if(!n.getHasFocus())return;var o=n.set('hasFocus',false);i.props.onBlur&&i.props.onBlur(j);i.update(c('EditorState').acceptSelection(m,o));}f.exports=h;}),null);
__d('editOnCompositionStart',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){i.setMode('composite');i.update(c('EditorState').set(i._latestEditorState,{inCompositionMode:true}));i._onCompositionStart(j);}f.exports=h;}),null);
__d('getFragmentFromSelection',['getContentStateFragment'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection();if(j.isCollapsed())return null;return c('getContentStateFragment')(i.getCurrentContent(),j);}f.exports=h;}),null);
__d('editOnCopy',['getFragmentFromSelection'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.isCollapsed()){j.preventDefault();return;}i.setClipboard(c('getFragmentFromSelection')(i._latestEditorState));}f.exports=h;}),null);
__d('editOnCut',['DraftModifier','EditorState','Style','getFragmentFromSelection','getScrollPosition'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){var l=j._latestEditorState,m=l.getSelection();if(m.isCollapsed()){k.preventDefault();return;}var n=c('Style').getScrollParent(k.target),o=c('getScrollPosition')(n),p=o.x,q=o.y,r=c('getFragmentFromSelection')(l);j.setClipboard(r);j.setMode('cut');setTimeout(function(){j.restoreEditorDOM({x:p,y:q});j.exitCurrentMode();j.update(i(l));},0);}function i(j){var k=c('DraftModifier').removeRange(j.getCurrentContent(),j.getSelection(),'forward');return c('EditorState').push(j,k,'remove-range');}f.exports=h;}),null);
__d('editOnDragOver',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){i._internalDrag=false;i.setMode('drag');j.preventDefault();}f.exports=h;}),null);
__d('editOnDragStart',[],(function a(b,c,d,e,f,g){'use strict';function h(i){i._internalDrag=true;i.setMode('drag');}f.exports=h;}),null);
__d('editOnFocus',['DraftFeatureFlags','EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.getHasFocus())return;var m=l.set('hasFocus',true);i.props.onFocus&&i.props.onFocus(j);if(c('DraftFeatureFlags').draft_accept_selection_after_refocus){i.update(c('EditorState').acceptSelection(k,m));}else i.update(c('EditorState').forceSelection(k,m));}f.exports=h;}),null);
__d('editOnInput',['DraftFeatureFlags','DraftModifier','DraftOffsetKey','EditorState','UserAgent','findAncestorOffsetKey','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isEngine('Gecko'),i='\n\n';function j(k){if(k._pendingStateFromBeforeInput!==undefined){k.update(k._pendingStateFromBeforeInput);k._pendingStateFromBeforeInput=undefined;}var l=b.getSelection(),m=l.anchorNode,n=l.isCollapsed,o=m.nodeType!==Node.TEXT_NODE,p=m.nodeType!==Node.TEXT_NODE&&m.nodeType!==Node.ELEMENT_NODE;if(c('DraftFeatureFlags').draft_killswitch_allow_nontextnodes){if(o)return;}else if(p)return;if(m.nodeType===Node.TEXT_NODE&&(m.previousSibling!==null||m.nextSibling!==null)){var q=m.parentNode;m.nodeValue=q.textContent;for(var r=q.firstChild;r!==null;r=r.nextSibling)if(r!==m)q.removeChild(r);}var s=m.textContent,t=k._latestEditorState,u=c('nullthrows')(c('findAncestorOffsetKey')(m)),v=c('DraftOffsetKey').decode(u),w=v.blockKey,x=v.decoratorKey,y=v.leafKey,z=t.getBlockTree(w).getIn([x,'leaves',y]),aa=z.start,ba=z.end,ca=t.getCurrentContent(),da=ca.getBlockForKey(w),ea=da.getText().slice(aa,ba);if(s.endsWith(i))s=s.slice(0,-1);if(s===ea)return;var fa=t.getSelection(),ga=fa.merge({anchorOffset:aa,focusOffset:ba,isBackward:false}),ha=da.getEntityAt(aa),ia=ha&&ca.getEntity(ha),ja=ia&&ia.getMutability(),ka=ja==='MUTABLE',la=ka?'spellcheck-change':'apply-entity',ma=c('DraftModifier').replaceText(ca,ga,s,da.getInlineStyleAt(aa),ka?da.getEntityAt(aa):null),na,oa,pa,qa;if(h){na=l.anchorOffset;oa=l.focusOffset;pa=aa+Math.min(na,oa);qa=pa+Math.abs(na-oa);na=pa;oa=qa;}else{var ra=s.length-ea.length;pa=fa.getStartOffset();qa=fa.getEndOffset();na=n?qa+ra:pa;oa=qa+ra;}var sa=ma.merge({selectionBefore:ca.getSelectionAfter(),selectionAfter:fa.merge({anchorOffset:na,focusOffset:oa})});k.update(c('EditorState').push(t,sa,la));}f.exports=j;}),null);
__d('KeyBindingUtil',['UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isPlatform('Mac OS X'),i={isCtrlKeyCommand:function j(k){return !!k.ctrlKey&&!k.altKey;},isOptionKeyCommand:function j(k){return h&&k.altKey;},hasCommandModifier:function j(k){return h?!!k.metaKey&&!k.altKey:i.isCtrlKeyCommand(k);}};f.exports=i;}),null);
__d('SecondaryClipboard',['DraftModifier','EditorState','getContentStateFragment','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h=null,i={cut:function j(k){var l=k.getCurrentContent(),m=k.getSelection(),n=null;if(m.isCollapsed()){var o=m.getAnchorKey(),p=l.getBlockForKey(o).getLength();if(p===m.getAnchorOffset())return k;n=m.set('focusOffset',p);}else n=m;n=c('nullthrows')(n);h=c('getContentStateFragment')(l,n);var q=c('DraftModifier').removeRange(l,n,'forward');if(q===l)return k;return c('EditorState').push(k,q,'remove-range');},paste:function j(k){if(!h)return k;var l=c('DraftModifier').replaceWithFragment(k.getCurrentContent(),k.getSelection(),h);return c('EditorState').push(k,l,'insert-fragment');}};f.exports=i;}),null);
__d('getRangeClientRects',['invariant','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UserAgent').isBrowser('Chrome');function j(l){var m=l.cloneRange(),n=[];for(var o=l.endContainer;o!=null;o=o.parentNode){var p=o===l.commonAncestorContainer;if(p){m.setStart(l.startContainer,l.startOffset);}else m.setStart(m.endContainer,0);var q=Array.from(m.getClientRects());n.push(q);if(p){var r;n.reverse();return (r=[]).concat.apply(r,n);}m.setEndBefore(o);}h(0);}var k=i?j:function(l){return Array.from(l.getClientRects());};f.exports=k;}),null);
__d('expandRangeToStartOfLine',['invariant','UnicodeUtils','getRangeClientRects'],(function a(b,c,d,e,f,g,h){function i(m){var n=getComputedStyle(m),o=document.createElement('div');o.style.fontFamily=n.fontFamily;o.style.fontSize=n.fontSize;o.style.fontStyle=n.fontStyle;o.style.fontWeight=n.fontWeight;o.style.lineHeight=n.lineHeight;o.style.position='absolute';o.textContent='M';var p=document.body;p||h(0);p.appendChild(o);var q=o.getBoundingClientRect();p.removeChild(o);return q.height;}function j(m,n){var o=Infinity,p=Infinity,q=-Infinity,r=-Infinity;for(var s=0;s<m.length;s++){var t=m[s];if(t.width===0||t.width===1)continue;o=Math.min(o,t.top);p=Math.min(p,t.bottom);q=Math.max(q,t.top);r=Math.max(r,t.bottom);}return q<=p&&q-o<n&&r-p<n;}function k(m){switch(m.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return m.length;default:return m.childNodes.length;}}function l(m){m.collapsed||h(0);m=m.cloneRange();var n=m.startContainer;if(n.nodeType!==1)n=n.parentNode;var o=i(n),p=m.endContainer,q=m.endOffset;m.setStart(m.startContainer,0);while(j(c('getRangeClientRects')(m),o)){p=m.startContainer;q=m.startOffset;p.parentNode||h(0);m.setStartBefore(p);if(p.nodeType===1&&getComputedStyle(p).display!=='inline')break;}var r=p,s=q-1;do{var t=r.nodeValue;for(var u=s;u>=0;u--){if(t!=null&&u>0&&c('UnicodeUtils').isSurrogatePair(t,u-1))continue;m.setStart(r,u);if(j(c('getRangeClientRects')(m),o)){p=r;q=u;}else break;}if(u===-1||r.childNodes.length===0)break;r=r.childNodes[u];s=k(r);}while(true);m.setStart(p,q);return m;}f.exports=l;}),null);
__d('getDraftEditorSelectionWithNodes',['invariant','findAncestorOffsetKey','getSelectionOffsetKeyForNode','getUpdatedSelectionState','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';function i(n,o,p,q,r,s){var t=p.nodeType===Node.TEXT_NODE,u=r.nodeType===Node.TEXT_NODE;if(t&&u)return {selectionState:c('getUpdatedSelectionState')(n,c('nullthrows')(c('findAncestorOffsetKey')(p)),q,c('nullthrows')(c('findAncestorOffsetKey')(r)),s),needsRecovery:false};var v=null,w=null,x=true;if(t){v={key:c('nullthrows')(c('findAncestorOffsetKey')(p)),offset:q};w=l(o,r,s);}else if(u){w={key:c('nullthrows')(c('findAncestorOffsetKey')(r)),offset:s};v=l(o,p,q);}else{v=l(o,p,q);w=l(o,r,s);if(p===r&&q===s)x=!!p.firstChild&&p.firstChild.nodeName!=='BR';}return {selectionState:c('getUpdatedSelectionState')(n,v.key,v.offset,w.key,w.offset),needsRecovery:x};}function j(n){while(n.firstChild&&c('getSelectionOffsetKeyForNode')(n.firstChild))n=n.firstChild;return n;}function k(n){while(n.lastChild&&c('getSelectionOffsetKeyForNode')(n.lastChild))n=n.lastChild;return n;}function l(n,o,p){var q=o,r=c('findAncestorOffsetKey')(q);r!=null||n&&(n===q||n.firstChild===q)||h(0);if(n===q){q=q.firstChild;q instanceof Element&&q.getAttribute('data-contents')==='true'||h(0);if(p>0)p=q.childNodes.length;}if(p===0){var s=null;if(r!=null){s=r;}else{var t=j(q);s=c('nullthrows')(c('getSelectionOffsetKeyForNode')(t));}return {key:s,offset:0};}var u=q.childNodes[p-1],v=null,w=null;if(!c('getSelectionOffsetKeyForNode')(u)){v=c('nullthrows')(r);w=m(u);}else{var x=k(u);v=c('nullthrows')(c('getSelectionOffsetKeyForNode')(x));w=m(x);}return {key:v,offset:w};}function m(n){var o=n.textContent;return o==='\n'?0:o.length;}f.exports=i;}),null);
__d('moveSelectionBackward',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getSelection(),l=i.getCurrentContent(),m=k.getStartKey(),n=k.getStartOffset(),o=m,p=0;if(j>n){var q=l.getKeyBefore(m);if(q==null){o=m;}else{o=q;var r=l.getBlockForKey(q);p=r.getText().length;}}else p=n-j;return k.merge({focusKey:o,focusOffset:p,isBackward:true});}f.exports=h;}),null);
__d('removeTextWithStrategy',['DraftModifier'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=i.getSelection(),m=i.getCurrentContent(),n=l;if(l.isCollapsed()){if(k==='forward'){if(i.isSelectionAtEndOfContent())return m;}else if(i.isSelectionAtStartOfContent())return m;n=j(i);if(n===l)return m;}return c('DraftModifier').removeRange(m,n,k);}f.exports=h;}),null);
__d('keyCommandBackspaceToStartOfLine',['EditorState','expandRangeToStartOfLine','getDraftEditorSelectionWithNodes','moveSelectionBackward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection();if(l.isCollapsed()&&l.getAnchorOffset()===0)return c('moveSelectionBackward')(k,1);var m=b.getSelection(),n=m.getRangeAt(0);n=c('expandRangeToStartOfLine')(n);return c('getDraftEditorSelectionWithNodes')(k,null,n.endContainer,n.endOffset,n.startContainer,n.startOffset).selectionState;},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;}),null);
__d('DraftRemovableWord',['TokenizeUtil'],(function a(b,c,d,e,f,g){'use strict';var h=c('TokenizeUtil').getPunctuation(),i='[\'\u2018\u2019]',j='\\s|(?![_])'+h,k='^'+'(?:'+j+')*'+'(?:'+i+'|(?!'+j+').)*'+'(?:(?!'+j+').)',l=new RegExp(k),m='(?:(?!'+j+').)'+'(?:'+i+'|(?!'+j+').)*'+'(?:'+j+')*'+'$',n=new RegExp(m);function o(q,r){var s=r?n.exec(q):l.exec(q);return s?s[0]:q;}var p={getBackward:function q(r){return o(r,true);},getForward:function q(r){return o(r,false);}};f.exports=p;}),null);
__d('keyCommandBackspaceWord',['DraftRemovableWord','EditorState','moveSelectionBackward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset();if(m===0)return c('moveSelectionBackward')(k,1);var n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(0,m),q=c('DraftRemovableWord').getBackward(p);return c('moveSelectionBackward')(k,q.length||1);},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;}),null);
__d('moveSelectionForward',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getSelection(),l=k.getStartKey(),m=k.getStartOffset(),n=i.getCurrentContent(),o=l,p,q=n.getBlockForKey(l);if(j>q.getText().length-m){o=n.getKeyAfter(l);p=0;}else p=m+j;return k.merge({focusKey:o,focusOffset:p});}f.exports=h;}),null);
__d('keyCommandDeleteWord',['DraftRemovableWord','EditorState','moveSelectionForward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset(),n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(m),q=c('DraftRemovableWord').getForward(p);return c('moveSelectionForward')(k,q.length||1);},'forward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;}),null);
__d('keyCommandInsertNewline',['DraftModifier','EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('DraftModifier').splitBlock(i.getCurrentContent(),i.getSelection());return c('EditorState').push(i,j,'split-block');}f.exports=h;}),null);
__d('keyCommandMoveSelectionToEndOfBlock',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection(),k=j.getEndKey(),l=i.getCurrentContent(),m=l.getBlockForKey(k).getLength();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:m,focusKey:k,focusOffset:m,isBackward:false}),forceSelection:true});}f.exports=h;}),null);
__d('keyCommandMoveSelectionToStartOfBlock',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection(),k=j.getStartKey();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:0,focusKey:k,focusOffset:0,isBackward:false}),forceSelection:true});}f.exports=h;}),null);
__d('keyCommandPlainBackspace',['EditorState','UnicodeUtils','moveSelectionBackward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p-1];return c('moveSelectionBackward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'backward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'backspace-character':'remove-range');}f.exports=h;}),null);
__d('keyCommandPlainDelete',['EditorState','UnicodeUtils','moveSelectionForward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p];return c('moveSelectionForward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'forward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'delete-character':'remove-range');}f.exports=h;}),null);
__d('keyCommandTransposeCharacters',['DraftModifier','EditorState','getContentStateFragment'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection();if(!j.isCollapsed())return i;var k=j.getAnchorOffset();if(k===0)return i;var l=j.getAnchorKey(),m=i.getCurrentContent(),n=m.getBlockForKey(l),o=n.getLength();if(o<=1)return i;var p,q;if(k===o){p=j.set('anchorOffset',k-1);q=j;}else{p=j.set('focusOffset',k+1);q=p.set('anchorOffset',k+1);}var r=c('getContentStateFragment')(m,p),s=c('DraftModifier').removeRange(m,p,'backward'),t=s.getSelectionAfter(),u=t.getAnchorOffset()-1,v=t.merge({anchorOffset:u,focusOffset:u}),w=c('DraftModifier').replaceWithFragment(s,v,r),x=c('EditorState').push(i,w,'insert-fragment');return c('EditorState').acceptSelection(x,q);}f.exports=h;}),null);
__d('keyCommandUndo',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=c('EditorState').undo(j);if(j.getLastChangeType()==='spellcheck-change'){var m=l.getCurrentContent();k(c('EditorState').set(l,{nativelyRenderedContent:m}));return;}i.preventDefault();if(!j.getNativelyRenderedContent()){k(l);return;}k(c('EditorState').set(j,{nativelyRenderedContent:null}));setTimeout(function(){k(l);},0);}f.exports=h;}),null);
__d('editOnKeyDown',['DraftModifier','EditorState','KeyBindingUtil','Keys','SecondaryClipboard','UserAgent','isEventHandled','keyCommandBackspaceToStartOfLine','keyCommandBackspaceWord','keyCommandDeleteWord','keyCommandInsertNewline','keyCommandMoveSelectionToEndOfBlock','keyCommandMoveSelectionToStartOfBlock','keyCommandPlainBackspace','keyCommandPlainDelete','keyCommandTransposeCharacters','keyCommandUndo'],(function a(b,c,d,e,f,g){'use strict';var h=c('KeyBindingUtil').isOptionKeyCommand,i=c('UserAgent').isBrowser('Chrome');function j(l,m){switch(l){case 'redo':return c('EditorState').redo(m);case 'delete':return c('keyCommandPlainDelete')(m);case 'delete-word':return c('keyCommandDeleteWord')(m);case 'backspace':return c('keyCommandPlainBackspace')(m);case 'backspace-word':return c('keyCommandBackspaceWord')(m);case 'backspace-to-start-of-line':return c('keyCommandBackspaceToStartOfLine')(m);case 'split-block':return c('keyCommandInsertNewline')(m);case 'transpose-characters':return c('keyCommandTransposeCharacters')(m);case 'move-selection-to-start-of-block':return c('keyCommandMoveSelectionToStartOfBlock')(m);case 'move-selection-to-end-of-block':return c('keyCommandMoveSelectionToEndOfBlock')(m);case 'secondary-cut':return c('SecondaryClipboard').cut(m);case 'secondary-paste':return c('SecondaryClipboard').paste(m);default:return m;}}function k(l,m){var n=m.which,o=l._latestEditorState;switch(n){case c('Keys').RETURN:m.preventDefault();if(l.props.handleReturn&&c('isEventHandled')(l.props.handleReturn(m,o)))return;break;case c('Keys').ESC:m.preventDefault();l.props.onEscape&&l.props.onEscape(m);return;case c('Keys').TAB:l.props.onTab&&l.props.onTab(m);return;case c('Keys').UP:l.props.onUpArrow&&l.props.onUpArrow(m);return;case c('Keys').DOWN:l.props.onDownArrow&&l.props.onDownArrow(m);return;case c('Keys').SPACE:if(i&&h(m)){m.preventDefault();var p=c('DraftModifier').replaceText(o.getCurrentContent(),o.getSelection(),'\u00a0');l.update(c('EditorState').push(o,p,'insert-characters'));return;}}var q=l.props.keyBindingFn(m);if(!q)return;if(q==='undo'){c('keyCommandUndo')(m,o,l.update);return;}m.preventDefault();if(l.props.handleKeyCommand&&c('isEventHandled')(l.props.handleKeyCommand(q,o)))return;var r=j(q,o);if(r!==o)l.update(r);}f.exports=k;}),null);
__d('getSafeBodyFromHTML',['invariant','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UserAgent').isBrowser('IE <= 9');function j(k){var l,m=null;if(!i&&document.implementation&&document.implementation.createHTMLDocument){l=document.implementation.createHTMLDocument('foo');l.documentElement||h(0);l.documentElement.innerHTML=k;m=l.getElementsByTagName('body')[0];}return m;}f.exports=j;}),null);
__d('convertFromHTMLToContentBlocks',['invariant','CharacterMetadata','ContentBlock','DefaultDraftBlockRenderMap','DraftEntity','immutable','URI','generateRandomKey','getSafeBodyFromHTML','nullthrows','sanitizeDraftText'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Set,j=c('immutable').List,k=c('immutable').OrderedSet,l='&nbsp;',m=' ',n=4,o=new RegExp('\r','g'),p=new RegExp('\n','g'),q=new RegExp(l,'g'),r=new RegExp('&#13;?','g'),s=new RegExp('&#8203;?','g'),t=['bold','bolder','500','600','700','800','900'],u=['light','lighter','100','200','300','400'],v={b:'BOLD',code:'CODE',del:'STRIKETHROUGH',em:'ITALIC',i:'ITALIC',s:'STRIKETHROUGH',strike:'STRIKETHROUGH',strong:'BOLD',u:'UNDERLINE'},w=['className','href','rel','target','title'],x=['alt','className','height','src','width'],y;function z(){return {text:'',inlines:[],entities:[],blocks:[]};}function aa(oa){var pa=new Array(1);if(oa)pa[0]=oa;return {text:m,inlines:[k()],entities:pa,blocks:[]};}function ba(){return {text:'\n',inlines:[k()],entities:new Array(1),blocks:[]};}function ca(oa,pa){return {text:'\r',inlines:[k()],entities:new Array(1),blocks:[{type:oa,depth:Math.max(0,Math.min(n,pa))}]};}function da(oa,pa){if(oa==='li')return pa==='ol'?'ordered-list-item':'unordered-list-item';return null;}function ea(oa){var pa=oa.get('unstyled').element,qa=i([]);oa.forEach(function(ra){if(ra.aliasedElements)ra.aliasedElements.forEach(function(sa){qa=qa.add(sa);});qa=qa.add(ra.element);});return qa.filter(function(ra){return ra&&ra!==pa;}).toArray().sort();}function fa(oa,pa,qa){for(var ra=0;ra<qa.length;ra++){var sa=qa[ra](oa,pa);if(sa)return sa;}return null;}function ga(oa,pa,qa){var ra=qa.filter(function(sa){return sa.element===oa||sa.wrapper===oa||sa.aliasedElements&&sa.aliasedElements.some(function(ta){return ta===oa;});}).keySeq().toSet().toArray().sort();switch(ra.length){case 0:return 'unstyled';case 1:return ra[0];default:return fa(oa,pa,[da])||'unstyled';}}function ha(oa,pa,qa){var ra,sa=v[oa];if(sa){qa=qa.add(sa).toOrderedSet();}else if(pa instanceof HTMLElement)(function(){var ta=pa;qa=qa.withMutations(function(ua){var va=ta.style.fontWeight,wa=ta.style.fontStyle,xa=ta.style.textDecoration;if(t.indexOf(va)>=0){ua.add('BOLD');}else if(u.indexOf(va)>=0)ua.remove('BOLD');if(wa==='italic'){ua.add('ITALIC');}else if(wa==='normal')ua.remove('ITALIC');if(xa==='underline')ua.add('UNDERLINE');if(xa==='line-through')ua.add('STRIKETHROUGH');if(xa==='none'){ua.remove('UNDERLINE');ua.remove('STRIKETHROUGH');}}).toOrderedSet();})();return qa;}function ia(oa,pa){var qa=oa.text.slice(-1),ra=pa.text.slice(0,1);if(qa==='\r'&&ra==='\r'){oa.text=oa.text.slice(0,-1);oa.inlines.pop();oa.entities.pop();oa.blocks.pop();}if(qa==='\r')if(pa.text===m||pa.text==='\n'){return oa;}else if(ra===m||ra==='\n'){pa.text=pa.text.slice(1);pa.inlines.shift();pa.entities.shift();}return {text:oa.text+pa.text,inlines:oa.inlines.concat(pa.inlines),entities:oa.entities.concat(pa.entities),blocks:oa.blocks.concat(pa.blocks)};}function ja(oa,pa){return pa.some(function(qa){return oa.indexOf('<'+qa)!==-1;});}function ka(oa){oa instanceof HTMLAnchorElement||h(0);var pa=oa.protocol;return pa==='http:'||pa==='https:'||pa==='mailto:';}function la(oa,pa,qa,ra,sa,ta,ua,va,wa){var xa,ya,za=pa.nodeName.toLowerCase(),ab=false,bb='unstyled',cb=y,db=oa;if(za==='#text'){var eb=pa.textContent;if(eb.trim()===''&&sa!=='pre')return {chunk:aa(wa),entityMap:oa};if(sa!=='pre')eb=eb.replace(p,m);y=za;return {chunk:{text:eb,inlines:Array(eb.length).fill(qa),entities:Array(eb.length).fill(wa),blocks:[]},entityMap:oa};}y=za;if(za==='br'){if(cb==='br'&&(!sa||ga(sa,ra,va)==='unstyled'))return {chunk:ca('unstyled',ua),entityMap:oa};return {chunk:ba(),entityMap:oa};}if(za==='img'&&pa instanceof HTMLImageElement&&pa.attributes.getNamedItem('src')&&pa.attributes.getNamedItem('src').value)(function(){var nb=pa,ob={};x.forEach(function(qb){var rb=nb.getAttribute(qb);if(rb)ob[qb]=rb;});var pb=new (c('URI'))(ob.src).toString();pa.textContent=pb;wa=c('DraftEntity').__create('IMAGE','MUTABLE',ob||{});})();var fb=z(),gb=null;qa=ha(za,pa,qa);if(za==='ul'||za==='ol'){if(ra)ua+=1;ra=za;}if(!sa&&ta.indexOf(za)!==-1){fb=ca(ga(za,ra,va),ua);sa=za;ab=true;}else if(ra&&sa==='li'&&za==='li'){fb=ca(ga(za,ra,va),ua);sa=za;ab=true;bb=ra==='ul'?'unordered-list-item':'ordered-list-item';}var hb=pa.firstChild;if(hb!=null)za=hb.nodeName.toLowerCase();var ib=null;while(hb){if(hb instanceof HTMLAnchorElement&&hb.href&&ka(hb)){(function(){var nb=hb,ob={};w.forEach(function(pb){var qb=nb.getAttribute(pb);if(qb)ob[pb]=qb;});ob.url=new (c('URI'))(nb.href).toString();ib=c('DraftEntity').__create('LINK','MUTABLE',ob||{});})();}else ib=undefined;var jb=la(db,hb,qa,ra,sa,ta,ua,va,ib||wa),kb=jb.chunk,lb=jb.entityMap;gb=kb;db=lb;fb=ia(fb,gb);var mb=hb.nextSibling;if(mb&&ta.indexOf(za)>=0&&sa)fb=ia(fb,ba());if(mb)za=mb.nodeName.toLowerCase();hb=mb;}if(ab)fb=ia(fb,ca(bb,ua));return {chunk:fb,entityMap:db};}function ma(oa,pa,qa,ra){oa=oa.trim().replace(o,'').replace(q,m).replace(r,'').replace(s,'');var sa=ea(qa),ta=pa(oa);if(!ta)return null;y=null;var ua=ja(oa,sa)?sa:['div'],va=la(ra,ta,k(),'ul',null,ua,-1,qa),wa=va.chunk,xa=va.entityMap;if(wa.text.indexOf('\r')===0)wa={text:wa.text.slice(1),inlines:wa.inlines.slice(1),entities:wa.entities.slice(1),blocks:wa.blocks};if(wa.text.slice(-1)==='\r'){wa.text=wa.text.slice(0,-1);wa.inlines=wa.inlines.slice(0,-1);wa.entities=wa.entities.slice(0,-1);wa.blocks.pop();}if(wa.blocks.length===0)wa.blocks.push({type:'unstyled',depth:0});if(wa.text.split('\r').length===wa.blocks.length+1)wa.blocks.unshift({type:'unstyled',depth:0});return {chunk:wa,entityMap:xa};}function na(oa){var pa=arguments.length<=1||arguments[1]===undefined?c('getSafeBodyFromHTML'):arguments[1],qa=arguments.length<=2||arguments[2]===undefined?c('DefaultDraftBlockRenderMap'):arguments[2],ra=ma(oa,pa,qa,c('DraftEntity'));if(ra==null)return null;var sa=ra.chunk,ta=ra.entityMap,ua=0;return {contentBlocks:sa.text.split('\r').map(function(va,wa){va=c('sanitizeDraftText')(va);var xa=ua+va.length,ya=c('nullthrows')(sa).inlines.slice(ua,xa),za=c('nullthrows')(sa).entities.slice(ua,xa),ab=j(ya.map(function(bb,cb){var db={style:bb,entity:null};if(za[cb])db.entity=za[cb];return c('CharacterMetadata').create(db);}));ua=xa+1;return new (c('ContentBlock'))({key:c('generateRandomKey')(),type:c('nullthrows')(sa).blocks[wa].type,depth:c('nullthrows')(sa).blocks[wa].depth,text:va,characterList:ab});}),entityMap:ta};}f.exports=na;}),null);
__d('DraftPasteProcessor',['CharacterMetadata','ContentBlock','immutable','convertFromHTMLToContentBlocks','generateRandomKey','getSafeBodyFromHTML','sanitizeDraftText'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i=c('immutable').Repeat,j={processHTML:function k(l,m){return c('convertFromHTMLToContentBlocks')(l,c('getSafeBodyFromHTML'),m);},processText:function k(l,m){return l.map(function(n){n=c('sanitizeDraftText')(n);return new (c('ContentBlock'))({key:c('generateRandomKey')(),type:'unstyled',text:n,characterList:h(i(m,n.length))});});}};f.exports=j;}),null);
__d('splitTextIntoTextBlocks',[],(function a(b,c,d,e,f,g){'use strict';var h=/\r\n?|\n/g;function i(j){return j.split(h);}f.exports=i;}),null);
__d('editOnPaste',['BlockMapBuilder','CharacterMetadata','DataTransfer','DraftModifier','DraftPasteProcessor','EditorState','getEntityKeyForSelection','getTextContentFromFiles','isEventHandled','splitTextIntoTextBlocks'],(function a(b,c,d,e,f,g){'use strict';function h(k,l){l.preventDefault();var m=new (c('DataTransfer'))(l.clipboardData);if(!m.isRichText()){var n=m.getFiles(),o=m.getText();if(n.length>0){if(k.props.handlePastedFiles&&c('isEventHandled')(k.props.handlePastedFiles(n)))return;c('getTextContentFromFiles')(n,function(ba){ba=ba||o;if(!ba)return;var ca=k._latestEditorState,da=c('splitTextIntoTextBlocks')(ba),ea=c('CharacterMetadata').create({style:ca.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(ca.getCurrentContent(),ca.getSelection())}),fa=c('DraftPasteProcessor').processText(da,ea),ga=c('BlockMapBuilder').createFromArray(fa),ha=c('DraftModifier').replaceWithFragment(ca.getCurrentContent(),ca.getSelection(),ga);k.update(c('EditorState').push(ca,ha,'insert-fragment'));});return;}}var p=[],q=m.getText(),r=m.getHTML(),s=k._latestEditorState;if(k.props.handlePastedText&&c('isEventHandled')(k.props.handlePastedText(q,r,s)))return;if(q)p=c('splitTextIntoTextBlocks')(q);if(!k.props.stripPastedStyles){var t=k.getClipboard();if(m.isRichText()&&t){if(r.indexOf(k.getEditorKey())!==-1||p.length===1&&t.size===1&&t.first().getText()===q){k.update(i(k._latestEditorState,t));return;}}else if(t&&m.types.includes('com.apple.webarchive')&&!m.types.includes('text/html')&&j(p,t)){k.update(i(k._latestEditorState,t));return;}if(r){var u=c('DraftPasteProcessor').processHTML(r,k.props.blockRenderMap);if(u){var v=u.contentBlocks,w=u.entityMap;if(v){var x=c('BlockMapBuilder').createFromArray(v);k.update(i(k._latestEditorState,x,w));return;}}}k.setClipboard(null);}if(p.length){var y=c('CharacterMetadata').create({style:s.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(s.getCurrentContent(),s.getSelection())}),z=c('DraftPasteProcessor').processText(p,y),aa=c('BlockMapBuilder').createFromArray(z);k.update(i(k._latestEditorState,aa));}}function i(k,l,m){var n=c('DraftModifier').replaceWithFragment(k.getCurrentContent(),k.getSelection(),l);return c('EditorState').push(k,n.set('entityMap',m),'insert-fragment');}function j(k,l){return k.length===l.size&&l.valueSeq().every(function(m,n){return m.getText()===k[n];});}f.exports=h;}),null);
__d('getDraftEditorSelection',['getDraftEditorSelectionWithNodes'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=b.getSelection();if(k.rangeCount===0)return {selectionState:i.getSelection().set('hasFocus',false),needsRecovery:false};return c('getDraftEditorSelectionWithNodes')(i,j,k.anchorNode,k.anchorOffset,k.focusNode,k.focusOffset);}f.exports=h;}),null);
__d('editOnSelect',['invariant','EditorState','ReactDOM','getDraftEditorSelection'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){if(j._blockSelectEvents||j._latestEditorState!==j.props.editorState)return;var k=j.props.editorState,l=c('ReactDOM').findDOMNode(j.refs.editorContainer);l||h(0);l.firstChild instanceof HTMLElement||h(0);var m=c('getDraftEditorSelection')(k,l.firstChild),n=m.selectionState;if(n!==k.getSelection()){if(m.needsRecovery){k=c('EditorState').forceSelection(k,n);}else k=c('EditorState').acceptSelection(k,n);j.update(k);}}f.exports=i;}),null);
__d('DraftEditorEditHandler',['editOnBeforeInput','editOnBlur','editOnCompositionStart','editOnCopy','editOnCut','editOnDragOver','editOnDragStart','editOnFocus','editOnInput','editOnKeyDown','editOnPaste','editOnSelect'],(function a(b,c,d,e,f,g){'use strict';var h={onBeforeInput:c('editOnBeforeInput'),onBlur:c('editOnBlur'),onCompositionStart:c('editOnCompositionStart'),onCopy:c('editOnCopy'),onCut:c('editOnCut'),onDragOver:c('editOnDragOver'),onDragStart:c('editOnDragStart'),onFocus:c('editOnFocus'),onInput:c('editOnInput'),onKeyDown:c('editOnKeyDown'),onPaste:c('editOnPaste'),onSelect:c('editOnSelect')};f.exports=h;}),null);
__d('DraftEditorPlaceholder.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(l){return this.props.text!==l.text||this.props.editorState.getSelection().getHasFocus()!==l.editorState.getSelection().getHasFocus();};k.prototype.render=function(){var l=this.props.editorState.getSelection().getHasFocus(),m="_1p1t"+(l?' '+"_1p1u":'');return c('React').createElement('div',{className:m},c('React').createElement('div',{className:"_1p1v",id:this.props.accessibilityID},this.props.text));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('getDefaultKeyBinding',['KeyBindingUtil','Keys','UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isPlatform('Mac OS X'),i=c('UserAgent').isPlatform('Windows'),j=h&&c('UserAgent').isBrowser('Firefox < 29'),k=c('KeyBindingUtil').hasCommandModifier,l=c('KeyBindingUtil').isCtrlKeyCommand;function m(r){return h&&r.altKey||l(r);}function n(r){if(!k(r))return null;return r.shiftKey?'redo':'undo';}function o(r){if(i&&r.shiftKey)return null;return m(r)?'delete-word':'delete';}function p(r){if(k(r)&&h)return 'backspace-to-start-of-line';return m(r)?'backspace-word':'backspace';}function q(r){switch(r.keyCode){case 66:return k(r)?'bold':null;case 68:return l(r)?'delete':null;case 72:return l(r)?'backspace':null;case 73:return k(r)?'italic':null;case 74:return k(r)?'code':null;case 75:return !i&&l(r)?'secondary-cut':null;case 77:return l(r)?'split-block':null;case 79:return l(r)?'split-block':null;case 84:return h&&l(r)?'transpose-characters':null;case 85:return k(r)?'underline':null;case 87:return h&&l(r)?'backspace-word':null;case 89:if(l(r))return i?'redo':'secondary-paste';return null;case 90:return n(r)||null;case c('Keys').RETURN:return 'split-block';case c('Keys').DELETE:return o(r);case c('Keys').BACKSPACE:return p(r);case c('Keys').LEFT:return j&&k(r)?'move-selection-to-start-of-block':null;case c('Keys').RIGHT:return j&&k(r)?'move-selection-to-end-of-block':null;default:return null;}}f.exports=q;}),null);
__d('DraftEditor.react',['cx','invariant','DefaultDraftBlockRenderMap','DefaultDraftInlineStyle','DraftEditorCompositionHandler','DraftEditorContents.react','DraftEditorDragHandler','DraftEditorEditHandler','DraftEditorPlaceholder.react','EditorState','React','ReactDOM','Scroll','Style','UserAgent','emptyFunction','generateRandomKey','getDefaultKeyBinding','getScrollPosition','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('UserAgent').isBrowser('IE'),m=!l,n={edit:c('DraftEditorEditHandler'),composite:c('DraftEditorCompositionHandler'),drag:c('DraftEditorDragHandler'),cut:null,render:null};j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this._blockSelectEvents=false;this._clipboard=null;this._handler=null;this._dragCount=0;this._editorKey=p.editorKey||c('generateRandomKey')();this._placeholderAccessibilityID='placeholder-'+this._editorKey;this._latestEditorState=p.editorState;this._latestCommittedEditorState=p.editorState;this._onBeforeInput=this._buildHandler('onBeforeInput');this._onBlur=this._buildHandler('onBlur');this._onCharacterData=this._buildHandler('onCharacterData');this._onCompositionEnd=this._buildHandler('onCompositionEnd');this._onCompositionStart=this._buildHandler('onCompositionStart');this._onCopy=this._buildHandler('onCopy');this._onCut=this._buildHandler('onCut');this._onDragEnd=this._buildHandler('onDragEnd');this._onDragOver=this._buildHandler('onDragOver');this._onDragStart=this._buildHandler('onDragStart');this._onDrop=this._buildHandler('onDrop');this._onInput=this._buildHandler('onInput');this._onFocus=this._buildHandler('onFocus');this._onKeyDown=this._buildHandler('onKeyDown');this._onKeyPress=this._buildHandler('onKeyPress');this._onKeyUp=this._buildHandler('onKeyUp');this._onMouseDown=this._buildHandler('onMouseDown');this._onMouseUp=this._buildHandler('onMouseUp');this._onPaste=this._buildHandler('onPaste');this._onSelect=this._buildHandler('onSelect');this.focus=this._focus.bind(this);this.blur=this._blur.bind(this);this.setMode=this._setMode.bind(this);this.exitCurrentMode=this._exitCurrentMode.bind(this);this.restoreEditorDOM=this._restoreEditorDOM.bind(this);this.setClipboard=this._setClipboard.bind(this);this.getClipboard=this._getClipboard.bind(this);this.getEditorKey=function(){return this._editorKey;}.bind(this);this.update=this._update.bind(this);this.onDragEnter=this._onDragEnter.bind(this);this.onDragLeave=this._onDragLeave.bind(this);this.state={contentsKey:0};}o.prototype._buildHandler=function(p){return function(q){if(!this.props.readOnly){var r=this._handler&&this._handler[p];r&&r(this,q);}}.bind(this);};o.prototype._showPlaceholder=function(){return !!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText();};o.prototype._renderPlaceholder=function(){if(this._showPlaceholder())return c('React').createElement(c('DraftEditorPlaceholder.react'),{text:c('nullthrows')(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID});return null;};o.prototype.render=function(){var p=this.props,q=p.readOnly,r=p.textAlignment,s="_5rp7"+(r==='left'?' '+"_5rp8":'')+(r==='right'?' '+"_5rp9":'')+(r==='center'?' '+"_5rpa":''),t={outline:'none',whiteSpace:'pre-wrap',wordWrap:'break-word'},u=this.props.role||'textbox',v=u==='combobox'?!!this.props.ariaExpanded:null;return c('React').createElement('div',{className:s},this._renderPlaceholder(),c('React').createElement('div',{className:"_5rpb",ref:'editorContainer'},c('React').createElement('div',{'aria-activedescendant':q?null:this.props.ariaActiveDescendantID,'aria-autocomplete':q?null:this.props.ariaAutoComplete,'aria-controls':q?null:this.props.ariaControls,'aria-describedby':this._showPlaceholder()?this._placeholderAccessibilityID:null,'aria-expanded':q?null:v,'aria-label':this.props.ariaLabel,'aria-multiline':this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:(!q?"notranslate":'')+(' '+"_5rpu"),contentEditable:!q,'data-testid':this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:'editor',role:q?null:u,spellCheck:m&&this.props.spellCheck,style:t,suppressContentEditableWarning:true,tabIndex:this.props.tabIndex},c('React').createElement(c('DraftEditorContents.react'),{blockRenderMap:this.props.blockRenderMap,blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,customStyleMap:babelHelpers['extends']({},c('DefaultDraftInlineStyle'),this.props.customStyleMap),customStyleFn:this.props.customStyleFn,editorKey:this._editorKey,editorState:this.props.editorState,key:'contents'+this.state.contentsKey,textDirectionality:this.props.textDirectionality}))));};o.prototype.componentDidMount=function(){this.setMode('edit');if(l)document.execCommand('AutoUrlDetect',false,false);};o.prototype.componentWillUpdate=function(p){this._blockSelectEvents=true;this._latestEditorState=p.editorState;};o.prototype.componentDidUpdate=function(){this._blockSelectEvents=false;this._latestCommittedEditorState=this.props.editorState;};o.prototype._focus=function(p){var q=this.props.editorState,r=q.getSelection().getHasFocus(),s=c('ReactDOM').findDOMNode(this.refs.editor),t=c('Style').getScrollParent(s),u=p||c('getScrollPosition')(t),v=u.x,w=u.y;s instanceof HTMLElement||i(0);s.focus();if(t===window){window.scrollTo(v,w);}else c('Scroll').setTop(t,w);if(!r)this.update(c('EditorState').forceSelection(q,q.getSelection()));};o.prototype._blur=function(){var p=c('ReactDOM').findDOMNode(this.refs.editor);p instanceof HTMLElement||i(0);p.blur();};o.prototype._setMode=function(p){this._handler=n[p];};o.prototype._exitCurrentMode=function(){this.setMode('edit');};o.prototype._restoreEditorDOM=function(p){this.setState({contentsKey:this.state.contentsKey+1},function(){this._focus(p);}.bind(this));};o.prototype._setClipboard=function(p){this._clipboard=p;};o.prototype._getClipboard=function(){return this._clipboard;};o.prototype._update=function(p){this._latestEditorState=p;this.props.onChange(p);};o.prototype._onDragEnter=function(){this._dragCount++;};o.prototype._onDragLeave=function(){this._dragCount--;if(this._dragCount===0)this.exitCurrentMode();};o.defaultProps={blockRenderMap:c('DefaultDraftBlockRenderMap'),blockRendererFn:c('emptyFunction').thatReturnsNull,blockStyleFn:c('emptyFunction').thatReturns(''),keyBindingFn:c('getDefaultKeyBinding'),readOnly:false,spellCheck:false,stripPastedStyles:false};f.exports=o;}),null);
__d("GroupTypeaheadTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({USER:"user",PAGE:"page",APP:"app",GROUP:"group",EVENT:"event",PLACE:"place",GROUP_RULE:"group_rule"});}),null);
__d('insertMentionIntoEditorState',['DraftModifier','EditorState','GroupTypeaheadTypeEnum'],(function a(b,c,d,e,f,g){'use strict';function h(k,l,m,n){var o=l.getSelection(),p=l.getCurrentContent(),q=o.getAnchorKey(),r=o.getAnchorOffset(),s=p.getBlockMap().get(q),t=r-j(s.getText().substr(0,r),i(k),m),u=c('DraftModifier').replaceText(p,o.set('anchorOffset',t),i(k),l.getCurrentInlineStyle(),n(k));return c('EditorState').push(l,u,'insert-fragment');}function i(k){if(k.getType()===c('GroupTypeaheadTypeEnum').GROUP_RULE)return k.getSubtitle();return k.getTitle();}function j(k,l,m){for(var n=m;n<=l.length;n++)if(k.substr(-n)==l.substr(0,n))m=n;return m;}f.exports=h;}),null);
__d('AbstractMentionsTextEditor.react',['DraftEditor.react','React','SearchableEntry','TypeaheadNavigation','clearImmediate','getOrCreateDOMID','insertMentionIntoEditorState','setImmediate','uniqueID'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k=5,l='handled',m='not-handled';h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(o,p){'use strict';i.constructor.call(this,o,p);this.__onShowMentions=function(q,r){if(!this.$AbstractMentionsTextEditor2)return;var s=r||0;if(!q||!q.length){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return;}var t=q.slice(0,this.props.maxResults),u=this.props.typeaheadViewProps;if(u&&u.mentionSortFn)t.sort(u.mentionSortFn);var v=null;if(this.props.autoHighlight||this.state.highlightedMentionable!==null)v=q[0];this.setState({highlightedMentionable:v,mentionableEntries:t,characterOffset:s});if(this.props.onShowMentions)this.props.onShowMentions(t,s);}.bind(this);this.$AbstractMentionsTextEditor8=function(q){this.setState(this.$AbstractMentionsTextEditor12());this.props.onBlur&&this.props.onBlur(q);}.bind(this);this.$AbstractMentionsTextEditor7=function(q){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(q);}.bind(this);this.$AbstractMentionsTextEditor13=function(q,r){if(this.state.highlightedMentionable){this.$AbstractMentionsTextEditor10(this.state.highlightedMentionable,q);return l;}else if(this.props.handleContentReturn&&this.props.handleContentReturn(q,r))return l;return m;}.bind(this);this.$AbstractMentionsTextEditor6=function(q){var r=this.state.highlightedMentionable;if(r){q.preventDefault();this.$AbstractMentionsTextEditor10(r,q);}else if(this.props.onTab)this.props.onTab(q);}.bind(this);this.$AbstractMentionsTextEditor5=function(q){if(this.props.onEscape)this.props.onEscape(q);if(this.state.mentionableEntries){q.stopPropagation();q.nativeEvent.isPropagationStopped=true;this.setState(this.$AbstractMentionsTextEditor12());}}.bind(this);this.$AbstractMentionsTextEditor11=function(q){var r=this.state.mentionableEntries;if(r){q.preventDefault();c('TypeaheadNavigation').moveUp(r,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9);}else this.props.onUpArrow&&this.props.onUpArrow(q);}.bind(this);this.$AbstractMentionsTextEditor4=function(q){var r=this.state.mentionableEntries;if(r){q.preventDefault();c('TypeaheadNavigation').moveDown(r,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9);}else this.props.onDownArrow&&this.props.onDownArrow(q);}.bind(this);this.$AbstractMentionsTextEditor9=function(q){this.setState({highlightedMentionable:q});}.bind(this);this.$AbstractMentionsTextEditor14=function(q){var r=c('getOrCreateDOMID')(q);this.setState({ariaActiveDescendantID:r});}.bind(this);this.$AbstractMentionsTextEditor10=function(q,r){var s=c('insertMentionIntoEditorState')(q,this.props.editorState,this.state.characterOffset,this.props.mentionCreationFn);this.props.onChange(s);this.setState(this.$AbstractMentionsTextEditor12());var t=this.props.onAddMention,u=this.state.mentionableEntries;if(t&&u){var v=u.indexOf(q);t(q,v,r);}}.bind(this);this.__onShowMentions=this.__onShowMentions.bind(this);this.$AbstractMentionsTextEditor4=this.$AbstractMentionsTextEditor4.bind(this);this.$AbstractMentionsTextEditor5=this.$AbstractMentionsTextEditor5.bind(this);this.$AbstractMentionsTextEditor6=this.$AbstractMentionsTextEditor6.bind(this);this.$AbstractMentionsTextEditor7=this.$AbstractMentionsTextEditor7.bind(this);this.$AbstractMentionsTextEditor8=this.$AbstractMentionsTextEditor8.bind(this);this.$AbstractMentionsTextEditor9=this.$AbstractMentionsTextEditor9.bind(this);this.$AbstractMentionsTextEditor10=this.$AbstractMentionsTextEditor10.bind(this);this.$AbstractMentionsTextEditor11=this.$AbstractMentionsTextEditor11.bind(this);this.state=this.$AbstractMentionsTextEditor12();}n.prototype.componentWillMount=function(){'use strict';this.$AbstractMentionsTextEditor2=true;this.$AbstractMentionsTextEditor1=c('uniqueID')();this.$AbstractMentionsTextEditor3=[];};n.prototype.componentWillUnmount=function(){'use strict';this.$AbstractMentionsTextEditor2=false;this.$AbstractMentionsTextEditor3.forEach(function(o){return c('clearImmediate')(o);});this.$AbstractMentionsTextEditor3=[];};n.prototype.$AbstractMentionsTextEditor12=function(){'use strict';return {highlightedMentionable:null,mentionableEntries:null,characterOffset:0};};n.prototype.shouldComponentUpdate=function(o,p){'use strict';return this.props.editorState!==o.editorState||this.props.placeholder!==o.placeholder||this.props.readOnly!==o.readOnly||this.state.mentionableEntries!==p.mentionableEntries||this.state.highlightedMentionable!==p.highlightedMentionable||this.state.ariaActiveDescendantID!==p.ariaActiveDescendantID;};n.prototype.componentDidUpdate=function(o){var p,q=this;'use strict';var r=this.props.editorState;if(r===o.editorState)return;var s=r.getSelection();if(s.getHasFocus()&&s.isCollapsed()){var t;(function(){t=r.getCurrentContent();var u=q.props.mentionsSource;if(u)q.$AbstractMentionsTextEditor3.push(c('setImmediate')(function(){u.search(t,s,this.__onShowMentions);}.bind(q)));})();}};n.prototype.blur=function(){'use strict';this.refs.abstractTextEditor.blur();};n.prototype.focus=function(){'use strict';this.refs.abstractTextEditor.focus();};n.prototype.$AbstractMentionsTextEditor15=function(){'use strict';var o=this.state.mentionableEntries;if(!o||!o.length)return null;var p=this.props.mentionResultsComponent;return c('React').createElement(p,babelHelpers['extends']({},this.props.mentionResultsProps,{viewID:this.$AbstractMentionsTextEditor1,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:o||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this.$AbstractMentionsTextEditor10,onMentionHighlight:this.$AbstractMentionsTextEditor9,onMentionRenderHighlight:this.$AbstractMentionsTextEditor14}));};n.prototype.exitCurrentMode=function(){'use strict';this.refs.abstractTextEditor&&this.refs.abstractTextEditor.exitCurrentMode();};n.prototype.render=function(){'use strict';var o=this.state.mentionableEntries,p=!!(o&&o.length),q=this.props.readOnly?null:'-1',r=this.props.role||'combobox',s=this.props.ariaAutoComplete||'list';return c('React').createElement('div',{ref:'container',className:this.props.className,tabIndex:q},c('React').createElement(c('DraftEditor.react'),babelHelpers['extends']({},this.props,{ref:'abstractTextEditor',role:r,ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:s,ariaControls:this.$AbstractMentionsTextEditor1,ariaExpanded:p,ariaHasPopup:p,editorState:this.props.editorState,onBlur:this.$AbstractMentionsTextEditor8,onChange:this.props.onChange,onFocus:this.$AbstractMentionsTextEditor7,onTab:this.$AbstractMentionsTextEditor6,onEscape:this.$AbstractMentionsTextEditor5,onDownArrow:this.$AbstractMentionsTextEditor4,onUpArrow:this.$AbstractMentionsTextEditor11,handleReturn:this.$AbstractMentionsTextEditor13})),this.$AbstractMentionsTextEditor15());};n.prototype.isShowingMentionables=function(){'use strict';return !!this.state.mentionableEntries;};n.defaultProps=babelHelpers['extends']({},c('DraftEditor.react').defaultProps,{autoHighlight:true,maxResults:k});n.propTypes={mentionsSource:j.object,mentionCreationFn:j.func.isRequired,mentionResultsComponent:j.func.isRequired,mentionResultsProps:j.object,excludedEntries:j.object,handleContentReturn:j.func,onAddMention:j.func,onShowMentions:j.func,autoHighlight:j.bool,maxResults:j.number,webDriverTestID:j.string};f.exports=n;}),null);
__d('CompositeDraftDecorator',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='.';function j(m){this.$CompositeDraftDecorator1=m.slice();}j.prototype.getDecorations=function(m,n){var o=Array(m.getText().length).fill(null);this.$CompositeDraftDecorator1.forEach(function(p,q){var r=0,s=p.strategy,t=function u(v,w){if(k(o,v,w)){l(o,v,w,q+i+r);r++;}};s(m,t,n);});return h(o);};j.prototype.getComponentForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].component;};j.prototype.getPropsForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].props;};function k(m,n,o){for(var p=n;p<o;p++)if(m[p]!=null)return false;return true;}function l(m,n,o,p){for(var q=n;q<o;q++)m[q]=p;}f.exports=j;}),null);
__d('MessengerEmojiSpan.react',['cx','EmojiLikeConstants','MessengerSupportedEmojiUtils','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c('MessengerSupportedEmojiUtils').getUrl(o,c('EmojiLikeConstants').size.SMALL);p=p?p:'';return c('React').createElement('span',{className:"_21wj",style:{backgroundImage:'url('+p+')'},'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_21wk"},this.props.children));};function l(){i.apply(this,arguments);}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l;}),null);
__d('MessengerEmoticonSpan.react',['cx','EmojiLikeConstants','MessengerSupportedEmojiUtils','EmoticonEmojiList','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c('EmoticonEmojiList').emote2emojis[o],q=c('MessengerSupportedEmojiUtils').getUrl(p,c('EmojiLikeConstants').size.XSMALL);q=q?q:'';return c('React').createElement('span',{className:"_21wj",style:{backgroundImage:'url('+q+')'},'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_21wk"},this.props.children));};function l(){i.apply(this,arguments);}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l;}),null);
__d('MessengerMentionSource',[],(function a(b,c,d,e,f,g){'use strict';var h={REPLY:'reply',ATSIGN:'@',TYPEAHEAD:'typeahead'};f.exports=h;}),null);
__d('MessengerMentionsEntityDecorator.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('span',{className:"_fy2"},this.props.children);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('createMessengerMentionDraftEntity',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.createEntity('MENTION','SEGMENTED',{id:j.getUniqueID()});return k.getLastCreatedEntityKey();}f.exports=h;}),null);
__d('getEntityMatcher',['DraftEntity'],(function a(b,c,d,e,f,g){var h=c('DraftEntity').get;function i(j,k){var l=k||h;return function(m,n){m.findEntityRanges(function(o){var p=o.getEntity();return typeof p==='string'&&j(l(p));},n);};}f.exports=i;}),null);
__d('getProfileRangesForContentState',['EmojiFormat','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h=c('emptyFunction').thatReturnsTrue;function i(j,k){var l=[],m=0;j.getBlockMap().forEach(function(n){var o=0,p=n.getText();n.findEntityRanges(h,function(q,r){var s=n.getEntityAt(q);if(s){var t=j.getEntity(s);if(t.getType()==='EMOTICON'){o+=t.getData().originalEmoticon.length-1;}else if(t.getType()==='EMOJI'){var u=t.getData().type,v=c('EmojiFormat').codeStringToCodeArray(u),w=String.fromCodePoint.apply(String,v);o+=w.length-1;}else if(t.getType()==='MENTION'){var x=t.getData().id,y=q+o+m,z=x===k;if(/^\d+$/.test(x)||z)l.push({id:x,offset:y,length:r-q,type:z?'t':'p'});}}});m+=p.length+o+1;});return l;}f.exports=i;}),null);
__d('getVisibleValueForContentStateWithMessengerEmoji',['EmojiFormat','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getBlockMap().map(function(k){var l=k.getText(),m='';k.findEntityRanges(c('emptyFunction').thatReturnsTrue,function(n,o){var p=k.getEntityAt(n);if(!p){m+=l.slice(n,o);}else{var q=i.getEntity(p);if(q.getType()==='EMOTICON'){m+=q.getData().originalEmoticon;}else if(q.getType()==='EMOJI'){var r=q.getData().type,s=c('EmojiFormat').codeStringToCodeArray(r);m+=String.fromCodePoint.apply(String,s);}else m+=l.slice(n,o);}});return m;});return j.join('\n');}f.exports=h;}),null);
__d('insertMessengerEmojiIntoContentState',['DraftModifier','EmojiFormat'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=j.createEntity('EMOJI','IMMUTABLE',{type:i}),n=m.getLastCreatedEntityKey();return c('DraftModifier').insertText(j,k,c('EmojiFormat').codeStringToUnicode(i),l,n);}f.exports=h;}),null);
__d('handleBeforeInputForMessengerEmoji',['EditorState','MessengerSupportedEmojiUtils','insertMessengerEmojiIntoContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getSelection();if(!k.isCollapsed()||!j)return i;var l=c('MessengerSupportedEmojiUtils').getEmojiMatchObj(j);if(!l||!l.is_supported)return i;var m=c('insertMessengerEmojiIntoContentState')(l.emoji_key,i.getCurrentContent(),k,i.getCurrentInlineStyle());return c('EditorState').push(i,m,'insert-characters');}f.exports=h;}),null);
__d('applyMessengerEmoticonToContentBlock',['CharacterMetadata','EmoticonEmojiList','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='\u3000';function j(k,l,m,n){if(!c('EmoticonEmojiList').names[m])return l;var o=k.createEntity('EMOTICON','IMMUTABLE',{type:c('EmoticonEmojiList').names[m],originalEmoticon:m}),p=o.getLastCreatedEntityKey(),q=l.getText(),r=l.getCharacterList(),s=m.length,t=r.get(n);return l.merge({text:q.slice(0,n)+i+q.slice(n+s),characterList:r.slice(0,n).concat(h.of(c('CharacterMetadata').applyEntity(t,p)),r.slice(n+s))});}f.exports=j;}),null);
__d('getTextAfterNearestEntity',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j;while(k>0&&i.getEntityAt(k-1)===null)k--;return i.getText().slice(k,j);}f.exports=h;}),null);
__d('applyMessengerEmoticonToContentState',['EmoticonEmojiList','applyMessengerEmoticonToContentBlock','getTextAfterNearestEntity'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j.getAnchorKey(),l=j.getAnchorOffset(),m=i.getBlockForKey(k),n=c('getTextAfterNearestEntity')(m,l),o=c('EmoticonEmojiList').regexp.exec(n);if(!o)return i;var p=o[1];if(!p&&l!==n.length)return i;var q=o[2],r=l-n.length,s=r+o.index+o[1].length,t=i.getBlockMap().set(k,c('applyMessengerEmoticonToContentBlock')(i,m,q,s));l-=q.length-1;return i.merge({blockMap:t,selectionBefore:j,selectionAfter:j.merge({anchorOffset:l,focusOffset:l})});}f.exports=h;}),null);
__d('handleBeforeInputForMessengerEmoticon',['DraftModifier','EditorState','applyMessengerEmoticonToContentState'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp(/[\s\'\".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c('applyMessengerEmoticonToContentState')(m,l);if(n===m)return j;var o=c('DraftModifier').insertText(n,n.getSelectionAfter(),k);return c('EditorState').push(j,o,'insert-characters');}f.exports=i;}),null);
__d('handleSoftNewlineForMessengerEmoticon',['DraftModifier','EditorState','applyMessengerEmoticonToContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c('applyMessengerEmoticonToContentState')(j,k),m=c('DraftModifier').splitBlock(l,j===l?k:l.getSelectionAfter());return c('EditorState').push(i,m,'split-block');}f.exports=h;}),null);
__d('applyEmoticonToContentBlock',['CharacterMetadata','DraftEntity','EmoticonsList','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='\u3000';function j(k,l,m){if(!c('EmoticonsList').emotes[l])return k;var n=c('DraftEntity').create('EMOTICON','IMMUTABLE',{type:c('EmoticonsList').emotes[l],originalEmoticon:l}),o=k.getText(),p=k.getCharacterList(),q=l.length,r=p.get(m);return k.merge({text:o.slice(0,m)+i+o.slice(m+q),characterList:p.slice(0,m).concat(h.of(c('CharacterMetadata').applyEntity(r,n)),p.slice(m+q))});}f.exports=j;}),null);
__d('insertEmoticonIntoContentState',['DraftModifier','applyEmoticonToContentBlock'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=c('DraftModifier').replaceText(j,k,i),m=k.getAnchorKey(),n=k.getAnchorOffset(),o=l.getBlockForKey(m),p=l.getBlockMap().set(m,c('applyEmoticonToContentBlock')(o,i,n));n++;return j.merge({blockMap:p,selectionBefore:k,selectionAfter:k.merge({anchorOffset:n,focusOffset:n})});}f.exports=h;}),null);
__d('insertEmoticonIntoEditorState',['DraftModifier','EditorState','insertEmoticonIntoContentState'],(function a(b,c,d,e,f,g){'use strict';var h=' ';function i(j,k){var l=k.getSelection(),m=k.getCurrentContent(),n=l.getStartOffset(),o=l.getEndOffset(),p=m.getBlockForKey(l.getStartKey()).getText(),q=m.getBlockForKey(l.getEndKey()).getText(),r='';if(o<=q.length&&q[o]!==h)r=h;if(n>0&&p[n-1]!==h){m=c('DraftModifier').insertText(m,l,h);l=m.getSelectionAfter();}var s=c('insertEmoticonIntoContentState')(j,m,l);m=c('DraftModifier').insertText(s,s.getSelectionAfter(),r);return c('EditorState').push(k,m,'insert-characters');}f.exports=i;}),null);
__d('isSoftNewlineEvent',['Keys'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.which===c('Keys').RETURN&&(i.getModifierState('Shift')||i.getModifierState('Alt')||i.getModifierState('Control'));}f.exports=h;}),null);
__d('messengerUploadFilesUtilRe',['bs_array','bs_curry','bs_js_primitive','FantaTypeFileUploader'],(function a(b,c,d,e,f,g){'use strict';var h,i=(h={},h[c('FantaTypeFileUploader').fileTypes.ANIMATED_IMAGE]='gif_ids',h[c('FantaTypeFileUploader').fileTypes.AUDIO]='audio_ids',h[c('FantaTypeFileUploader').fileTypes.FILE]='file_ids',h[c('FantaTypeFileUploader').fileTypes.GENERIC_ATTACHMENT]='generic_attachment_ids',h[c('FantaTypeFileUploader').fileTypes.IMAGE]='image_ids',h[c('FantaTypeFileUploader').fileTypes.VIDEO]='video_ids',h);function j(n,o){if(c('bs_js_primitive').is_nil_undef(n)){return null;}else{var p=n.getTypeIDs(o);if(p.length){return p;}else return null;}}function k(n){if(c('bs_js_primitive').is_nil_undef(n)){return 0;}else{var o=n.get("uploadedFiles"),p=[],q=[],r=[];o.forEach(function(s,t,u){var v=s.file;if(v.type.startsWith("image/")){p.push(v);return 0;}else if(v.type.startsWith("video/")){q.push(v);return 0;}else{r.push(v);return 0;}});return [[p,q,r]];}}function l(n,o){if(o.length){return c('bs_curry')._1(n,o);}else return 0;}function m(n,o){if(c('bs_js_primitive').is_nil_undef(n)){return 0;}else if(c('bs_js_primitive').is_nil_undef(o)){return 0;}else{var p=k(n);if(p){var q=p[0];c('bs_array').iter(function(r){return l(o,[r]);},q[1]);l(o,q[0]);return l(o,q[2]);}else return 0;}}g.supportAttachments=i;g.getAttachmentIDs=j;g.getAttachments=k;g.sendAttchment=l;g.sendAttchments=m;}),null);
__d('ChatInput.react',['AbstractMentionsTextEditor.react','BootloadedComponent.react','Bootloader','CompositeDraftDecorator','ContentState','DraftModifier','EditorState','EmojiFormat','ifRequired','JSResource','MercuryConfig','MessengerEmojiSpan.react','MessengerEmoticonSpan.react','MessengerMentionsEntityDecorator.react','MessengerMentionSource','messengerUploadFilesUtilRe','React','ReactDOM','cancelAnimationFrame','clearImmediate','createMessengerMentionDraftEntity','createCancelableFunction','debounce','emptyFunction','getDefaultKeyBinding','getEntityMatcher','getProfileRangesForContentState','getThreadTypeNameFromThreadType','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','handleBeforeInputForMessengerEmoticon','handleSoftNewlineForMessengerEmoticon','insertEmoticonIntoEditorState','insertMentionIntoEditorState','insertMessengerEmojiIntoContentState','isSoftNewlineEvent','setImmediate','requestAnimationFrame'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('emptyFunction').thatReturnsNull,l=1,m='handled',n=8,o='not-handled';h=babelHelpers.inherits(p,c('React').Component);i=h&&h.prototype;function p(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=i.constructor).call.apply(r,[this].concat(u)),this.$ChatInput4=c('createCancelableFunction')(function(w,x){var y=w.participants,z=w.viewer,aa=w.thread;this.setState({mentionsSource:x(z,y,aa,c('MercuryConfig').MEME)});}.bind(this)),this.$ChatInput6=function(){var w=this.$ChatInput8(this.state.editorState.getCurrentContent());this.$ChatInput1=c('setImmediate')(function(){this.$ChatInput1=null;var x=c('EditorState').set(this.state.editorState,{decorator:w});this.setState({editorState:x});}.bind(this));}.bind(this),this.onChange=function(w){if(w!==this.state.editorState){this.setState({editorState:w});this.$ChatInput3(w);}}.bind(this),this.onReturn=function(event,w){if(c('isSoftNewlineEvent')(event)){var x=c('handleSoftNewlineForMessengerEmoticon');this.setState({editorState:x(w)});return m;}event.persist();this.setState({},function(){if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('messengerUploadFilesUtilRe').sendAttchments(this.props.fileUploader,this.props.uploadPhotoFn);this.props.inputKeyDown(event,this.getValue());}.bind(this));return m;}.bind(this),this.getValue=function(){return this.getValueFromEditorState(this.state.editorState);}.bind(this),this.$ChatInput9=function(w,x){this.props.onBeforeInput&&this.props.onBeforeInput();var y=this.$ChatInput10(w,x),z=this.$ChatInput11(w,x);return y||z?m:o;}.bind(this),this.$ChatInput13=function(w){return this.$ChatInput12(w);}.bind(this),this.$ChatInput14=function(w,x){return this.$ChatInput12(x);}.bind(this),this.state={editorState:this.$ChatInput7(this.props.defaultText)},this.$ChatInput17=function(){var w=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:w});}.bind(this),this.$ChatInput19=function(w,x){var y=(this.state.mentionsTriggeredCount||0)+1,z={mentionsTriggeredCount:y};if(!this.state.mentionsTriggerSource)z.mentionsTriggerSource=x===l?c('MessengerMentionSource').ATSIGN:c('MessengerMentionSource').TYPEAHEAD;this.setState(z);}.bind(this),this.$ChatInput16=function(w){return c('createMessengerMentionDraftEntity')(this.state.editorState.getCurrentContent(),w);}.bind(this),this.$ChatInput18=function(w){if(!this.refs.input.isShowingMentionables())this.props.onEscape&&this.props.onEscape(w);}.bind(this),s;}p.prototype.componentDidMount=function(){this.$ChatInput2=c('ReactDOM').findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this.$ChatInput2);this.props.initializeThingsWithInputFn(c('ReactDOM').findDOMNode(this.refs.input),this.getValue);this.setState({triggeredWord:this.props.triggeredWord});var r=this.props.onTextChange;this.$ChatInput3=r?c('debounce')(function(s){r(this.getValueFromEditorState(s),200);}.bind(this),200):c('emptyFunction');c('Bootloader').loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,this.props),'ChatInput.react');if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'ChatInput.react');};p.prototype.componentWillUnmount=function(){if(this.$ChatInput1)c('clearImmediate')(this.$ChatInput1);if(this.$ChatInput5)c('cancelAnimationFrame')(this.$ChatInput5);this.$ChatInput4.cancel();this.$ChatInput5=null;};p.prototype.componentWillReceiveProps=function(r){if(this.state.triggeredWord!==r.triggeredWord)this.setState({triggeredWord:r.triggeredWord},this.$ChatInput6);if(!this.props.thread||!r.thread||q(r,this.props))c('Bootloader').loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,r),'ChatInput.react');};p.prototype.componentDidUpdate=function(){this.$ChatInput5=c('requestAnimationFrame')(function(){if(!this.$ChatInput5)return;this.$ChatInput5=null;var r=c('ReactDOM').findDOMNode(this).getBoundingClientRect(),s=r.height;if(this.$ChatInput2!==s)this.props.resizeFn(s);this.$ChatInput2=s;}.bind(this));};p.prototype.$ChatInput7=function(r){var s=c('ContentState').createFromText(r);return c('EditorState').createWithContent(s,this.$ChatInput8(s));};p.prototype.resetState=function(){if(this.state.typeaheadReporter){this.state.typeaheadReporter.sessionEnd();this.state.typeaheadReporter.sessionStart();}this.setState({editorState:c('EditorState').moveFocusToEnd(this.$ChatInput7('')),triggeredWord:null,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null});};p.prototype.resetAfterSend=function(r){var s,t=this,u=this.getMentions();if(r&&(u&&u.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var v=t.state,w=v.addedMentionsCount,x=v.mentionsTriggeredCount,y=v.mentionsTriggerSource,z=t.props,aa=z.thread,ba=z.participants;c('Bootloader').loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(ca,da){new ca().setEvent(da.MENTION).setGroupSize(ba&&ba.length).setNumDelivered(u?u.length:0).setNumSelects(w).setNumTriggers(x).setThreadid(aa&&aa.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(aa&&aa.thread_type)).setOfflineThreadid(r.offline_threading_id).updateExtraData({source:y}).log();},'ChatInput.react');})();this.resetState();};p.prototype.$ChatInput8=function(r){var s=[{strategy:c('getEntityMatcher')(function(t){return t.getType()==='EMOTICON';},r.getEntity),component:c('MessengerEmoticonSpan.react')}];s.push({strategy:c('getEntityMatcher')(function(t){return t.getType()==='EMOJI';},r.getEntity),component:c('MessengerEmojiSpan.react')});s.push({strategy:c('getEntityMatcher')(function(t){return t.getType()==='MENTION';},r.getEntity),component:c('MessengerMentionsEntityDecorator.react')});return new (c('CompositeDraftDecorator'))(s);};p.prototype.getValueFromEditorState=function(r){var s=r.getCurrentContent();return c('getVisibleValueForContentStateWithMessengerEmoji')(s);};p.prototype.getMentions=function(){var r=this.props.thread;return c('getProfileRangesForContentState')(this.state.editorState.getCurrentContent(),r?r.thread_fbid:null);};p.prototype.focus=function(){this.refs.input&&this.refs.input.focus&&this.refs.input.focus();};p.prototype.$ChatInput10=function(r,s){var t=c('handleBeforeInputForMessengerEmoticon')(s,r);if(t===s)return false;this.setState({editorState:t});return true;};p.prototype.$ChatInput11=function(r,s){var t=c('handleBeforeInputForMessengerEmoji')(s,r);if(t===s)return false;this.setState({editorState:t});return true;};p.prototype.$ChatInput12=function(r){var s=/^image\//,t=r.filter(function(u){return s.test(u.type);});if(t.length){if(c('MercuryConfig').WWWMessengerUploadFilesPreview){c('ifRequired')('FantaMessageActions',function(u){u.prepareFilesForSend(this.props.threadID,t);}.bind(this),function(){c('Bootloader').loadModules(["FantaMessageActions"],function(u){u.prepareFilesForSend(this.props.threadID,t);}.bind(this),'ChatInput.react');}.bind(this));}else this.props.uploadPhotoFn(t[0]);return true;}return false;};p.prototype.insertEmoticon=function(r){var s=c('insertEmoticonIntoEditorState')(r,this.state.editorState);if(s!==this.state.editorState)this.setState({editorState:s});};p.prototype.insertEmoji=function(r){var s=this.state.editorState,t=c('insertMessengerEmojiIntoContentState')(c('EmojiFormat').codeArrayToCodeString(r),s.getCurrentContent(),s.getSelection(),s.getCurrentInlineStyle()),u=c('EditorState').push(s,t,'insert-characters');if(u!==this.state.editorState)this.setState({editorState:c('EditorState').forceSelection(u,t.getSelectionAfter())});};p.prototype.appendText=function(r){var s=this.state.editorState,t=s.getSelection(),u=s.getCurrentContent();u=c('DraftModifier').insertText(u,t,r);s=c('EditorState').push(s,u,'insert-characters');this.setState({editorState:s});};p.prototype.render=function(){var r=babelHelpers['extends']({},this.props,this.$ChatInput15());return c('React').createElement(c('AbstractMentionsTextEditor.react'),babelHelpers['extends']({ref:'input'},r,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this.$ChatInput9,handlePastedFiles:this.$ChatInput13,handleDroppedFiles:this.$ChatInput14,handleReturn:this.onReturn,spellCheck:true,stripPastedStyles:true,textAlignment:'left'}));};p.prototype.$ChatInput15=function(){return {autoHighlight:true,handleContentReturn:this.onReturn,maxResults:n,mentionResultsProps:{typeaheadView:c('BootloadedComponent.react').create(c('JSResource')('ChatMentionsInputTypeaheadView.react').__setRef('ChatInput.react')),typeaheadViewProps:{},position:'above',autoflip:true},mentionResultsComponent:c('BootloadedComponent.react').create(c('JSResource')('MentionsLayer.react').__setRef('ChatInput.react')),mentionCreationFn:this.$ChatInput16,mentionsSource:this.state.mentionsSource,onAddMention:this.$ChatInput17,onEscape:this.$ChatInput18,onShowMentions:this.$ChatInput19};};p.prototype.addMention=function(r){var s=c('insertMentionIntoEditorState')(r,this.state.editorState,0,this.$ChatInput16);if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c('MessengerMentionSource').REPLY});this.onChange(s);this.$ChatInput17();};p.propTypes={blockStyleFn:j.func,fileUploader:j.object,initializeThingsWithInputFn:j.func,inputKeyDown:j.func,keyBindingFn:j.func,onBeforeInput:j.func,onBlur:j.func,onEscape:j.func,onFocus:j.func,onTab:j.func,resizeFn:j.func,thread:j.object,threadID:j.string,viewer:j.string};p.defaultProps={blockStyleFn:k,keyBindingFn:c('getDefaultKeyBinding')};function q(r,s){var t=r.participants,u=s.participants;if(!t||!u)return true;var v=t.filter(Boolean),w=u.filter(Boolean);return v.length!==w.length;}f.exports=p;}),null);
__d('ChatPhotoUploader.react',['cx','fbt','Promise','Bootloader','ifRequired','InlineBlock.react','Link.react','MercuryConfig','MessengerEnvironment','React','ReactDOM','SubscriptionsHandler','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatPhotoUploader',_uploader:null,_uploaderPromiseIsResolving:false,_uploaderPromise:null,_subscriptions:null,propTypes:{actionURI:j.string,allowCrossPage:j.bool,customUI:j.bool,disabled:j.bool,imageClassName:j.string,imagesOnly:j.bool,inputClassname:j.string,linkClassName:j.string,threadID:j.string,focusInput:j.func,onSubmit:j.func,onAllUploadsComplete:j.func,onLastUploadFail:j.func,onLastUploadCancel:j.func,onMount:j.func,onUploadError:j.func},getDefaultProps:function l(){return {actionURI:c('MercuryConfig').upload_url,allowCrossPage:true,costomUI:false,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:'',onSubmit:c('emptyFunction'),onAllUploadsComplete:c('emptyFunction'),onLastUploadFail:c('emptyFunction'),onLastUploadCancel:c('emptyFunction')};},shouldComponentUpdate:function l(m){return m.actionURI!=this.props.actionURI||m.disabled!==this.props.disabled;},componentDidMount:function l(){if(this.props.onMount)this.props.onMount(this);if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('MessengerEnvironment').messengerui?c('Bootloader').loadModules(["MessengerActions"],c('emptyFunction'),'ChatPhotoUploader.react'):c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'ChatPhotoUploader.react');},componentDidUpdate:function l(m){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage);},componentWillUnmount:function l(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup();},render:function l(){var m=this.props.imagesOnly?i._("Add Photos"):i._("Add Files"),n=c('joinClasses')("_4q61"+(!this.props.customUI?' '+"_5f0v":'')+(!this.props.customUI?' '+"_509v":''),this.props.linkClassName),o=c('MercuryConfig').WWWMessengerUploadFilesPreview;return c('React').createElement('form',{action:this.props.actionURI,className:"_vzk",title:m,method:'post',onClick:function(p){p.stopPropagation();if(this.props.disabled)p.preventDefault();}.bind(this),ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('input',{type:'hidden',name:'images_only',value:this.props.imagesOnly}),c('React').createElement(c('InlineBlock.react'),{onClick:o?c('emptyFunction'):this._bootloadChatAutoSendPhotoUploader,className:c('joinClasses')(this.props.className,"_m _4q60 _3rzn")},c('React').createElement('input',{disabled:this.props.disabled,type:'file',className:c('joinClasses')(this.props.inputClassname,"_n _2__f"),name:'attachment[]',multiple:'true',accept:this.props.imagesOnly?'image/*':'*',ref:'input',title:m,onChange:o?function(event){this._handleInputOnChange(event,this.props.threadID);}.bind(this):c('emptyFunction')}),c('React').createElement(c('Link.react'),{className:n,tabIndex:-1},c('React').createElement('i',{className:this.props.imageClassName,alt:i._("Camera")}))));},_handleInputOnChange:function l(event,m){c('MessengerEnvironment').messengerui?c('ifRequired')('MessengerActions',function(n){return n.prepareFilesForSend(m,event.target.files);},function(){c('Bootloader').loadModules(["MessengerActions"],function(n){n.prepareFilesForSend(m,event.target.files);},'ChatPhotoUploader.react');}):c('ifRequired')('FantaMessageActions',function(n){return n.prepareFilesForSend(this.props.threadID,event.target.files);}.bind(this),function(){c('Bootloader').loadModules(["FantaMessageActions"],function(n){n.prepareFilesForSend(this.props.threadID,event.target.files);}.bind(this),'ChatPhotoUploader.react');}.bind(this));this.props.focusInput&&this.props.focusInput();},_handleSubmit:function l(m,n){this.props.onSubmit&&this.props.onSubmit(m,n);},_handleAllUploadsCompleted:function l(m,n){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(m,n);if(!this.isMounted())this._cleanup();},_handleLastUploadFailed:function l(m,n){this.props.onLastUploadFail&&this.props.onLastUploadFail(m,n);if(!this.isMounted())this._cleanup();},_handleLastUploadCanceled:function l(m,n){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(m,n);if(!this.isMounted())this._cleanup();},_handleUploadError:function l(m,n){this.props.onUploadError&&this.props.onUploadError(n);if(!this.isMounted())this._cleanup();},isUploading:function l(){return this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving;},_bootloadChatAutoSendPhotoUploader:function l(){if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new (c('Promise'))(function(m){c('Bootloader').loadModules(["ChatAutoSendPhotoUploader"],function(n){this._uploaderPromiseIsResolving=false;var o=new n(c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.input),c('ReactDOM').findDOMNode(this.refs.attachID),c('MercuryConfig').msgr_region);o.setAllowCrossPage(this.props.allowCrossPage);var p=new (c('SubscriptionsHandler'))();p.addSubscriptions(o.subscribe('submit',this._handleSubmit),o.subscribe('all-uploads-completed',this._handleAllUploadsCompleted),o.subscribe('last-upload-failed',this._handleLastUploadFailed),o.subscribe('last-upload-canceled',this._handleLastUploadCanceled),o.subscribe('file-upload-error',this._handleUploadError));this._subscriptions=p;this._uploader=o;m(this._uploader);}.bind(this),'ChatPhotoUploader.react');}.bind(this));}return this._uploaderPromise;},uploadFiles:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadFiles(m);}).done();},uploadURL:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadURL(m);}).done();},_cleanup:function l(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy();}});f.exports=k;}),null);
__d('ChatContentSearchContextualDialog.react',['cx','ContextualLayerAutoFlipHorizontal','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal'),c('LayerHideOnEscape')],displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:47,length:16}}}));f.exports=i;}),null);
__d('ChatContentSearchButton.react',['cx','fbt','BootloadOnRender.react','ChatFlyoutPlaceholder.react','ChatContentSearchContextualDialog.react','JSResource','LazyComponent.react','Link.react','ReactComponentWithPureRenderMixin','React','MercuryShareAttachmentRenderLocations','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=278,l=c('React').createClass({displayName:'ChatContentSearchButton',_clickGuard:false,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{clicked:j.bool,ContextualDialogClass:j.func,flyoutAlignment:j.oneOf(['left','right']),getQuery:j.func.isRequired,location:j.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),onLoad:j.func,onSelect:j.func.isRequired},getDefaultProps:function m(){return {flyoutAlignment:'left',location:c('MercuryShareAttachmentRenderLocations').CHAT};},getInitialState:function m(){return {query:'',shown:!!this.props.clicked};},componentDidMount:function m(){this.props.onLoad&&this.props.onLoad(this);},updateQuery:function m(){this.setState({query:this.props.getQuery()});},hideFlyout:function m(){this.setState(this.getInitialState());},render:function m(){return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,this.state.shown?"open":''),href:'#',onMouseDown:this._handleMouseDown,onClick:this._handleClick,role:'button',title:i._("Choose a GIF or sticker"),ref:'link'}),this.renderLayers());},renderLayers:function m(){if(!this.state.shown)return null;var n=this.props.ContextualDialogClass||c('ChatContentSearchContextualDialog.react');return c('React').createElement(n,{alignment:this.props.flyoutAlignment,contextRef:function(){return this.refs.link;}.bind(this),onBlur:this.hideFlyout,onToggle:this._handleContextualDialogToggle,shown:this.state.shown,width:k,key:'contextualDialog'},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{location:this.props.location,onEscKeyDown:this.hideFlyout,onSelect:this._handleSelect,query:this.state.query}),loader:c('JSResource')('ChatContentSearchFlyout.react').__setRef('ChatContentSearchButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}));},_handleMouseDown:function m(n){this._clickGuard=this.state.shown;},_handleClick:function m(n){n.stopPropagation();if(this.state.shown||this._clickGuard)return;this.setState({query:this.props.getQuery(),shown:!this.state.shown});},_handleSelect:function m(n,o){this.props.onSelect(n,o);this.hideFlyout();},_handleContextualDialogToggle:function m(n){this.setState({shown:n});}});f.exports=l;}),null);
__d('ChatEmojiButton.react',['cx','fbt','BootloadOnRender.react','ChatFlyoutPlaceholder.react','JSResource','LazyComponent.react','Link.react','ReactComponentWithPureRenderMixin','React','XUIContextualDialog.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=278,l=c('React').createClass({displayName:'ChatEmojiButton',_clickGuard:false,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{ContextualDialogClass:j.func.isRequired,flyoutAlignment:j.oneOf(['left','right']),fromChatTab:j.bool,onMount:j.func,onSelect:j.func,sendCustomEmoji:j.func,threadID:j.string},getDefaultProps:function m(){return {ContextualDialogClass:c('XUIContextualDialog.react'),flyoutAlignment:'left'};},getInitialState:function m(){return {shown:false};},componentDidMount:function m(){this.props.onMount&&this.props.onMount(this);},hideFlyout:function m(){this.setState(this.getInitialState());this.props.getInput&&this.props.getInput().focus();},render:function m(){return c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,this.state.shown?"open":''),href:'#',onMouseDown:this._handleMouseDown,onClick:this._handleClick,role:'button',title:i._("Choose an emoji"),ref:'link'},this.renderLayers());},renderLayers:function m(){if(!this.state.shown)return null;var n=this.props.ContextualDialogClass;return c('React').createElement(n,{alignment:this.props.flyoutAlignment,contextRef:function(){return this.refs.link;}.bind(this),offsetY:this.props.fromChatTab?-20:10,onBlur:this.hideFlyout,onToggle:this._handleContextualDialogToggle,shown:this.state.shown,width:k,key:'contextualDialog'},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{onCategorySelect:this._focusInput,onEscKeyDown:this.hideFlyout,onSelect:this._handleSelect,sendCustomEmoji:this.props.sendCustomEmoji,threadID:this.props.threadID,width:k}),loader:c('JSResource')('ChatEmojiFlyout.react').__setRef('ChatEmojiButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}));},_focusInput:function m(){this.props.getInput&&this.props.getInput().focus();},_handleMouseDown:function m(){this._clickGuard=this.state.shown;},_handleClick:function m(n){n.stopPropagation();if(this._clickGuard){this._clickGuard=false;return;}this.setState({shown:!this.state.shown});this._focusInput();},_handleSelect:function m(n){this.props.onSelect&&this.props.onSelect(n);},_handleContextualDialogToggle:function m(n){this.setState({shown:n});}});f.exports=l;}),null);
__d('ChatEventPlanButton.react',['cx','fbt','Bootloader','BootloadOnRender.react','ChatFlyoutPlaceholder.react','EventsActionsLogger','EventReminderActionsLogger','JSResource','LazyComponent.react','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={showFlyout:false},this.$ChatEventPlanButton2=false,this.$ChatEventPlanButton3=function(){c('EventReminderActionsLogger').logClickOnEntryPoint();c('Bootloader').loadModules(["EventReminderStateStore","EventReminderRequestHelper"],function(r,s){var t=r.getEvent(this.props.threadID);if(!this.$ChatEventPlanButton2)return;if(t&&t.exists){this.$ChatEventPlanButton1=true;if(!this.state.showFlyout){s.fetchEventReminder(this.props.threadID,t.eventID,function(){if(!this.$ChatEventPlanButton2)return;this.setState({showFlyout:true});}.bind(this));}else this.setState({showFlyout:false});}else{this.$ChatEventPlanButton1=false;this.setState({showFlyout:!this.state.showFlyout});}}.bind(this),'ChatEventPlanButton.react');}.bind(this),this.onToggle=function(r){if(r!==this.state.showFlyout)this.setState({showFlyout:r});}.bind(this),n;}l.prototype.componentDidMount=function(){this.$ChatEventPlanButton2=true;};l.prototype.componentWillUnmount=function(){this.$ChatEventPlanButton2=false;};l.prototype.render=function(){var m="_6gb _3k_u";return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{className:m,onClick:this.$ChatEventPlanButton3,ref:'event_plan',role:'button',title:i._("Start a plan")},this.$ChatEventPlanButton4()));};l.prototype.$ChatEventPlanButton4=function(){if(!this.state.showFlyout)return null;var m={alignment:'right',position:'above',contextRef:function(){return this.refs.event_plan;}.bind(this),shown:this.state.showFlyout,onToggle:this.onToggle},n={action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.MESSENGER_COMPOSER}]};return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{actionContext:n,dialogProps:m,flyoutNoSheet:true,isEditing:this.$ChatEventPlanButton1,threadID:this.props.threadID}),loader:c('JSResource')('ChatEventReminderContainer.react').__setRef('ChatEventPlanButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)});};f.exports=l;}),null);
__d('StickerContextualDialog.react',['cx','ContextualLayerAutoFlipHorizontal','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=7,j=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal')],displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:i,length:16}}}));j.WIDTH={NORMAL:312,WIDE:400};f.exports=j;}),null);
__d('StickersDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false});}),null);
__d('StickersActions',['StickersDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ADD_RECENT_STICKER:null,HIDE_FLYOUT:null,LOAD_RECENT_STICKERS:null,SELECT_STORE_PACK:null,SELECT_TRAY_PACK:null,SHOW_FLYOUT:null,TRAY_LOADED:null}),i={Types:h,addRecentSticker:function j(k){c('StickersDispatcher').dispatch({type:h.ADD_RECENT_STICKER,sticker:k});},hideStickerFlyout:function j(){c('StickersDispatcher').dispatch({type:h.HIDE_FLYOUT});},loadRecentStickers:function j(k){c('StickersDispatcher').dispatch({type:h.LOAD_RECENT_STICKERS,stickers:k});},selectStorePack:function j(k){c('StickersDispatcher').dispatch({type:h.SELECT_STORE_PACK,packID:k});},selectTrayPack:function j(k){c('StickersDispatcher').dispatch({type:h.SELECT_TRAY_PACK,packID:k});},showStickerFlyout:function j(k){c('StickersDispatcher').dispatch({type:h.SHOW_FLYOUT,threadID:k});},trayLoaded:function j(){c('StickersDispatcher').dispatch({type:h.TRAY_LOADED});}};f.exports=i;}),null);
__d('StickersStateStore',['FluxReduceStore','immutable','StickersActions','StickersConfig','StickersDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return c('immutable').Map({recentStickers:[],recentStickersLoaded:false,showFlyout:false,storePackID:null,threadID:null,trayLoaded:false,trayPackID:null});};j.prototype.reduce=function(k,l){var m=l,n=c('StickersActions').Types;switch(m.type){case n.ADD_RECENT_STICKER:var o=[m.sticker];k.get('recentStickers').forEach(function(p){if(p.id===m.sticker.id)return;o.push(p);});return k.set('recentStickers',o.splice(0,c('StickersConfig').max_mru_stickers));case n.HIDE_FLYOUT:return k.set('showFlyout',false);case n.LOAD_RECENT_STICKERS:return k.set('recentStickersLoaded',true).set('recentStickers',m.stickers);case n.SELECT_STORE_PACK:return k.set('storePackID',m.packID);case n.SELECT_TRAY_PACK:return k.set('trayPackID',m.packID).set('trayLoaded',true);case n.SHOW_FLYOUT:return k.set('showFlyout',true).set('threadID',m.threadID);case n.TRAY_LOADED:return k.set('trayLoaded',true);default:return k;}};function j(){h.apply(this,arguments);}f.exports=new j(c('StickersDispatcher'));}),null);
__d('ChatStickerButton.react',['cx','fbt','BootloadedComponent.react','JSResource','Link.react','React','StickerContextualDialog.react','StickersActions','StickersStateStore','XUISpinner.react','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=278;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.$ChatStickerButton1=false;this.renderLayers=function(){if(!this.state.shown)return null;var p=this.props.ContextualDialogClass;return c('React').createElement(p,{alignment:this.props.flyoutAlignment,className:"_5e-r",contextRef:function(){return this.refs.link;}.bind(this),onBeforeHide:this.$ChatStickerButton5,onBlur:this.$ChatStickerButton3,position:'above',shown:this.state.shown,width:this.props.flyoutWidth,key:'contextualDialog'},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('XUISpinner.react'),{size:'large'})),bootloadLoader:c('JSResource')('StickersFlyout.react').__setRef('ChatStickerButton.react'),className:this.props.flyoutClassName,onShown:function(q){if(this.props.onFlyoutShown)this.props.onFlyoutShown(q);}.bind(this),onHidden:function(){if(this.props.onFlyoutHidden)this.props.onFlyoutHidden();}.bind(this),onEscKeyDown:this.$ChatStickerButton3,onStickerSelect:this.$ChatStickerButton6,onEmoticonSelect:this.$ChatStickerButton7,shown:this.state.shown}));}.bind(this);this.$ChatStickerButton4=function(){this.$ChatStickerButton1=this.state.shown;}.bind(this);this.showFlyout=function(p){p&&p.stopPropagation();if(this.$ChatStickerButton1||this.props.disabled){this.$ChatStickerButton1=false;return;}c('StickersActions').showStickerFlyout(this.props.threadID);}.bind(this);this.$ChatStickerButton5=function(){if(this.state.shown)this.$ChatStickerButton3();}.bind(this);this.$ChatStickerButton3=function(){c('StickersActions').hideStickerFlyout();};this.$ChatStickerButton6=function(p){this.props.onStickerSelect(p);}.bind(this);this.$ChatStickerButton7=function(p){this.$ChatStickerButton3();this.props.onEmoticonSelect(p);}.bind(this);this.state={shown:!!o.clicked};}n.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad(this);this.$ChatStickerButton2=c('StickersStateStore').addListener(function(){var o=c('StickersStateStore').getState();if(o.get('showFlyout')&&o.get('threadID')===this.props.threadID){if(this.$ChatStickerButton1||this.props.disabled){this.$ChatStickerButton1=false;return;}this.setState({shown:true});}else{var p=this.props.getInput&&this.props.getInput();p&&p.focus&&p.focus();this.setState({shown:false});}}.bind(this));};n.prototype.componentWillUnmount=function(){if(this.state.shown)this.$ChatStickerButton3();this.$ChatStickerButton2&&this.$ChatStickerButton2.remove();};n.prototype.render=function(){return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,this.state.shown?"open":''),href:'#',onClick:this.showFlyout,onMouseDown:this.$ChatStickerButton4,role:'button',title:i._("Choose a sticker"),ref:'link'}),this.renderLayers());};n.propTypes={className:l.string,clicked:l.bool,ContextualDialogClass:l.func.isRequired,disabled:l.bool,flyoutClassName:l.string,flyoutWidth:l.number,getInput:l.func,onLoad:l.func,onStickerSelect:l.func.isRequired,onEmoticonSelect:l.func.isRequired,onFlyoutShown:l.func,onFlyoutHidden:l.func,threadID:l.string};n.defaultProps={clicked:false,ContextualDialogClass:c('StickerContextualDialog.react'),disabled:false,flyoutWidth:m,onStickerSelect:c('emptyFunction'),onEmoticonSelect:c('emptyFunction')};f.exports=n;}),null);
__d('CustomColorHighlighting.react',['cssVar','csx','cx','React','UserAgent','guid','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n="._fy2",o="._43by",p="._mh6",q=c('UserAgent').isEngine('Gecko')?"._mh6 *::-moz-selection":"._mh6 ::selection",r=c('UserAgent').isEngine('Gecko')?"._43by *::-moz-selection":"._43by ::selection",s=n+n,t=o+o,u=p+q,v=p+p,w=o+r,x="rgba(255, 255, 255, 0.3)";k=babelHelpers.inherits(y,c('React').PureComponent);l=k&&k.prototype;function y(z){l.constructor.call(this,z);this.state={id:'cch_'+c('guid')()};}y.prototype.componentWillMount=function(){this.$CustomColorHighlighting1();};y.prototype.componentWillUnmount=function(){this.$CustomColorHighlighting2();if(this.state.styleTag)document.head.removeChild(this.state.styleTag);};y.prototype.componentWillReceiveProps=function(z){if(this.props.customColor&&!z.customColor){this.$CustomColorHighlighting2();}else if(z.customColor!==this.props.customColor)this.$CustomColorHighlighting3(z.customColor);};y.prototype.render=function(){return c('React').createElement('span',{className:c('joinClasses')("_mh6",this.props.className),id:this.state.id},this.props.children);};y.prototype.$CustomColorHighlighting1=function(){var z=document.createElement('style');z.appendChild(document.createTextNode(''));document.head.appendChild(z);this.setState({styleSheet:z.sheet,styleTag:z},function(){return this.$CustomColorHighlighting3(this.props.customColor);}.bind(this));};y.prototype.$CustomColorHighlighting4=function(z,aa,ba){if(z.insertRule){z.insertRule(aa+'{'+ba+'}',0);}else if(z.addRule)z.addRule(aa,ba,0);};y.prototype.$CustomColorHighlighting5=function(z){if('removeRule' in z){z.removeRule(0);}else if('deleteRule' in z)z.deleteRule(0);};y.prototype.$CustomColorHighlighting2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$CustomColorHighlighting5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$CustomColorHighlighting5(this.state.styleSheet);}};y.prototype.$CustomColorHighlighting6=function(z){var aa=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z),ba=parseInt(aa[1],16),ca=parseInt(aa[2],16),da=parseInt(aa[3],16);return 'rgba('+ba+','+ca+','+da+',0.2)';};y.prototype.$CustomColorHighlighting3=function(z){this.$CustomColorHighlighting2();var aa=z||this.props.customColor;if(aa){var ba=this.$CustomColorHighlighting6(aa),ca='background: '+ba;this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+u,ca);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+' '+s,'color: '+aa);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+' '+t,'background-color: '+aa);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+v+' '+w,'background-color: '+x);}};y.propTypes={className:m.string,customColor:m.string};f.exports=y;}),null);
__d("MNBotsLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"});}),null);
__d("XWebGraphQLQueryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/webgraphql\/query\/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"}});}),null);
__d('WebGraphQLQueryBase',['invariant','WebGraphQLLegacyHelper','XWebGraphQLQueryController'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.$WebGraphQLQueryBase1=j;}i.prototype.__getVariables=function(){return this.$WebGraphQLQueryBase1;};i.prototype.__getDocID=function(){return this.constructor.__getDocID();};i.__getController=function(){return c('XWebGraphQLQueryController');};i.__getDocID=function(){h(0);};i.getURI=function(j){return c('WebGraphQLLegacyHelper').getURI({controller:this.__getController(),docID:this.__getDocID(),variables:j});};i.getLegacyURI=function(j){return c('WebGraphQLLegacyHelper').getURI({controller:this.__getController(),queryID:this.getQueryID(),variables:j});};i.getQueryID=function(){h(0);};f.exports=i;}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1193572474099061";};j.getQueryID=function(){"use strict";return "1132183563559860";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("XMessengerBotsMenuController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messenger\/commerce\/bots\/menu\/",{page_id:{type:"String",required:true}});}),null);
__d('MessengerBotMenuDataFetcher',['AsyncRequest','Cache','MessengerBotComposerWebGraphQLQuery','XMessengerBotsMenuController'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerBotMenuDataFetcher1=new (c('Cache'))();this.$MessengerBotMenuDataFetcher2=new (c('Cache'))();}h.prototype.getMenuItems=function(i,j,k){if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return;}var l=c('XMessengerBotsMenuController').getURIBuilder().setString('page_id',i).getURI();new (c('AsyncRequest'))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n);}.bind(this)).setErrorHandler(function(m){k();}).send();};h.prototype.getHasPageSetting=function(i,j,k,l){if(!this.$MessengerBotMenuDataFetcher2.has(i)){var m=c('MessengerBotComposerWebGraphQLQuery').getURI({node_id:i});new (c('AsyncRequest'))().setURI(m).setHandler(function(o){var p=o.payload.data.node,q=p&&p.commerce_page_settings||[];this.$MessengerBotMenuDataFetcher2.set(i,q);j(q.indexOf(l)!==-1);}.bind(this)).setErrorHandler(function(o){this.$MessengerBotMenuDataFetcher2.set(i,[]);k();}.bind(this)).send();}var n=this.$MessengerBotMenuDataFetcher2.get(i)||[];j(n.indexOf(l)!==-1);return n.indexOf(l)!==-1;};f.exports=new h();}),null);
__d('MessengerContextualDialog.react',['cx','AccessibleLayer','ContextualLayerAutoFlipHorizontal','ContextualLayerUpdateOnScroll','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=12,j=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal'),c('ContextualLayerUpdateOnScroll'),c('LayerHideOnEscape'),c('AccessibleLayer')],displayName:'MessengerContextualDialog',shouldSetARIAProperties:false,theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:i,length:16}}}));f.exports=j;}),null);
__d('MessengerBotMenuButton.react',['BootloadOnRender.react','ChatFlyoutPlaceholder.react','JSResource','LazyComponent.react','Link.react','MessengerBotMenuDataFetcher','MessengerBotsWebTypedLogger','MessengerContextualDialog.react','MessengerEnvironment','MNBotsLoggerEvents','React','XUIContextualDialog.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=302,l=280;h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MessengerBotMenuButton1=false,this.state={flyoutOpen:false,isLoading:false,menuItems:null},this.$MessengerBotMenuButton2=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerBotMenuButton6=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2();}.bind(this),this.$MessengerBotMenuButton4=function(){this.$MessengerBotMenuButton1=this.state.flyoutOpen;}.bind(this),this.$MessengerBotMenuButton3=function(event){event.stopPropagation();if(this.state.flyoutOpen||this.$MessengerBotMenuButton1)return;if(this.state.menuItems===null){this.setState({isLoading:true});this.$MessengerBotMenuButton7();}this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),o;}m.prototype.componentDidMount=function(){new (c('MessengerBotsWebTypedLogger'))().setEvent(c('MNBotsLoggerEvents').BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log();};m.prototype.componentWillUnmount=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2();};m.prototype.render=function(){return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{className:this.props.className,href:'#',onClick:this.$MessengerBotMenuButton3,onMouseDown:this.$MessengerBotMenuButton4,role:'button',ref:'link'}),this.$MessengerBotMenuButton5());};m.prototype.$MessengerBotMenuButton5=function(){if(!this.state.flyoutOpen)return null;var n=c('MessengerEnvironment').messengerui,o=n?k:l,p=n?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react');return c('React').createElement(p,babelHelpers['extends']({alignment:this.props.flyoutAlignment,width:o,position:'above',contextRef:function(){return this.refs.link;}.bind(this),onBeforeHide:this.$MessengerBotMenuButton6,onBlur:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen},this.props,{key:'contextualDialog'}),c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{onEscKeyDown:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$MessengerBotMenuButton2}),loader:c('JSResource')('MessengerBotMenuDialog.react').__setRef('MessengerBotMenuButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}));};m.prototype.$MessengerBotMenuButton7=function(){c('MessengerBotMenuDataFetcher').getMenuItems(this.props.pageID,function(n){this.setState({menuItems:n,isLoading:false});}.bind(this),function(){this.setState({menuItems:[],isLoading:false});}.bind(this));};m.propTypes={className:j.string,flyoutAlignment:j.string.isRequired,threadID:j.string.isRequired,pageID:j.string.isRequired};f.exports=m;}),null);
__d('MessengerGamesButton.react',['cx','fbt','JSResource','MessengerEnvironment','Link.react','React','MessengerContextualDialog.react','MessengerSpinner.react','BootloadOnRender.react','LazyComponent.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}));j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={flyoutOpen:false},this.$MessengerGamesButton1=false,this.$MessengerGamesButton2=function(t){this.setState({flyoutOpen:t});}.bind(this),this.$MessengerGamesButton3=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerGamesButton5=function(t){this.$MessengerGamesButton1=this.state.flyoutOpen;}.bind(this),this.$MessengerGamesButton4=function(t){t.stopPropagation();if(this.state.flyoutOpen||this.$MessengerGamesButton1)return;this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),p;}n.prototype.render=function(){var o=c('MessengerEnvironment').messengerui,p=(o?"_4ce_":'')+(o&&this.state.flyoutOpen?' '+"_5jhb":'')+(o?' '+"_39bk":'')+(o?' '+"_30yy":'')+(!o?' '+"_6gb":'')+(!o?' '+"_4cf0":''),q=null;if(this.state.flyoutOpen)q=c('React').createElement(c('MessengerContextualDialog.react'),{alignment:o?'right':'left',contextRef:function(){return this.refs.gamesButton;}.bind(this),shown:this.state.flyoutOpen,onToggle:this.$MessengerGamesButton2,onBlur:this.$MessengerGamesButton3},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{placeholder:m,threadFBID:this.props.threadFBID}),loader:c('JSResource')('MessengerGamesFlyout.react').__setRef('MessengerGamesButton.react'),placeholder:m}));return c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,p),onClick:this.$MessengerGamesButton4,onMouseDown:this.$MessengerGamesButton5,ref:'gamesButton',role:'button',title:i._("Play a Game")},q);};n.propTypes={className:l.string,threadFBID:l.string.isRequired};f.exports=n;}),null);
__d('MessengerGroupPollingButton.react',['cssVar','cx','fbt','BootloadOnRender.react','EventDateTimePollActionsLogger','EventsActionsLogger','EventsMessengerDateTimePollGating','JSResource','LazyComponent.react','Link.react','MessengerContextualDialog.react','MessengerEnvironment','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={flyoutOpen:false},this.$MessengerGroupPollingButton1=false,this.$MessengerGroupPollingButton2=function(t){this.setState({flyoutOpen:t});}.bind(this),this.$MessengerGroupPollingButton3=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerGroupPollingButton5=function(t){this.$MessengerGroupPollingButton1=this.state.flyoutOpen;}.bind(this),this.$MessengerGroupPollingButton4=function(t){t.stopPropagation();if(this.state.flyoutOpen||this.$MessengerGroupPollingButton1){return;}else c('EventDateTimePollActionsLogger').logClickOnEntryPoint({action_history:[{surface:c('EventsActionsLogger').Surface.MESSAGING,mechanism:c('EventsActionsLogger').Mechanism.MESSENGER_COMPOSER}]});this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),p;}n.prototype.render=function(){var o=this.props.customColor||"#0084ff",p=c('MessengerEnvironment').messengerui,q=null;if(this.state.flyoutOpen)q=c('React').createElement(c('MessengerContextualDialog.react'),{contextRef:function(){return this.refs.groupPollingButton;}.bind(this),shown:this.state.flyoutOpen,onToggle:this.$MessengerGroupPollingButton2,onBlur:this.$MessengerGroupPollingButton3},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:o,threadFBID:this.props.threadFBID,onSubmitHandler:this.$MessengerGroupPollingButton3}),loader:c('EventsMessengerDateTimePollGating').shouldShowEntrypoint?c('JSResource')('MessengerGroupPollingTypeSelectionFlyout.react').__setRef('MessengerGroupPollingButton.react'):c('JSResource')('MessengerGroupPollingCreatePollFlyout.react').__setRef('MessengerGroupPollingButton.react'),placeholder:c('React').createElement('div',{style:{padding:'15px',textAlign:'center',width:'125px'}},c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}))}));return c('React').createElement(c('Link.react'),{className:(p?"_39bk":'')+(p?' '+"_2o-b":'')+(p&&this.state.flyoutOpen?' '+"_5jhb":'')+(p?' '+"_30yy":'')+(!p?' '+"_6gb":'')+(!p?' '+"_4tjk":''),onClick:this.$MessengerGroupPollingButton4,onMouseDown:this.$MessengerGroupPollingButton5,ref:'groupPollingButton',role:'button',title:j._("Create a poll")},q);};n.propTypes={customColor:m.string,threadFBID:m.string.isRequired};f.exports=n;}),null);
__d('MercuryTriodeSourceUtil',['MessengerEnvironment','MercurySourceType'],(function a(b,c,d,e,f,g){'use strict';var h={getMercuryTriodeSource:function i(){return c('MessengerEnvironment').messengerdotcom?c('MercurySourceType').MESSENGER_WEB:c('MercurySourceType').TITAN_WEB;}};f.exports=h;}),null);
__d('MessengerHotLikeOutlineSVG.react',['cssVar','fbt','CurrentUser','React','MercuryShareAttachmentRenderLocations','uniqueID','UserAgent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='transparent',n=i._("Thumbs-up sign");j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={titleId:c('uniqueID')()},q;}o.prototype.render=function(){var p=this.props.color||(c('CurrentUser').isWorkUser()?"#1479fb":"#0084ff"),q=c('UserAgent').isBrowser('Safari')?'0 0 40.16 42.24':'-1 -1 40.16 42.24',r={height:this.props.height||'85%'};if(this.props.location!==c('MercuryShareAttachmentRenderLocations').CHAT&&this.props.location!==c('MercuryShareAttachmentRenderLocations').PAGES_INBOX)r.width='66%';return c('React').createElement('svg',{'aria-labelledby':this.state.titleId,version:'1.1',viewBox:q,preserveAspectRatio:'xMinYMax meet',style:r},c('React').createElement('title',{id:this.state.titleId},n),c('React').createElement('path',{d:'M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z',transform:'translate(-898.5 -1563.26)',fill:m,fillRule:'evenodd',stroke:p,strokeLinecap:'round',strokeWidth:'5%'}));};o.propTypes={color:l.string,height:l.string,location:l.string};f.exports=o;}),null);
__d('MessengerHotLikePreviewEvents',['mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h={START:'start',STOP:'stop',STOP_EMOJI:'stop_emoji',POP:'pop',REMOVE:'remove',FINISH_ANIMATION:'finish_animation',FINISH_EMOJI_ANIMATION:'finish_emoji_animation'};c('mixInEventEmitter')(h,{start:true,stop:true,stop_emoji:true,pop:true,remove:'remove',finish_animation:'finish_animation',finish_emoji_animation:'finish_emoji_animation'});f.exports=h;}),null);
__d("StickerAssetType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"});}),null);
__d("XStickerAssetController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}});}),null);
__d('MessengerHotLikeUtils',['EmojiLikeConstants','StickerAssetType','StickerConstants','XStickerAssetController'],(function a(b,c,d,e,f,g){'use strict';var h={SizeTimes:{small:1000,medium:2000,large:3000},getStickerIDForTime:function i(j){var k=c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID;switch(true){case j<this.SizeTimes.small:k=c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID;break;case j<this.SizeTimes.medium:k=c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID;break;case j<this.SizeTimes.large:k=c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID;break;}return k;},getEmojiSizeForTime:function i(j){var k=c('EmojiLikeConstants').size.SMALL;if(j<this.SizeTimes.small){k=c('EmojiLikeConstants').size.SMALL;}else if(j<this.SizeTimes.medium){k=c('EmojiLikeConstants').size.MEDIUM;}else if(j<this.SizeTimes.large)k=c('EmojiLikeConstants').size.LARGE;return k;},getMetadataForHotLike:function i(j){var k=void 0;switch(j){case c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID:k=120;break;case c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID:k=84;break;case c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID:k=35;break;case c('EmojiLikeConstants').size.LARGE:k=64;break;case c('EmojiLikeConstants').size.MEDIUM:k=64;break;case c('EmojiLikeConstants').size.SMALL:k=32;break;}return k?{height:k,width:k}:undefined;},getPreviewURI:function i(){return c('XStickerAssetController').getURIBuilder().setInt('sticker_id',c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID).setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString();},getURIWithID:function i(j){return c('XStickerAssetController').getURIBuilder().setInt('sticker_id',j).setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString();},getCustomEmojiFromThread:function i(j){return j&&j.custom_like_icon;}};f.exports=h;}),null);
__d('MessengerHotLikeButton.react',['cx','fbt','EmojiLikeConstants','Image.react','ImmutableObject','Keys','KeyStatus','Link.react','MercuryMessageObject','MercuryTriodeSourceUtil','MessengerEnvironment','MessengerHotLikePreviewEvents','MessengerHotLikeOutlineSVG.react','MessengerHotLikeUtils','MessengerSupportedEmojiUtils','React','StickerConstants','clearTimeout','ifRequired','joinClasses','setIntervalAcrossTransitions','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryMessageObject').get(),m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerHotLikeButton1=null,this.$MessengerHotLikeButton2=null,this.$MessengerHotLikeButton3=null,this.$MessengerHotLikeButton4=null,this.$MessengerHotLikeButton6=function(t){if(this.props.disabled||this.$MessengerHotLikeButton3){t.preventDefault();t.stopPropagation();}if(this.props.disabled||t.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$MessengerHotLikeButton3=Date.now();this.$MessengerHotLikeButton9();this.$MessengerHotLikeButton10();}.bind(this),this.$MessengerHotLikeButton8=function(){if(!(this.props.threadID&&this.$MessengerHotLikeButton3))return;this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton12();}.bind(this),this.$MessengerHotLikeButton14=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').POP,this.props.threadID);}.bind(this),this.$MessengerHotLikeButton7=function(){if(this.$MessengerHotLikeButton3){this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton14();}}.bind(this),this.$MessengerHotLikeButton5=function(t){t.stopPropagation();if(this.props.disabled)return;if(c('KeyStatus').getKeyDownCode()===c('Keys').RETURN||!this.props.threadID){var u=this.props.sendCustomLike;if(this.props.customLike&&u){u(this.props.customLike,c('MessengerHotLikeUtils').getEmojiSizeForTime(1));}else this.props.sendSticker(c('MessengerHotLikeUtils').getStickerIDForTime(1));}}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerHotLikeButton4=c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(o,p,q){if(o===this.props.threadID)if(q&&this.props.customLike&&this.props.sendCustomLike){this.props.sendCustomLike(this.props.customLike,q,c('EmojiLikeConstants').source.HOT_LIKE);}else this.props.sendSticker(p);}.bind(this));};n.prototype.componentWillUnmount=function(){this.$MessengerHotLikeButton4&&this.$MessengerHotLikeButton4.remove();};n.prototype.render=function(){var o=null,p={};if(this.props.customLike&&this.props.customLike.emoji){var q=this.props.customLike.emoji,r=c('MessengerSupportedEmojiUtils').getNewEmojiData(q,c('EmojiLikeConstants').size.SMALL),s=this.props.renderSize?this.props.renderSize:16;p.background='none';o=c('React').createElement(c('Image.react'),{src:r&&r.url,style:{padding:s==16?0:3,display:'block',height:s,width:s}});}else if(this.props.CustomRenderer){var t=this.props.CustomRenderer;o=c('React').createElement(t,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize});}else if(this.props.customColor)o=c('React').createElement(c('MessengerHotLikeOutlineSVG.react'),{color:this.props.customColor,location:this.props.location});var u=i._("Send a Like");return c('React').createElement(c('Link.react'),{'aria-label':u,className:c('joinClasses')(this.props.customColor||this.props.CustomRenderer?"_5j_u":'',this.props.className),disabled:this.props.disabled,href:'#',onClick:this.$MessengerHotLikeButton5,onDragStart:function v(w){return w.preventDefault();},onMouseDown:this.$MessengerHotLikeButton6,onMouseLeave:this.$MessengerHotLikeButton7,onMouseUp:this.$MessengerHotLikeButton8,role:'button',style:p,title:u},o);};n.prototype.$MessengerHotLikeButton9=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').START,this.$MessengerHotLikeButton13(),this.props.threadID);};n.prototype.$MessengerHotLikeButton12=function(){if(!this.props.threadID)return;if(!c('MessengerEnvironment').messengerui){c('ifRequired')('MessengerHotLikePreview.react',function(){c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);}.bind(this),function(){if(this.$MessengerHotLikeButton1!==null)return;this.$MessengerHotLikeButton1=c('setIntervalAcrossTransitions')(function(){c('ifRequired')('MessengerHotLikePreview.react',function(){if(this.$MessengerHotLikeButton1!==null){clearInterval(this.$MessengerHotLikeButton1);this.$MessengerHotLikeButton1=null;}c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);}.bind(this));}.bind(this),100);}.bind(this));}else c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);};n.prototype.$MessengerHotLikeButton13=function(){var o=this.props.threadID;if(!o)return null;var p=l.constructStickerMessageObject(c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),o);l.normalizeNewMessage(p);p.is_like_preview=true;p.like_preview_since=this.$MessengerHotLikeButton3;p.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;p.body='';return new (c('ImmutableObject'))(p);};n.prototype.$MessengerHotLikeButton10=function(){this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton2=c('setTimeoutAcrossTransitions')(this.$MessengerHotLikeButton14,c('MessengerHotLikeUtils').SizeTimes.large);};n.prototype.$MessengerHotLikeButton11=function(){c('clearTimeout')(this.$MessengerHotLikeButton2);};n.propTypes={CustomRenderer:m.func,onMouseDown:m.func,customLike:m.object,customColor:m.string,location:m.string,sendSticker:m.func.isRequired,sendCustomLike:m.func,threadID:m.string,disabled:m.bool,renderSize:m.number};f.exports=n;}),null);
__d('MessengerHotLikeChatSVGIcon.react',['cssVar','fbt','React','MercuryConfig','uniqueID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryConfig').ChatTabSutroIcons,m=c('React').PropTypes,n='transparent',o=i._("Thumbs-up sign");j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={titleId:c('uniqueID')()},r;}p.prototype.render=function(){var q=this.props.color||"#0084ff",r=this.props.renderSize,s=r?{height:r.toString(),width:r.toString()}:undefined,t=l?{fill:n,stroke:q,opacity:.2}:{fill:q,opacity:.2},u='bounds_'+this.state.titleId;return l?c('React').createElement('svg',babelHelpers['extends']({width:'32px',height:'31px','aria-labelledby':this.state.titleId,preserveAspectRatio:'xMinYMax meet',version:'1.1',viewBox:'0 0 32 32',xmlns:'http://www.w3.org/2000/svg'},s),c('React').createElement('title',{id:this.state.titleId},o),c('React').createElement('g',{stroke:'none',strokeWidth:'1',fill:'none',fillRule:'evenodd'},c('React').createElement('rect',{id:u,fill:n,width:'32',height:'32'}),c('React').createElement('g',{style:t},c('React').createElement('path',{d:'M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z',transform:'translate(-643 -439)'})),c('React').createElement('g',{transform:'translate(1.000000, 0.000000)'},c('React').createElement('path',{d:'M7.195,29.2559 L0.804,29.2559 C0.362,29.2559 0,28.8939 0,28.4509 L0,13.0609 C0,12.6179 0.362,12.2559 0.804,12.2559 L7.195,12.2559 C7.637,12.2559 8,12.6179 8,13.0609 L8,28.4509 C8,28.8939 7.637,29.2559 7.195,29.2559 Z',id:'Stroke-172',stroke:q,strokeWidth:'2'}),c('React').createElement('path',{d:'M15.9694,0 L15.9694,0 C14.6414,0 13.5214,0.568 13.0414,1.097 L12.4654,1.732 L12.5184,2.63 L12.8154,6.635 C12.8204,6.692 12.8074,6.749 12.7804,6.8 L9.5534,12.791 L8.1544,13.443 L6.9994,13.982 L6.9994,15.256 L6.9994,25.256 L6.9994,27.256 L8.5914,27.256 C8.7024,27.35 8.8354,27.47 8.9364,27.562 C9.1404,27.747 9.3424,27.928 9.5324,28.078 C10.4784,28.825 11.8634,29.174 12.8444,29.25 L12.9214,29.256 L12.9994,29.256 L23.3374,29.256 C25.3594,29.256 26.7824,28.521 27.5704,27.072 C28.0124,26.258 28.1384,25.438 28.0904,24.695 C28.9084,24.168 29.5624,23.33 29.7984,22.148 C29.9184,21.549 29.8984,20.985 29.7854,20.474 C30.4514,19.814 30.9374,18.865 30.9374,17.581 C30.9374,16.549 30.6654,15.739 30.2574,15.123 C30.4314,14.637 30.5364,14.081 30.5364,13.459 C30.5364,10.906 28.4954,9.256 25.3374,9.256 L21.0124,9.256 C21.1474,8.379 21.2494,7.521 21.2494,6.931 C21.2494,4.646 20.4484,1.775 18.2014,0.569 C17.4974,0.191 16.7464,0 15.9694,0 M15.9694,2 C16.3574,2 16.7974,2.085 17.2564,2.332 C18.6054,3.056 19.2494,5.021 19.2494,6.931 C19.2494,7.863 18.8974,9.829 18.7254,10.731 C18.6784,10.978 18.8684,11.256 19.1184,11.256 L25.3374,11.256 C26.2704,11.256 28.5364,11.456 28.5364,13.459 C28.5364,14.979 27.5584,15.534 27.5584,15.534 C27.5584,15.534 28.9374,15.673 28.9374,17.581 C28.9374,19.489 27.0854,19.682 27.0854,19.682 C27.0854,19.682 28.0924,20.481 27.8374,21.756 C27.5284,23.3 26.0264,23.391 25.6764,23.391 C25.6294,23.391 25.6044,23.389 25.6044,23.389 C25.6044,23.389 26.5714,24.723 25.8124,26.118 C25.5674,26.57 25.0414,27.256 23.3374,27.256 L12.9994,27.256 C12.2824,27.2 11.3154,26.937 10.7734,26.51 C10.1994,26.056 9.5134,25.256 8.9994,25.256 L8.9994,15.256 L10.6304,14.494 C10.8704,14.383 11.0674,14.197 11.1934,13.965 L14.5404,7.748 C14.7494,7.362 14.8424,6.924 14.8104,6.486 L14.5124,2.482 C14.5114,2.465 14.5114,2.453 14.5234,2.44 C14.5964,2.359 15.1744,2 15.9694,2',id:'Fill-174',fill:q})))):c('React').createElement('svg',babelHelpers['extends']({'aria-labelledby':this.state.titleId,preserveAspectRatio:'xMinYMax meet',version:'1.1',viewBox:'0 0 32 32',xmlns:'http://www.w3.org/2000/svg'},s),c('React').createElement('title',{id:this.state.titleId},o),c('React').createElement('g',null,c('React').createElement('rect',{id:u,fill:n,width:'32',height:'32'}),c('React').createElement('g',{style:t},c('React').createElement('path',{d:'M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z',transform:'translate(-643 -439)'})),c('React').createElement('g',{style:t},c('React').createElement('rect',{x:'2',y:'14',width:'6',height:'16',rx:'0.2',ry:'0.2'})),c('React').createElement('path',{fill:q,d:'M650.8,453a0.2,0.2,0,0,1,.2.2v15.6a0.2,0.2,0,0,1-.2.2h-5.6a0.2,0.2,0,0,1-.2-0.2V453.2a0.2,0.2,0,0,1,.2-0.2h5.6m0-2h-5.6a2.2,2.2,0,0,0-2.2,2.2v15.6a2.2,2.2,0,0,0,2.2,2.2h5.6a2.2,2.2,0,0,0,2.2-2.2V453.2a2.2,2.2,0,0,0-2.2-2.2h0Z',transform:'translate(-643 -439)'}),c('React').createElement('path',{fill:q,'data-name':'stroke',d:'M658.83,441c1.06,0,2.16,1,2.83,3a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66h1.18l5.59,0c2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2,2,2,0,0,1-2.07,1.91,0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.24,467,668.07,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41,2,2,0,0,1,1.17-.41m0-2h0a4,4,0,0,0-2.36.8,2.45,2.45,0,0,0-1,2.23l0.39,3.67h0v0.05l-1.41,5.32a3.64,3.64,0,0,1-.47.69l-2.19,1.59L651,454v11.15l0.36,0.52A7.58,7.58,0,0,0,658,469h10.07c3.25,0,4.95-1.21,5-3.59a4.54,4.54,0,0,0-.05-0.93,3.59,3.59,0,0,0,1.14-2.71,3.77,3.77,0,0,0-.18-1.15,3.85,3.85,0,0,0,1-2.57,4,4,0,0,0-.82-2.55,4.38,4.38,0,0,0,.31-2.25c-0.2-1.59-1.18-4.25-5.53-4.25l-5,0a12.65,12.65,0,0,0-.35-5.63c-0.91-2.75-2.67-4.38-4.73-4.38h0Z',transform:'translate(-643 -439)'})));};p.propTypes={color:m.string,location:m.string,renderSize:m.number};f.exports=p;}),null);
__d("XSetNUXSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/chat\/nux_seen\/",{setting_name:{type:"String"}});}),null);
__d('MessagingShowNUX.react',['AsyncRequest','ChatConfig','React','XSetNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={showNUX:!c('ChatConfig').get(this.props.settingName)},this.$MessagingShowNUX1=function(){if(!this.state.showNUX)return;c('ChatConfig').set(this.props.settingName,true);new (c('AsyncRequest'))(c('XSetNUXSeenController').getURIBuilder().getURI()).setData({setting_name:this.props.settingName}).send();this.setState({showNUX:false});this.props.onHidden();}.bind(this),m;}k.prototype.render=function(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this.props.contextRef,onCloseButtonClick:this.$MessagingShowNUX1,position:'left',width:'auto',shown:this.state.showNUX&&this.props.shown},this.props.children);};k.propTypes={children:j.any,contextRef:j.func.isRequired,onHidden:j.func.isRequired,settingName:j.string.isRequired,shown:j.bool.isRequired};f.exports=k;}),null);
__d("XMessagingQuickCamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/quick-cam\/",{thread_id:{type:"String",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('MessengerQuickCamButton.react',['fbt','AsyncRequest','ChatConfig','Link.react','React','MessagingShowNUX.react','XMessagingQuickCamController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='seen_cam_button_nux';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$MessengerQuickCamButton2=function(){this.setState({nuxShown:true,nuxOpen:false},function(){return this.$MessengerQuickCamButton3();}.bind(this));}.bind(this);this.$MessengerQuickCamButton1=function(){if(!this.state.nuxShown){this.setState({nuxOpen:true});}else this.$MessengerQuickCamButton3();}.bind(this);this.state={nuxOpen:false,nuxShown:!!c('ChatConfig').get(l)};}m.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{className:this.props.className,onClick:this.$MessengerQuickCamButton1,ref:'photoButton',role:'button',title:h._("Take a picture using quick cam")}),c('React').createElement(c('MessagingShowNUX.react'),{contextRef:function(){return this.refs.photoButton;}.bind(this),settingName:l,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButton2,ref:'camNUX'},h._("Send photos from your computer's camera.")));};m.prototype.$MessengerQuickCamButton3=function(){var n=c('XMessagingQuickCamController').getURIBuilder().setString('thread_id',this.props.threadID).getURI();new (c('AsyncRequest'))().setMethod('GET').setURI(n).setRelativeTo(this).setReadOnly(true).send();};m.propTypes={className:k.string.isRequired,threadID:k.string.isRequired};f.exports=m;}),null);
__d('MessengerQuickCamDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=new j({strict:false});}),null);
__d('MessengerQuickCamActions',['MessengerQuickCamDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CLOSE:null,COUNT_DOWN_TIMER:null,COUNT_DOWN_TIMER_START:null,PROCESS_RECORDING:null,REGISTER_QUICKCAM:null,REMOVE_ALL_LISTENERS:null,REQUEST_USER_MEDIA:null,RETAKE:null,SEND_PHOTO:null,SEND_VIDEO:null,SET_MEDIA:null,SHUTTER_OFF:null,STOP_VIDEO:null,TAKE_VIDEO:null,UPDATE_PROGRESS:null,UPLOAD_COMPLETE:null,UPLOAD_ERROR:null,USER_MEDIA_ERROR:null}),i={Types:h,close:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.CLOSE});},countDownTimer:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.COUNT_DOWN_TIMER});},countDownTimerStart:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.COUNT_DOWN_TIMER_START});},processRecording:function j(k){c('MessengerQuickCamDispatcher').dispatch({type:h.PROCESS_RECORDING,videoBlob:k});},registerQuickCam:function j(k,l){c('MessengerQuickCamDispatcher').dispatch({type:h.REGISTER_QUICKCAM,source:k,quickcam:l});},requestUserMedia:function j(k,l){c('MessengerQuickCamDispatcher').dispatch({type:h.REQUEST_USER_MEDIA,viewer:k,threadID:l});},retake:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.RETAKE});},sendPhoto:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.SEND_PHOTO});},sendVideo:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.SEND_VIDEO});},setMedia:function j(k,l){c('MessengerQuickCamDispatcher').dispatch({type:h.SET_MEDIA,videoSrc:k,videoStream:l});},stopVideo:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.STOP_VIDEO});},shutterOff:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.SHUTTER_OFF});},takeVideo:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.TAKE_VIDEO});},updateProgress:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.UPDATE_PROGRESS});},uploadError:function j(k){c('MessengerQuickCamDispatcher').dispatch({type:h.UPLOAD_ERROR,error:k});},uploadComplete:function j(k){c('MessengerQuickCamDispatcher').dispatch({type:h.UPLOAD_COMPLETE,data:k});},userMediaError:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.USER_MEDIA_ERROR});}};f.exports=i;}),null);
__d('MessengerQuickCamOrigins',[],(function a(b,c,d,e,f,g){'use strict';var h={CHAT_TAB:'chat tab',MESSENGER:'messenger',getValues:function i(){return [h.CHAT_TAB,h.MESSENGER];}};f.exports=h;}),null);
__d('MessengerQuickCamButtonHTML5.react',['cx','fbt','BootloadedComponent.react','ChatConfig','JSResource','Link.react','MessagingShowNUX.react','MessengerDialog.react','MessengerQuickCamActions','MessengerQuickCamOrigins','MessengerSpinner.react','React','XUIDialog.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='seen_cam_button_nux';j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.$MessengerQuickCamButtonHTML53=function(){this.setState({nuxOpen:false,nuxShown:true,dialogOpen:true});}.bind(this);this.$MessengerQuickCamButtonHTML56=function(){if(this.state.dialogOpen)this.setState({dialogOpen:false});}.bind(this);this.$MessengerQuickCamButtonHTML57=function(p){if(!p){this.$MessengerQuickCamButtonHTML56();}else c('MessengerQuickCamActions').requestUserMedia(this.props.viewer,this.props.threadID);}.bind(this);this.$MessengerQuickCamButtonHTML51=function(p){if(!this.state.nuxShown){this.setState({nuxOpen:true});return;}if(this.state.dialogOpen)return;p.stopPropagation();this.setState({dialogOpen:!this.state.dialogOpen});}.bind(this);this.state={dialogOpen:false,nuxShown:!!c('ChatConfig').get(m),nuxOpen:false};}n.prototype.render=function(){var o=this.props.textChild;return c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,"_30yy"),onClick:this.$MessengerQuickCamButtonHTML51,ref:'photoButton',role:'button',title:i._("Take a picture using quick cam")},!!o&&o,this.$MessengerQuickCamButtonHTML52());};n.prototype.$MessengerQuickCamButtonHTML52=function(){if(!this.state.nuxShown)return c('React').createElement(c('MessagingShowNUX.react'),{contextRef:function(){return this.refs.photoButton;}.bind(this),settingName:m,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButtonHTML53,ref:'camNUX'},i._("Send photos and videos from your computer's camera."));if(!this.state.dialogOpen)return null;return this.props.location===c('MessengerQuickCamOrigins').MESSENGER?this.$MessengerQuickCamButtonHTML54():this.$MessengerQuickCamButtonHTML55();};n.prototype.$MessengerQuickCamButtonHTML54=function(){var o=window.innerWidth/3;return c('React').createElement(c('MessengerDialog.react'),{overflow:'hidden',contextRef:function(){return this.refs.photoButton;}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),null)),bootloadLoader:c('JSResource')('MessengerQuickCamDialog.react').__setRef('MessengerQuickCamButtonHTML5.react'),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p);}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}));};n.prototype.$MessengerQuickCamButtonHTML55=function(){var o=window.innerWidth/3;return c('React').createElement(c('XUIDialog.react'),{overflow:'hidden',contextRef:function(){return this.refs.photoButton;}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,hideOnEscape:true,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('XUISpinner.react'),null)),bootloadLoader:c('JSResource')('MessengerQuickCamDialog.react').__setRef('MessengerQuickCamButtonHTML5.react'),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p);}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}));};n.propTypes={className:l.string.isRequired,location:l.oneOf(c('MessengerQuickCamOrigins').getValues()).isRequired,textChild:l.node,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=n;}),null);
__d('P2PAbstractSendMoneyButton.react',['cx','fbt','React','TooltipLink.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$P2PAbstractSendMoneyButton1=false,this.$P2PAbstractSendMoneyButton3=function(){this.props.onMouseDown&&this.props.onMouseDown();this.$P2PAbstractSendMoneyButton1=this.props.isActive;}.bind(this),this.$P2PAbstractSendMoneyButton2=function(r){r.stopPropagation();if(this.$P2PAbstractSendMoneyButton1){this.$P2PAbstractSendMoneyButton1=false;return;}this.props.onClick();}.bind(this),n;}l.prototype.render=function(){return c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:c('joinClasses')(this.props.className,(this.props.isActive?"open":'')+(this.props.isDisabled?' '+"disabled":'')+(this.props.isActive?' '+"_10gz":'')+(this.props.isDisabled?' '+"_10g-":'')+(!this.props.isMessenger&&!this.props.className?' '+"_5uqy":'')+(this.props.isMessenger?' '+"_3ggc":'')),href:'#',onClick:this.$P2PAbstractSendMoneyButton2,onMouseDown:this.$P2PAbstractSendMoneyButton3,onMouseOver:this.props.onMouseOver,position:'above',role:'button',title:this.$P2PAbstractSendMoneyButton4()},this.getButton());};l.prototype.getButton=function(){if(this.props.button)return this.props.button;return c('React').createElement('i',{className:"_5s8l"});};l.prototype.$P2PAbstractSendMoneyButton4=function(){if(this.props.isDisabled)return null;return i._("Send money");};f.exports=l;}),null);
__d('P2PSendMoneyContainerBootloader.react',['cx','Bootloader','MessengerEnvironment','DeferredComponent.react','MercuryIDs','P2PAbstractSendMoneyButton.react','P2PActions','P2PLoadingMask.react','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PSendMoneyDialogStore','React','ReactLayeredComponentMixin_DEPRECATED','XUIContextualDialog.react','emptyFunction','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('MessengerEnvironment').messengerui,k=j?282:260,l=c('React').createClass({displayName:'P2PSendMoneyContainerBootloader',propTypes:{button:i.node,className:i.string,ContextualDialog:i.func,flyoutAlignment:i.string,onTrigger:i.func,participantIDs:i.array,referrer:i.string,threadID:i.string},getInitialState:function m(){return {showPlaceholderDialog:false,shouldBootloadImmediately:c('P2PSendMoneyDialogStore').isAnyChatSendViewOpen()};},mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],_clicked:false,_onComponentLoad:c('emptyFunction'),_bootloadCalled:false,_sendMoneyDialogStoreSub:null,log:function m(n,o){c('P2PLogger').log(n,babelHelpers['extends']({www_event_referrer:this.props.referrer,www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND},o));},componentWillMount:function m(){if(this.state.shouldBootloadImmediately){this._bootloadComponentNow();}else this._sendMoneyDialogStoreSub=c('P2PSendMoneyDialogStore').addListener('change',this.onDialogStoreChange);},componentWillUnmount:function m(){this.removeDialogStoreSub();},onDialogStoreChange:function m(){this._bootloadComponentNow();this.removeDialogStoreSub();},removeDialogStoreSub:function m(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},onPlaceholderClick:function m(){var n=this.props.threadID?c('MercuryIDs').tokenize(this.props.threadID).value:null;this._handleDialogVisibility(!this.state.showPlaceholderDialog);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED,{object_id:n});this._bootloadComponentNow();this._clicked=false;},_handleDialogVisibility:function m(n){if(!n){c('P2PActions').chatSendViewClosed({threadID:this.props.threadID});}else c('P2PActions').chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID});this.setState({showPlaceholderDialog:n});},renderLayers:function m(){var n={};if(this.state.showPlaceholderDialog){var o=this.props.ContextualDialog||c('XUIContextualDialog.react');n.placeholderDialog=c('React').createElement(o,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:j?'right':'left',contextRef:function(){return this.refs.placeholderButton;}.bind(this),onBlur:function(){if(!this._clicked)this._handleDialogVisibility(false);this._clicked=false;}.bind(this),ref:'dialog',shown:true,width:k,position:'above'},c('React').createElement('div',{className:"_c_5"},c('React').createElement(c('P2PLoadingMask.react'),{visible:true})));}return n;},render:function m(){if(this._isPageChat())return null;return c('React').createElement(c('DeferredComponent.react'),babelHelpers['extends']({deferredComponent:this._bootloadComponent,deferredPlaceholder:this._renderPlaceholder()},this.props));},_renderPlaceholder:function m(){return c('React').createElement(c('P2PAbstractSendMoneyButton.react'),{button:this.props.button,className:this.props.className,isActive:false,isDisabled:false,isMessenger:j,onClick:this.onPlaceholderClick,onMouseDown:function(){this._clicked=true;}.bind(this),onMouseOver:this._bootloadComponentNow,ref:'placeholderButton'});},_bootloadComponent:function m(n){this._onComponentLoad=n.bind(this);},_bootloadComponentNow:function m(){if(this._bootloadCalled)return;this._bootloadCalled=true;c('Bootloader').loadModules(["P2PSendMoneyContainer.react"],function(n){this.removeDialogStoreSub();this._onComponentLoad(n);this.setState({showPlaceholderDialog:false});}.bind(this),'P2PSendMoneyContainerBootloader.react');},_isPageChat:function m(){return !!this._getPageID();},_getPageID:function m(){return c('getPageIDFromThreadID')(this.props.threadID);}});f.exports=l;}),null);
__d('isWebGLEnabled',[],(function a(b,c,d,e,f,g){'use strict';var h=null;function i(){try{var k=document.createElement('canvas');return Boolean(window.WebGLRenderingContext)&&Boolean(k.getContext('webgl')||k.getContext('experimental-webgl'));}catch(l){return false;}}function j(){if(h===null)h=i();return h;}f.exports=j;}),null);
__d('ChatTabComposer.react',['cssVar','csx','cx','fbt','BootloadOnRender.react','ChatConfig','ChatContentSearchButton.react','ChatEmojiButton.react','ChatEventPlanButton.react','ChatInput.react','ChatPhotoUploader.react','ChatStickerButton.react','CustomColorHighlighting.react','CSS','EventRemindersGating','FantaMessageActions','JSResource','Keys','LazyComponent.react','MercuryConfig','MercuryIDs','MessengerBotMenuButton.react','MessengerGamesButton.react','MessengerGroupPollingButton.react','MessengerHotLikeButton.react','MessengerHotLikeChatSVGIcon.react','MessengerHotLikeUtils','MessengerQuickCamButton.react','MessengerQuickCamButtonHTML5.react','MessengerQuickCamOrigins','P2PSendMoneyContainerBootloader.react','React','MercuryShareAttachmentRenderLocations','StickersActions','XUISpinner.react','clearImmediate','convertMIGColorToFIGColor','getPageIDFromThreadID','isWebGLEnabled','requireWeak','setImmediate'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o=77,p=9,q=c('MercuryConfig').ChatTabSutroIcons,r=c('ChatConfig').get('chat_basic_input_module')||c('ChatInput.react'),s=null;c('requireWeak')('FantaAppStore',function(u){return s=u;});l=babelHelpers.inherits(t,c('React').PureComponent);m=l&&l.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=m.constructor).call.apply(u,[this].concat(x)),this.state={inputHeight:0,stickerFlyoutShown:false},this.$ChatTabComposer2=null,this.$ChatTabComposer3=null,this.$ChatTabComposer10=function(z){var aa=this.props.threadID;if(aa)this.$ChatTabComposer1=c('setImmediate')(function(){this.$ChatTabComposer1=null;c('FantaMessageActions').composerTextUpdate(aa,z);}.bind(this));}.bind(this),this.$ChatTabComposer8=function(z){if(z.keyCode===c('Keys').RETURN){this.refs.emojiButton&&this.refs.emojiButton.hideFlyout();this.$ChatTabComposer10('');}this.props.inputKeyDown&&this.props.inputKeyDown(z);}.bind(this),this.$ChatTabComposer5=function(z){var aa=z.target;if(aa instanceof Element&&(c('CSS').matchesSelector(aa,"._1d4_")||c('CSS').matchesSelector(aa,"._552h")||c('CSS').matchesSelector(aa,"._552n")))this.refs.input.focus();}.bind(this),this.$ChatTabComposer9=function(z){if(this.state.stickerFlyoutShown)c('StickersActions').hideStickerFlyout();this.props.onEscape&&this.props.onEscape(z);this.$ChatTabComposer10('');}.bind(this),this.$ChatTabComposer25=function(z,aa){if(z.platformFBID.toString()!==c('MercuryConfig').MessengerAppID){this.uploadURL({attribution_app_id:z.platformFBID,errorDialogParams:{body:k._("There was a problem sending this GIF. Choose another one and try again."),title:k._("Couldn't Send GIF")},external_image_url:z.source.url,preview_url:z.media.preview?z.media.preview.url:z.media.thumbnail.url,source:z.source});}else this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect&&this.props.stickerButtonProps.onStickerSelect(z.resultID.toString);}.bind(this),this.$ChatTabComposer26=function(z){this.refs.input&&this.refs.input.insertEmoji&&this.refs.input.insertEmoji(z);}.bind(this),v;}t.prototype.render=function(){var u=this.props.disableInput?null:c('React').createElement('ul',{className:"_552n"+(q?' '+"_22v_":'')},this.$ChatTabComposer4());return c('React').createElement('div',{className:"_1d4_",onClick:this.$ChatTabComposer5,role:'presentation'},this.$ChatTabComposer6(),u);};t.prototype.componentWillUnmount=function(){if(this.$ChatTabComposer1)c('clearImmediate')(this.$ChatTabComposer1);};t.prototype.resetInput=function(u){this.refs.input.resetAfterSend(u);};t.prototype.uploadURL=function(u){var v=this.$ChatTabComposer2||this.$ChatTabComposer3;if(!v)return;v.uploadURL(u);};t.prototype.isUploading=function(){return !!(this.$ChatTabComposer2&&this.$ChatTabComposer2.isUploading()||this.$ChatTabComposer3&&this.$ChatTabComposer3.isUploading());};t.prototype.getInput=function(){return this.refs.input;};t.prototype.$ChatTabComposer6=function(){var u={};if(this.state.inputHeight)u.minHeight=this.state.inputHeight;var v=null;if(this.props.showStructuredMenu)v=c('React').createElement('div',{className:"_5c6-"},c('React').createElement(c('MessengerBotMenuButton.react'),{flyoutAlignment:'left',threadID:this.props.threadID,pageID:this.props.pageID,className:"_5c6_"}));var w='',x=this.props.threadID;if(x&&s){var y=s.getState().mercury.tabContents.get(x);w=y&&y.composerText||'';}var z='';if(this.props.disableInput){z=k._("Composer is disabled for this thread.");}else if(this.props.thread&&!this.props.thread.is_canonical){z=k._("Type a message, \u0040name...");}else z=k._("Type a message...");return c('React').createElement('div',{className:"_552h",style:u},v,c('React').createElement('div',{className:this.props.showStructuredMenu?"_4yzj":''},c('React').createElement(c('CustomColorHighlighting.react'),{customColor:this.props.thread&&this.props.thread.custom_color},c('MercuryConfig').WWWMessengerUploadFilesPreview&&this.$ChatTabComposer7(this.props.threadID),c('React').createElement(r,{defaultText:w,fileUploader:this.props.fileUploader,initializeThingsWithInputFn:this.props.initializeThingsWithInputFn,inputKeyDown:this.$ChatTabComposer8,onBeforeInput:function(){return this.refs.emojiButton&&this.refs.emojiButton.hideFlyout();}.bind(this),onBlur:this.props.onBlur,onEscape:this.$ChatTabComposer9,onFocus:this.props.onFocus,onTab:this.props.onTab,readOnly:this.props.disableInput,ref:'input',resizeFn:function(aa){aa=Math.min(aa,o);this.setState({inputHeight:aa});this.props.resizeFn&&this.props.resizeFn(aa);}.bind(this),thread:this.props.thread,threadID:this.props.threadID,onTextChange:this.$ChatTabComposer10,uploadPhotoFn:function(aa){this.$ChatTabComposer3&&this.$ChatTabComposer3.uploadFiles([].concat(aa));}.bind(this),participants:this.props.participants,placeholder:z,viewer:this.props.viewer}))));};t.prototype.$ChatTabComposer7=function(u){if(!u)return null;var v=this.props.fileUploader;if(!v)return null;var w=v.get('uploadedFiles');if(w.size==0)return null;var x=this.props.thread,y=x&&x.custom_color?x.custom_color:"#0084ff";return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{files:w,small:true,threadID:u,threadCustomColor:y,onClick:this.$ChatTabComposer11}),loader:c('JSResource')('MercuryStageFilePreviewReactComponent').__setRef('ChatTabComposer.react'),placeholder:c('React').createElement(c('XUISpinner.react'),{className:"_2qf"})});};t.prototype.$ChatTabComposer11=function(u,v){c('FantaMessageActions').cancelFileUpload(u,v);};t.prototype.$ChatTabComposer4=function(){var u=[this.$ChatTabComposer12(),this.$ChatTabComposer13(),this.$ChatTabComposer14(),this.$ChatTabComposer15(),this.$ChatTabComposer16(),this.$ChatTabComposer17(),this.$ChatTabComposer18(),this.$ChatTabComposer19(),this.$ChatTabComposer20()],v=u.filter(Boolean),w=this.$ChatTabComposer21();if(w&&v.length<p)v.push(w);var x=this.$ChatTabComposer22();if(x&&v.length<p&&c('EventRemindersGating').shouldShowComposer)v.push(x);return v;};t.prototype.$ChatTabComposer12=function(){var u=this.props.photoUploaderProps||{};return c('React').createElement('li',{className:"_13f-",key:'photos'},c('React').createElement(c('ChatPhotoUploader.react'),babelHelpers['extends']({onMount:function(v){return this.$ChatTabComposer3=v;}.bind(this)},u)));};t.prototype.$ChatTabComposer21=function(){var u=c('convertMIGColorToFIGColor')(this.props.thread&&this.props.thread.custom_color),v=this.$ChatTabComposer23();if(v&&this.props.thread&&!this.props.thread.is_canonical)return c('React').createElement('li',{className:"_6gd _13f_",key:'group_polling'},c('React').createElement(c('MessengerGroupPollingButton.react'),{customColor:u,threadFBID:v}));return null;};t.prototype.$ChatTabComposer18=function(){var u=c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')(),v=this.$ChatTabComposer23();return u&&v&&!this.$ChatTabComposer24()?c('React').createElement('li',{className:"_6gd _13ga",key:'games'},c('React').createElement(c('MessengerGamesButton.react'),{threadFBID:v})):null;};t.prototype.$ChatTabComposer22=function(){return this.props.threadID&&!this.$ChatTabComposer24()?c('React').createElement('li',{className:"_6gd _13gb",key:'eventPlan'},c('React').createElement(c('ChatEventPlanButton.react'),{threadID:this.props.threadID})):null;};t.prototype.$ChatTabComposer17=function(){if(this.props.disableFileUploads)return null;var u=this.props.fileUploaderProps||{};return c('React').createElement('li',{className:"_13gd",key:'files'},c('React').createElement(c('ChatPhotoUploader.react'),babelHelpers['extends']({onMount:function(v){return this.$ChatTabComposer2=v;}.bind(this)},u)));};t.prototype.$ChatTabComposer13=function(){var u=this.props.stickerButtonProps;if(!u)return null;return c('React').createElement('li',{className:"_6gd _13ge",key:'stickers'},c('React').createElement(c('ChatStickerButton.react'),babelHelpers['extends']({},u,{onFlyoutShown:function(){this.refs.input.focus();this.setState({stickerFlyoutShown:true});}.bind(this),onFlyoutHidden:function(){this.setState({stickerFlyoutShown:false});}.bind(this)})));};t.prototype.$ChatTabComposer14=function(){return c('React').createElement('li',{className:"_6gd _13gf",key:'contentsearch'},c('React').createElement(c('ChatContentSearchButton.react'),{className:"_6gb _6gs",getQuery:function(){return this.refs.input.getValue();}.bind(this),onSelect:this.$ChatTabComposer25}));};t.prototype.$ChatTabComposer15=function(){if(!c('ChatConfig').get('www_messenger_emoji_picker'))return null;return c('React').createElement('li',{className:"_6gd _13gg",key:'emojipicker'},c('React').createElement(c('ChatEmojiButton.react'),{className:"_6gb _3oxr",flyoutAlignment:'right',fromChatTab:true,getInput:function(){return this.refs.input;}.bind(this),onSelect:this.$ChatTabComposer26,ref:'emojiButton',sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}));};t.prototype.$ChatTabComposer20=function(){if(!c('ChatConfig').get('hotlike'))return null;var u=this.props.thread,v=c('convertMIGColorToFIGColor')(u&&u.custom_color)||'',w=c('MessengerHotLikeChatSVGIcon.react'),x="_6gb";return c('React').createElement('li',{className:"_6gd _5ep3 _13gi",key:'like'},c('React').createElement(c('MessengerHotLikeButton.react'),{className:x,customColor:v,customLike:c('MessengerHotLikeUtils').getCustomEmojiFromThread(u)||undefined,CustomRenderer:w,location:c('MercuryShareAttachmentRenderLocations').CHAT,renderSize:16,sendSticker:this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID}));};t.prototype.$ChatTabComposer16=function(){if(!this.props.p2pProps||!this.props.showP2PButton||this.$ChatTabComposer24())return null;var u=this.props.p2pProps;u.threadID=this.props.threadID;if(this.props.participantIDs&&this.props.participantIDs.length)u.participantIDs=this.props.participantIDs;return c('React').createElement('li',{className:"_6gd _13gj",key:'p2p'},c('React').createElement(c('P2PSendMoneyContainerBootloader.react'),u));};t.prototype.$ChatTabComposer19=function(){if(c('MercuryIDs').isLocalThread(this.props.threadID)||!c('ChatConfig').get('messenger_www_quickcam'))return null;var u=c('React').createElement(c('MessengerQuickCamButton.react'),{className:"_6gb _5yhk",threadID:this.props.threadID});if(c('ChatConfig').get('messenger_www_html5_quickcam'))u=c('React').createElement(c('MessengerQuickCamButtonHTML5.react'),babelHelpers['extends']({location:c('MessengerQuickCamOrigins').CHAT_TAB,viewer:this.props.viewer},u.props));return c('React').createElement('li',{className:"_6gd _13gk",key:'quickcam'},u);};t.prototype.$ChatTabComposer24=function(){return !!this.$ChatTabComposer27();};t.prototype.$ChatTabComposer27=function(){return c('getPageIDFromThreadID')(this.props.threadID);};t.prototype.$ChatTabComposer23=function(){if(this.props.threadID&&!c('MercuryIDs').isLocalThread(this.props.threadID))return c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID);if(this.props.thread&&this.props.thread.thread_fbid)return this.props.thread.thread_fbid;return null;};t.prototype.replyToMention=function(u){this.refs.input&&this.refs.input.addMention&&this.refs.input.addMention(u);};t.propTypes={disableInput:n.bool.isRequired,disableFileUploads:n.bool,fileUploaderProps:n.object,initializeThingsWithInputFn:n.func,inputKeyDown:n.func,onBlur:n.func,onCustomLikeSelect:n.func,onEmojiSelect:n.func,onEscape:n.func,onFocus:n.func,onTab:n.func,p2pProps:n.object,pageID:n.string,participantIDs:n.arrayOf(n.string),photoUploaderProps:n.object,resizeFn:n.func,showP2PButton:n.bool,showStructuredMenu:n.bool.isRequired,stickerButtonProps:n.object,thread:n.object,threadID:n.string,uploadPhotoFn:n.func,viewer:n.string};f.exports=t;}),null);
__d('ChatTabComposerContainer.react',['cx','fbt','Arbiter','Bootloader','ChatTabComposer.react','MercuryConfig','MercuryIDs','MercuryThreads','MercuryMessageActions','MessengerBotMenuDataFetcher','MercuryParticipants','MNCommercePageSetting','P2PGKValues','ReactComponentWithPureRenderMixin','React','MercuryShareAttachmentRenderLocations','SearchableEntry','SimpleXUIDialog','StoreAndPropBasedStateMixin','getPageIDFromThreadID','getThreadTypeNameFromThreadType','nullthrows','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='right',k=c('React').PropTypes,l=c('React').createClass({displayName:'ChatTabComposerContainer',_arbiterToken:null,mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryThreads'),c('MercuryParticipants'))],propTypes:{disableInput:k.bool.isRequired,fileUploader:k.object,threadID:k.string,viewer:k.string.isRequired,onFileUploadFail:k.func,onPhotoUploadFail:k.func,onStickerSelect:k.func,onUploadCancel:k.func,onUploadComplete:k.func,onUploadSubmit:k.func},statics:{calculateState:function m(n){var o=c('MercuryThreads').getForFBID(n.viewer),p=n.threadID?o.getOrFetch(n.threadID):null,q=c('P2PGKValues').P2PVisible&&n.viewer!==c('MercuryIDs').getUserIDFromThreadID(n.threadID),r=c('getPageIDFromThreadID')(n.threadID),s=r===null||r===undefined?false:c('MessengerBotMenuDataFetcher').getHasPageSetting(r,function(){},function(){},c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED),t=p&&p.participants?p.participants.map(c('MercuryParticipants').getOrFetch,c('MercuryParticipants')):[];return {thread:p,participants:t,showP2PButton:q,pageID:r,showStructuredMenu:s};}},componentDidMount:function m(){this.props.onMount(this);if(c('MercuryConfig').MentionsReplyEvent)this._arbiterToken=c('Arbiter').subscribe(c('MercuryConfig').MentionsReplyEvent,this._handleReplyToMention);if(this.state.pageID)c('MessengerBotMenuDataFetcher').getHasPageSetting(this.state.pageID,function(n){this.setState({showStructuredMenu:n});}.bind(this),function(){this.setState({showStructuredMenu:false});}.bind(this),c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED);},componentWillReceiveProps:function m(n){if(n.threadID!==this.props.threadID)this.setState({participantIDs:[],participants:[]});},componentWillUnmount:function m(){if(this._arbiterToken)c('Arbiter').unsubscribe(this._arbiterToken);},render:function m(){return c('React').createElement(c('ChatTabComposer.react'),babelHelpers['extends']({fileUploader:this.props.fileUploader,fileUploaderProps:this._getFileUploaderProps(),ref:'composer',thread:this.state.thread},this.props,{disableInput:this.props.disableInput,p2pProps:this._getP2PProps(),pageID:this.state.pageID,participantIDs:this.state.participantIDs,participants:this.state.participants,photoUploaderProps:this._getPhotoUploaderProps(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this._getStickerButtonProps()}));},onSend:function m(n){var o,p=this;if(n&&n.profile_ranges&&n.profile_ranges.length)(function(){var q=n,r=p.state,s=r.thread,t=r.participants;c('Bootloader').loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(u,v){new u().setEvent(v.MENTION).setGroupSize(t&&t.length).setNumDelivered((q.profile_ranges||[]).length).setThreadid(s&&s.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(s&&s.thread_type)).setOfflineThreadid(q.offline_threading_id).log();},'ChatTabComposerContainer.react');})();this.refs.composer.resetInput(n);},setParticipantIDs:function m(n){n=n||[];this.setState({participantIDs:n});},getInput:function m(){return this.refs.composer.getInput();},isUploading:function m(){return this.refs.composer.isUploading();},_getP2PProps:function m(){if(!this.state.showP2PButton)return {};return {button:c('React').createElement('i',{className:"hidden_elem"}),className:"_6ga _6gb",flyoutAlignment:j,referrer:c('MercuryShareAttachmentRenderLocations').CHAT,threadID:this.props.threadID,onTrigger:this.props.onP2PTrigger};},_getStickerButtonProps:function m(){var n={className:"_6gb _6gf",flyoutAlignment:j,threadID:this.props.threadID,onStickerSelect:this.props.onStickerSelect};return n;},_getPhotoUploaderProps:function m(){var n={className:"_6gd",customUI:true,imageClassName:"hidden_elem",linkClassName:"_6gb _6ge",threadID:this.props.threadID,onLastUploadCancel:this._handleUploadCancel,onAllUploadsComplete:this._handleUploadComplete,onLastUploadFail:this._handlePhotoUploadFail,onUploadError:this._handleUploadError,onSubmit:this._handleUploadSubmit};return n;},_getFileUploaderProps:function m(){var n=this._getPhotoUploaderProps();n.linkClassName="_6gb _6gg";n.imagesOnly=false;n.onLastUploadFail=this._handleFileUploadFail;return n;},_handleUploadComplete:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).confirmAttachmentPlaceholder(o.upload_id,o);this.props.onUploadComplete&&this.props.onUploadComplete(o);},_handleUploadError:function m(n){var o=void 0,p=void 0;switch(n.error){case 'size-exceeded':o=i._("The file you have selected is too large");p=i._("The file you have selected is too large. The maximum size is 25MB.");break;default:o=i._("File Upload Failed");p=i._("There was a problem uploading the file.");}this._showErrorDialog(o,p);this.props.onFileUploadFail&&this.props.onFileUploadFail(n);},_handleUploadCancel:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);this.props.onUploadCancel&&this.props.onUploadCancel(o);},_handleFileUploadFail:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);var p=i._("File Upload Failed"),q=i._("There was a problem uploading the file.");if(o.errorDialogParams){p=o.errorDialogParams.title||p;q=o.errorDialogParams.body||q;}this._showErrorDialog(p,q);this.props.onFileUploadFail&&this.props.onFileUploadFail(o);},_handlePhotoUploadFail:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);var p=i._("Photo Upload Failed"),q=i._("Please try again. Make sure you are uploading a valid photo.");if(o.errorDialogParams){p=o.errorDialogParams.title||p;q=o.errorDialogParams.body||q;}this._showErrorDialog(p,q);this.props.onPhotoUploadFail&&this.props.onPhotoUploadFail(o);},_handleUploadSubmit:function m(n,o){this.props.onUploadSubmit&&this.props.onUploadSubmit(o);},_showErrorDialog:function m(n,o){c('SimpleXUIDialog').show(o,n);},_handleReplyToMention:function m(n,event){if(event.threadID===this.props.threadID)c('MercuryParticipants').get(event.participantID,function(o){if(!o||!this.refs.composer)return;var p=new (c('SearchableEntry'))({uniqueID:c('nullthrows')(o.fbid),title:'@'+o.name});c('setImmediate')(function(){this.refs.composer.getInput().focus();this.refs.composer.replyToMention&&this.refs.composer.replyToMention(p);}.bind(this));}.bind(this));}});f.exports=l;}),null);
__d('MercuryThreadTitle.react',['fbt','MercuryIDs','MessengerTextWithEmoticons.react','MercuryParticipantListRenderer','MercuryParticipants','React','TextWithEmoticons.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryThreadTitle',propTypes:{isNewThread:i.bool,thread:i.object.isRequired,viewer:i.string.isRequired,showUnreadCount:i.bool,useShortName:i.bool,useAndSeparator:i.bool},getDefaultProps:function k(){return {isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};},getInitialState:function k(){return {participantNames:''};},componentDidMount:function k(){this._renderParticipantsList(this.props);},componentWillReceiveProps:function k(l){this._renderParticipantsList(l);},render:function k(){return c('React').createElement('span',{className:this.props.className},this.props.thread.name?this._renderThreadTitle():this.state.participantNames,this.props.children);},getTitle:function k(){return this.state.participantNames;},_renderThreadTitle:function k(){var l=this.props.thread,m=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:l.name});if(!l.unread_count||!this.props.showUnreadCount)return m;return this._renderTitleWithUnreadCount(m,l.unread_count);},_renderParticipantsList:function k(l){if(l.thread.name)return;this.setState({participantNames:''});var m=c('MercuryIDs').getParticipantIDFromUserID(l.viewer),n=l.thread.participants||[];if(n.length>1)n=n.filter(function(o){return o!=m;});c('MercuryParticipants').getMulti(n,function(o){if(!this.isMounted())return;var p=n.map(function(v){return o[v];}),q=l.thread.custom_nickname?{}:null,r=c('MessengerTextWithEmoticons.react');if(q)for(var s in l.thread.custom_nickname)q[s]=c('React').createElement(r,{renderEmoticons:true,renderEmoji:true,text:l.thread.custom_nickname[s]});var t=new (c('MercuryParticipantListRenderer'))().setUseShortName(l.useShortName).setUseAndSeparator(l.useAndSeparator).setIsNewThread(l.isNewThread).setNickname(q).renderParticipantList(p),u=l.showUnreadCount&&l.thread.unread_count?this._renderTitleWithUnreadCount(t,l.thread.unread_count):t;this.setState({participantNames:u});}.bind(this));},_renderTitleWithUnreadCount:function k(l,m){return h._("{conversation-title} ({unread-count})",[h.param('conversation-title',l),h.param('unread-count',m)]);}});f.exports=j;}),null);
__d('ChatTitleLink.react',['cx','ChatEditParticipantsUtils','Link.react','MercuryThreads','MercuryThreadTitle.react','MessengerAdminGroupUtils','React','TrackingNodes','UserAgent','goURI'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryThreads').get(),j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatTitleLink',propTypes:{href:j.string,thread:j.object,viewer:j.string},getDefaultProps:function m(){return {href:null};},getTitle:function m(){return this.refs.threadTitle.getTitle();},render:function m(){if(!this.props.thread)return null;var n=this.props,o=n.href,p=n.thread,q=n.viewer,r=babelHelpers.objectWithoutProperties(n,['href','thread','viewer']);return c('React').createElement(l,babelHelpers['extends']({className:"titlebarText"+(c('UserAgent').isBrowser('Chrome')&&!c('UserAgent').isPlatform('Windows')?' '+"fixemoji":'')+(o===null?' '+"noLink":''),'data-ft':c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.TITLE),'data-hover':'tooltip',onClick:function(s){return this._handleClick(s);}.bind(this),href:o},r),c('React').createElement(c('MercuryThreadTitle.react'),{ref:'threadTitle',isNewThread:i.isNewEmptyLocalThread(p.thread_id),thread:p,useAndSeparator:true,useShortName:!p.is_canonical,viewer:q}));},_handleClick:function m(n){var o=this.props,p=o.href,q=o.thread;if(!p)return;if(q&&q.associated_object){c('goURI')(p);}else if(c('MessengerAdminGroupUtils').showParticipantsModal(q.is_canonical,i.isEmptyLocalThread(q.thread_id),q)){c('ChatEditParticipantsUtils').showParticipantsModal(q.thread_id);n.preventDefault();}}}),l=function m(n){return n.href?c('React').createElement(c('Link.react'),n):c('React').createElement('span',n);};f.exports=k;}),null);
__d('MercuryTypingAnimation.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m="_4a0v"+(this.props.color==='light'?' '+"_4a0w":'')+(this.props.color==='dark'?' '+"_4a0x":'');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,m)},c('React').createElement('div',{className:"_4b0g"},c('React').createElement('div',{className:"_5pd7"}),c('React').createElement('div',{className:"_5pd7"}),c('React').createElement('div',{className:"_5pd7"})));};function l(){i.apply(this,arguments);}l.propTypes={color:k.oneOf(['light','dark'])};l.defaultProps={color:'dark'};f.exports=l;}),null);
__d('ChatTypingIndicator.react',['cx','fbt','ChatConfig','Image.react','MercuryParticipants','MercuryTypingAnimation.react','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('ChatConfig').get('chattab_rounded_profile',false),l=c('React').createClass({displayName:'ChatTypingIndicator',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{userID:j.string,showName:j.bool},render:function n(){var o=void 0;if(this.props.userID)o=c('MercuryParticipants').getNow(this.props.userID);if(!o)return null;return c('React').createElement('div',{className:"_4tdt"},m(o),this._renderBubble());},getBubble:function n(){return this.refs.bubble;},_renderBubble:function n(){var o=this.props.showName;return c('React').createElement('div',{className:"_4tdv"},c('React').createElement('div',{className:"_5wd4"+(' '+"_1nc7")+(' '+"_2cnu")+(o?' '+"_5ysy":'')},c('React').createElement('div',{className:"_5wd9"+(' '+"_n4o")},c('React').createElement('div',{className:"_5w1r"+(' '+"_5wdf")+(' '+"_3_om")},c('React').createElement(c('MercuryTypingAnimation.react'),{className:"_5x7x",ref:'bubble'})))));}});function m(n){var o=i._("{name}",[i.param('name',n.name)]);return c('React').createElement('div',{className:"_31o4"+(k?' '+"_3njy":'')},c('React').createElement('a',{'aria-label':o,className:"_4tdw",'data-hover':'tooltip','data-tooltip-content':o,'data-tooltip-position':'left',href:n.href||'#',ref:'link'},c('React').createElement(c('Image.react'),{src:n.image_src,ref:'image'})));}f.exports=l;}),null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryThreadIDMap','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=c('MercuryThreadIDMap').get(),i=30000;function j(k){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=c('MercuryDispatcher').getForFBID(k);this.$MercuryTypingReceiver3.subscribe('update-typing-state',function(m,n){var o=n.payload_source;if(o!=c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE)return;var p=n.actions;if(!p||!p.length)return;var q=c('MercuryActionType').USER_GENERATED_MESSAGE;p.forEach(function(r){if(r.action_type==q&&r.author!=c('MercuryViewer').getID())this.$MercuryTypingReceiver4(r.thread_id,r.author);}.bind(this));}.bind(this));var l=[c('ChannelConstants').getArbiterType('typ'),c('ChannelConstants').getArbiterType('ttyp')];if(!c('FBID').isUser(k))l.push(c('ChannelConstants').getArbiterType('page_typing'));c('Arbiter').subscribe(l,function(m,n){var o=n.obj,p=this.$MercuryTypingReceiver5(o);if(p){var q=c('MercuryIDs').getParticipantIDFromUserID(o.from.toString());if(o.st==c('TypingStates').TYPING){this.$MercuryTypingReceiver2[p]=this.$MercuryTypingReceiver2[p]||{};var r=this.$MercuryTypingReceiver2[p][q];this.$MercuryTypingReceiver2[p][q]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);!r&&this.$MercuryTypingReceiver7(p);}else if(o.st==c('TypingStates').INACTIVE)this.$MercuryTypingReceiver4(p,q);}}.bind(this));}j.prototype.$MercuryTypingReceiver8=function(k){'use strict';var l=this.$MercuryTypingReceiver2[k]||{},m=Object.keys(l);m.sort(function(n,o){return l[n]-l[o];});return m;};j.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var k=Date.now(),l={},m=false;for(var n in this.$MercuryTypingReceiver2){var o=false;for(var p in this.$MercuryTypingReceiver2[n]||{})if(this.$MercuryTypingReceiver2[n][p]<k-i){delete this.$MercuryTypingReceiver2[n][p];o=true;}else m=true;if(o)l[n]=this.$MercuryTypingReceiver8(n);}if(!c('isEmpty')(l))this.$MercuryTypingReceiver9(l);if(m)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);};j.prototype.$MercuryTypingReceiver4=function(k,l){'use strict';if(k in this.$MercuryTypingReceiver2)if(l in this.$MercuryTypingReceiver2[k]){delete this.$MercuryTypingReceiver2[k][l];this.$MercuryTypingReceiver7(k);}};j.prototype.$MercuryTypingReceiver9=function(k){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',k);};j.prototype.$MercuryTypingReceiver7=function(k){'use strict';var l={};l[k]=this.$MercuryTypingReceiver8(k);this.$MercuryTypingReceiver9(l);};j.prototype.$MercuryTypingReceiver5=function(k){'use strict';if(k.thread_fbid)return h.getClientIDFromServerIDNow(k.thread_fbid.toString());if(k.type==='typ'||k.type==='page_typing')return c('MercuryIDs').getThreadIDFromUserID(k.from.toString());return null;};c('mixInEventEmitter')(j,{'state-changed':true});Object.assign(j,c('MercurySingletonMixin'));f.exports=j;}),null);
__d('ChatTypingIndicators.react',['fbt','ChatTypingIndicator.react','DOM','MercuryIDs','MercuryThreadInformer','MercuryThreads','MercuryTypingReceiver','MercuryParticipants','React','ReactDOM','SubscriptionsHandler','TooltipData','createObjectFrom','emptyFunction'],(function a(b,c,d,e,f,g,h){var i=c('MercuryThreads').get(),j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatTypingIndicators',propTypes:{indicatorClass:j.func,indicatorsWillShow:j.func,indicatorsDidShow:j.func,rootClassName:j.string,threadID:j.string.isRequired,viewer:j.string.isRequired},getDefaultProps:function l(){return {indicatorClass:c('ChatTypingIndicator.react'),indicatorsWillShow:c('emptyFunction'),indicatorsDidShow:c('emptyFunction')};},getInitialState:function l(){return {typingUserIDs:[]};},componentDidMount:function l(){var m=c('MercuryThreadInformer').getForFBID(this.props.viewer),n=c('MercuryTypingReceiver').getForFBID(this.props.viewer);this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(n.addRetroactiveListener('state-changed',this.typingStateChanged),m.subscribe('messages-received',this.messagesReceived));},componentWillReceiveProps:function l(m){if(m.threadID!=this.props.threadID)this.setState({typingUserIDs:[]});},componentWillUpdate:function l(m,n){if(n.typingUserIDs.length>0)this.props.indicatorsWillShow();},componentDidUpdate:function l(){if(this.state.typingUserIDs.length>0)this.props.indicatorsDidShow();c('MercuryParticipants').getMulti(this.state.typingUserIDs,function(m){if(this.isMounted())this.state.typingUserIDs.forEach(function(n){var o=m[n],p=this.refs[n]&&this.refs[n].getBubble();if(p&&o)c('TooltipData').set(c('ReactDOM').findDOMNode(p),this.renderTooltip(o.short_name),'above','left');}.bind(this));}.bind(this));},componentWillUnmount:function l(){this._subscriptions.release();},render:function l(){if(!c('MercuryIDs').isValid(this.props.threadID))return null;var m=i.getThreadMetaNow(this.props.threadID);if(m&&!m.is_subscribed)return null;var n=c('MercuryIDs').isGroupChat(this.props.threadID);return c('React').createElement('div',{className:this.props.rootClassName},this.state.typingUserIDs.map(function(o){return this._renderTypingIndicator(o,!!n);}.bind(this)));},_renderTypingIndicator:function l(m,n){var o=this.props.indicatorClass;return c('React').createElement(o,{key:m,ref:m,showName:n,userID:m});},renderTooltip:function l(m){var n=c('DOM').create('span');c('ReactDOM').render(c('React').createElement('span',null,h._("{name} is typing...",[h.param('name',m)])),n);return n;},typingStateChanged:function l(m){if(this.props.threadID in m)this.setState({typingUserIDs:m[this.props.threadID].slice().sort()});},messagesReceived:function l(m,n){if(this.props.threadID in n){var o=n[this.props.threadID],p=c('createObjectFrom')(o.map(function(q){return q.author;}));this.setState({typingUserIDs:this.state.typingUserIDs.filter(function(q){return !p[q];}).sort()});}}});f.exports=k;}),null);
__d('AutoFocusableLink.react',['Link.react','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Link.react'));i=h&&h.prototype;j.prototype.componentDidMount=function(){if(this.props.autoFocus)c('ReactDOM').findDOMNode(this).focus();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MercuryBootloadOnInteraction.react',['BootloadOnRender.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$MercuryBootloadOnInteraction1=function(l){this.setState({hadUserInteraction:true,interactionType:l.type});}.bind(this);this.$MercuryBootloadOnInteraction2=function(l){this.setState({interactionType:undefined});}.bind(this);this.state={hadUserInteraction:false};}j.prototype.render=function(){if(!this.state.hadUserInteraction)return c('React').cloneElement(this.props.placeholder,{onFocus:this.$MercuryBootloadOnInteraction1,onMouseOver:this.$MercuryBootloadOnInteraction1,onClick:this.$MercuryBootloadOnInteraction1,onBlur:this.$MercuryBootloadOnInteraction2});var k=this.props,l=k.loader,m=k.component,n=k.placeholder,o={};switch(this.state.interactionType){case 'focus':o.autoFocus=true;break;case 'click':o.clicked=true;break;}m=c('React').cloneElement(m,o);n=c('React').cloneElement(n,o);return c('React').createElement(c('BootloadOnRender.react'),{placeholder:n,loader:l,component:m});};f.exports=j;}),null);
__d("XSimpleNUXMessagesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/nux\/{msg_id}\/seen\/",{msg_id:{type:"Int",required:true}});}),null);
__d('SimpleNUXMessage',['AsyncRequest','SimpleNUXMessageTypesToShow','XSimpleNUXMessagesController'],(function a(b,c,d,e,f,g){function h(j){return !c('SimpleNUXMessageTypesToShow')[j];}function i(j){delete c('SimpleNUXMessageTypesToShow')[j];var k=c('XSimpleNUXMessagesController').getURIBuilder().setInt('msg_id',j).getURI();new (c('AsyncRequest'))().setURI(k).send();}f.exports={hasUserSeenMessage:h,markMessageSeenByUser:i};}),null);
__d('ChatTabHeader.react',['cx','fbt','Promise','AutoFocusableLink.react','Bootloader','BootloadOnRender.react','MercuryBootloadOnInteraction.react','ChatCloseButton.react','ChatConfig','ChatTitleLink.react','EventPlanExperiment','EventReminderStateStore','JSResource','LayerFadeOnHide','LazyComponent.react','LoadOnRender.react','MercuryThreadInfo','MercuryTypingAnimation.react','MessengerAdminGroupUtils','MessengerJoinableModeType','React','SimpleNUXMessage','TooltipData','XUIAmbientNUX.react','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='118809038721180',n=function p(q){c('Bootloader').loadModules(["archiveWarningReact"],function(r){var s=r.jsComponent;return q(s);},'ChatTabHeader.react');};j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.$ChatTabHeader1=false;this.$ChatTabHeader6=function(){for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];this.props.onClick.apply(null,r);}.bind(this);this.$ChatTabHeader15=function(){return this.refs.menu;}.bind(this);this.$ChatTabHeader16=function(){c('SimpleNUXMessage').markMessageSeenByUser(m);this.setState({eventPlanNuxSeen:true});}.bind(this);this.state={eventPlanNuxSeen:c('SimpleNUXMessage').hasUserSeenMessage(m)};this.$ChatTabHeader2=new (c('Promise'))(function(q,r){this.$ChatTabHeader3=q;}.bind(this));this.$ChatTabHeader4=c('JSResource')('ChatTabMenu.react').__setRef('ChatTabHeader.react');}o.prototype.componentDidMount=function(){this.$ChatTabHeader1=true;c('requireWeak')('ChatVideoCallButton.react',function(p){if(this.$ChatTabHeader1)this.setState({RTCComponent:p});}.bind(this));if(this.props.isMuted)this.getMenu();};o.prototype.componentWillUnmount=function(){this.$ChatTabHeader1=false;};o.prototype.render=function(){var p=this.$ChatTabHeader5(),q=this.props.isRaised;return c('React').createElement('div',{className:"_15p4"+(!this.props.isRaised?' '+"_15p5":'')+(q||!p?' '+"_2pis":''),onMouseUp:this.$ChatTabHeader6,onKeyDown:this.props.onKeyDown,ref:'root',role:'presentation'},c('React').createElement('div',{'aria-level':'2',className:"titlebarTextWrapper _15p6",role:'heading'},c('React').createElement('div',{className:"_61td",role:q?'presentation':'button',tabIndex:q?-1:0},p,this.$ChatTabHeader7()),this.props.isTyping&&!this.props.isRaised?c('React').createElement(c('MercuryTypingAnimation.react'),{className:"_15p8",color:'dark'}):null),c('React').createElement('ul',{className:"_32ca"},this.$ChatTabHeader8(),c('React').createElement('li',{className:"_32cb"},c('React').createElement(c('ChatCloseButton.react'),{active:this.props.isActive,className:"_3olu _3olv",onClick:this.props.onCloseClick,onKeyUp:this.props.onCloseKeyUp,onMouseDown:this.props.onCloseMouseDown}))));};o.prototype.focus=function(){this.refs.root&&this.refs.root.focus();};o.prototype.getMenu=function(){this.$ChatTabHeader4.load().done(function(p){return this.$ChatTabHeader1&&this.setState({MenuComponent:p});}.bind(this));return this.$ChatTabHeader2;};o.prototype.$ChatTabHeader8=function(){if(!this.props.isRaised)return null;var p=[this.$ChatTabHeader9(),this.$ChatTabHeader10(),this.$ChatTabHeader11(),this.$ChatTabHeader12(),this.$ChatTabHeader13()];return p.filter(Boolean);};o.prototype.$ChatTabHeader12=function(){return this.$ChatTabHeader14({isAudio:true});};o.prototype.$ChatTabHeader11=function(){return this.$ChatTabHeader14({isAudio:false});};o.prototype.$ChatTabHeader14=function(p){if(this.props.isEmptyChat)return null;var q=this.props,r=q.isGroupChat,s=q.onRTCNuxCloseButtonClick,t=q.rtcNuxShown,u=q.thread,v=q.threadID,w=q.viewer;if(r){if(!u||u.participants.length<=1||!c('MercuryThreadInfo').canReply(u))return null;if(u.joinable_mode&&u.joinable_mode.mode===c('MessengerJoinableModeType').JOINABLE)return null;if(p.isAudio){if(!c('ChatConfig').get('rtc_conferencing_www'))return null;}else if(!c('ChatConfig').get('rtc_conferencing_www_video'))return null;}var x=babelHelpers['extends']({isGroupChat:r,onRTCNuxCloseButtonClick:s,rtcCallData:u&&u.rtc_call_data,rtcNuxShown:t&&p.isAudio,threadID:v,thread:u,viewer:w},p);x.className="_3olv"+(x.isAudio?' '+"_2fpc":'')+(!x.isAudio?' '+"_2fpd":'');var y=this.state.RTCComponent;return c('React').createElement('li',{className:"_3a61"+(x.isAudio?' '+"_461a":'')+(!x.isAudio?' '+"_461b":''),key:'rtc'+(x.isAudio?'audio':'video')},y?c('React').createElement(y,x):c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),x),loader:c('JSResource')('ChatVideoCallButton.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:x.className,role:'button'})}));};o.prototype.$ChatTabHeader13=function(){if(this.props.isEmptyChat)return null;var p=babelHelpers['extends']({attachmentsShelf:this.props.attachmentsShelf,isGroupChat:this.props.isGroupChat,isEmptyChat:this.props.isEmptyChat,isMuted:this.props.isMuted,nameConversationFunc:this.props.nameConversationFunc,otherUserID:this.props.otherUserID,showAddFriend:this.props.showAddFriend,sheetController:this.props.sheetController,threadID:this.props.threadID,onSubmit:this.props.onFileUploaderSubmit,onFileUploaderMounted:this.props.onFileUploaderMounted,onMount:this.$ChatTabHeader3,onUpdateAttachmentsShelf:this.props.onUpdateAttachmentsShelf,onUploadFinished:this.props.onUploadFinished},this.props.additionalMenuProps);p.className="_3olv _1ll-";var q=i._("Options"),r=this.state.MenuComponent,s=false;if(this.props.threadID){var t=c('EventReminderStateStore').getEvent(this.props.threadID);s=t&&!t.exists&&!this.state.eventPlanNuxSeen&&c('EventPlanExperiment').shouldShowEntryPointNuxWithExposure();}return c('React').createElement('div',{key:'menu'},c('React').createElement('li',{className:"_3a61 _461_",ref:'menu'},r?c('React').createElement(r,p):c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),p),loader:c('JSResource')('ChatTabMenu.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:p.className,'aria-label':q,role:'button'})})),c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:this.$ChatTabHeader15,onCloseButtonClick:this.$ChatTabHeader16,shown:s,width:'auto'},i._("Click here to start a new plan.")));};o.prototype.$ChatTabHeader10=function(){if(this.props.isPageChat||this.props.isEmptyChat)return null;var p={className:"_3olv _3jyj",isFBAtWork:this.props.isWorkUser,shouldAddToApprovalQueue:c('MessengerAdminGroupUtils').shouldAddToApprovalQueue(this.props.thread,this.props.viewer),shown:true,onClick:function(){return this.props.sheetController.openAddFriendsSheet();}.bind(this)},q=i._("Add");return c('React').createElement('li',{className:"_3a61 _4620",key:'add'},c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),p),loader:c('JSResource')('ChatAddToThreadButton.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{'aria-label':q,className:p.className,role:'button'})}));};o.prototype.$ChatTabHeader9=function(){if(!this.props.isViewerEmployee)return null;var p=this.props.participants,q=p?p.length>0&&p.every(function(r){return !!(r&&r.employee);}):false;if(!q)return null;return c('React').createElement('li',{key:'archiveWarning'},c('React').createElement(c('LoadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{isFBAtWork:this.props.isWorkUser,shown:true}),loader:n,placeholder:c('React').createElement('div',null)}));};o.prototype.$ChatTabHeader17=function(){return c('React').createElement('span',{className:"_3a61"+(!this.props.isRaised?' '+"_3-99":'')},c('React').createElement('span',{className:"_3olv _2nlt"}));};o.prototype.$ChatTabHeader7=function(){return c('React').createElement(c('ChatTitleLink.react'),babelHelpers['extends']({href:this.props.isRaised?this.props.href:undefined,thread:this.props.thread,viewer:this.props.viewer},c('TooltipData').propsFor(this.props.tooltip,'above')));};o.prototype.$ChatTabHeader5=function(){var p=this.props,q=p.isRaised,r=p.thread;if(!q&&r&&r.unread_count>0)return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:"_3-8_ _3-99",count:r.unread_count,type:'special'}),loader:c('JSResource')('XUIBadge.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement('span',null)});return this.$ChatTabHeader17();};o.propTypes={additionalMenuProps:l.object,attachmentsShelf:l.object.isRequired,href:l.string,isActive:l.bool.isRequired,isEmptyChat:l.bool,isGroupChat:l.bool,isMuted:l.bool,isPageChat:l.bool,isRaised:l.bool,isTyping:l.bool,isViewerEmployee:l.bool,isWorkUser:l.bool,nameConversationFunc:l.func.isRequired,otherUserID:l.string,participants:l.arrayOf(l.object),rtcNuxShown:l.bool.isRequired,sheetController:l.object.isRequired,showAddFriend:l.func.isRequired,thread:l.object,threadID:l.string,tooltip:l.string,viewer:l.string.isRequired,onClick:l.func.isRequired,onCloseClick:l.func.isRequired,onCloseKeyUp:l.func.isRequired,onCloseMouseDown:l.func.isRequired,onFileUploaderMounted:l.func.isRequired,onFileUploaderSubmit:l.func.isRequired,onKeyDown:l.func.isRequired,onRTCNuxCloseButtonClick:l.func.isRequired,onUpdateAttachmentsShelf:l.func.isRequired,onUploadFinished:l.func.isRequired};f.exports=o;}),null);
__d('getGroupNameTooltipFromParticipantIDs',['fbt','MercuryParticipants','MercuryViewer'],(function a(b,c,d,e,f,g,h){'use strict';var i=10,j='\n';function k(m,n){var o=[],p=c('MercuryViewer').getID();m=m&&m.filter(function(s){return s!==p;});if(!m||!m.length){n(null);return;}var q=m.length,r=q-i;if(r>1)m=m.slice(0,i);c('MercuryParticipants').getMulti(m,function(s){for(var t in s){var u=s[t];o.push(u.name);}if(r>1){var v=h._("and {number of hidden chat participants} more.",[h.param('number of hidden chat participants',r)]);o.push(v);}n(o.join(j));});}function l(m){var n=[],o=c('MercuryViewer').getID();m=m&&m.filter(function(r){return r!==o;});if(!m||!m.length)return null;n=m.map(function(r){var s=c('MercuryParticipants').getOrFetch(r);return s&&s.name;}).filter(function(r){return !!r;});var p=m.length-(m.length-n.length)-i;if(p>1){n=n.slice(0,i);var q=h._("and {number of hidden chat participants} more.",[h.param('number of hidden chat participants',p)]);n.push(q);}return n.join(j);}f.exports={getGroupNameTooltipFromParticipantIDs:l,getGroupNameTooltipFromParticipantIDsAsync:k};}),null);
__d('getTitleHrefFromThreadID',['MercuryIDs','MercuryParticipants','WebMessengerThreadPermalinks'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){if(c('MercuryIDs').isLocalThread(i)){j();return;}var k=c('MercuryIDs').getUserIDFromThreadID(i);if(k){c('MercuryParticipants').get(c('MercuryIDs').getParticipantIDFromUserID(k),function(l){if(l.href){j(l.href);}else j(c('WebMessengerThreadPermalinks').getThreadURIFromUserID(k));});}else c('WebMessengerThreadPermalinks').getThreadURI(i,j);}f.exports=h;}),null);
__d('ChatTabHeaderContainer.react',['ChatTabHeader.react','CurrentUser','MercuryIDs','MercuryParticipants','MercuryThreads','MercuryThreadInfo','React','SubscriptionsHandler','WorkModeConfig','getPageIDFromThreadID','getGroupNameTooltipFromParticipantIDs','getTitleHrefFromThreadID'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('getGroupNameTooltipFromParticipantIDs').getGroupNameTooltipFromParticipantIDs,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(m){i.constructor.call(this,m);this.$ChatTabHeaderContainer1=new (c('SubscriptionsHandler'))();this.state=this.calculateState(m);}l.prototype.calculateState=function(m){var n=false,o=true,p=false,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0;if(m.threadID){var v=c('MercuryThreads').getForFBID(m.viewer);t=v.getOrFetch(m.threadID);n=c('MercuryIDs').isGroupChat(m.threadID);o=v.isNewEmptyLocalThread(m.threadID);p=!!t&&c('MercuryThreadInfo').isMuted(t);q=c('MercuryIDs').getUserIDFromThreadID(m.threadID);r=c('getPageIDFromThreadID')(m.threadID);if(t){s=t.participants.map(c('MercuryParticipants').getOrFetch,c('MercuryParticipants'));u=j(t.participants);}}var w=this.state&&this.state.additionalMenuProps||{};if(m)w=babelHelpers['extends']({},w,m.additionalMenuProps);return {additionalMenuProps:w,isEmptyChat:o,isGroupChat:n,isMuted:p,otherUserID:q,pageID:r,participants:s,thread:t,tooltip:u};};l.prototype.componentWillMount=function(){this.$ChatTabHeaderContainer1.addSubscriptions(c('MercuryThreads').addListener('change',function(){this.setState(this.calculateState(this.props));}.bind(this)),c('MercuryParticipants').addListener('change',function(){this.setState(this.calculateState(this.props));}.bind(this)));};l.prototype.componentDidMount=function(){this.$ChatTabHeaderContainer2();this.props.onMount&&this.props.onMount(this);};l.prototype.componentWillReceiveProps=function(m){if(m.threadID!==this.props.threadID)this.$ChatTabHeaderContainer2();this.setState(this.calculateState(m));};l.prototype.componentWillUnmount=function(){this.$ChatTabHeaderContainer1.release();};l.prototype.render=function(){return c('React').createElement(c('ChatTabHeader.react'),{additionalMenuProps:this.state.additionalMenuProps,attachmentsShelf:this.props.attachmentsShelf,href:this.state.href,isActive:this.props.isActive,isEmptyChat:this.state.isEmptyChat,isGroupChat:this.state.isGroupChat,isMuted:this.state.isMuted,isPageChat:!!this.state.pageID,isRaised:this.props.isRaised,isTyping:this.props.isTyping,isViewerEmployee:c('CurrentUser').isEmployee(),isWorkUser:c('WorkModeConfig').is_work_user,nameConversationFunc:this.props.nameConversationFunc,otherUserID:this.state.otherUserID,participants:this.state.participants,rtcNuxShown:this.props.rtcNuxShown,sheetController:this.props.sheetController,showAddFriend:this.props.showAddFriend,ref:'header',thread:this.state.thread,threadID:this.props.threadID,tooltip:this.state.tooltip,viewer:this.props.viewer,onClick:this.props.onClick,onCloseClick:this.props.onCloseClick,onCloseKeyUp:this.props.onCloseKeyUp,onCloseMouseDown:this.props.onCloseMouseDown,onFileUploaderMounted:this.props.onFileUploaderMounted,onFileUploaderSubmit:this.props.onFileUploaderSubmit,onKeyDown:this.props.onKeyDown,onRTCNuxCloseButtonClick:this.props.onRTCNuxCloseButtonClick,onUpdateAttachmentsShelf:this.props.onUpdateAttachmentsShelf,onUploadFinished:this.props.onUploadFinished});};l.prototype.focus=function(){this.refs.header.focus();};l.prototype.setAdditionalMenuProps=function(m){var n=babelHelpers['extends']({},this.state.additionalMenuProps,m);this.setState({additionalMenuProps:n});};l.prototype.getMenu=function(){return this.refs.header.getMenu();};l.prototype.$ChatTabHeaderContainer2=function(){c('getTitleHrefFromThreadID')(this.props.threadID,function(m){return this.setState({href:m});}.bind(this));};l.propTypes={additionalMenuProps:k.object,attachmentsShelf:k.object.isRequired,isActive:k.bool.isRequired,isRaised:k.bool,isTyping:k.bool,nameConversationFunc:k.func.isRequired,rtcNuxShown:k.bool.isRequired,sheetController:k.object.isRequired,showAddFriend:k.func.isRequired,threadID:k.string,viewer:k.string.isRequired,onClick:k.func.isRequired,onCloseClick:k.func.isRequired,onCloseKeyUp:k.func.isRequired,onCloseMouseDown:k.func.isRequired,onFileUploaderMounted:k.func.isRequired,onFileUploaderSubmit:k.func.isRequired,onKeyDown:k.func.isRequired,onMount:k.func,onRTCNuxCloseButtonClick:k.func.isRequired,onUpdateAttachmentsShelf:k.func.isRequired,onUploadFinished:k.func.isRequired};f.exports=l;}),null);
__d('MessageRequestUtils',['MessagingTag'],(function a(b,c,d,e,f,g){'use strict';var h={isMessageRequest:function i(j){return (j.folder===c('MessagingTag').PENDING||j.folder===c('MessagingTag').OTHER)&&j.can_reply;},isFiltered:function i(j){return j.folder===c('MessagingTag').OTHER;}};f.exports=h;}),null);
__d('MoveToWorkUtils',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';function h(){return c('CurrentUser').isEmployee()&&c('CurrentUser').hasWorkUser();}f.exports={isViewerEligible:h};}),null);
__d("XGroupCallNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groupcall\/nux\/",{action:{type:"String",required:true}});}),null);
__d('FantaChatHeaderContainer.react',['cx','AsyncRequest','ChatTabHeaderContainer.react','FantaTabActions','FantaTabSheetActions','mercuryBlockedParticipantsRe','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryThreadInfo','MercuryThreads','MessageRequestUtils','MoveToWorkUtils','React','XGroupCallNuxController','emptyFunction','isEmpty'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get(),l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$FantaChatHeaderContainer1=false,this.state={rtcNuxShown:false},this.$FantaChatHeaderContainer6=function(){var s=this.props.threadID;c('FantaTabSheetActions').openAddMoreFriendsSheet(s);}.bind(this),this.$FantaChatHeaderContainer5=function(){var s=this.props.threadID;c('FantaTabSheetActions').openNameConversationSheet(s);}.bind(this),this.$FantaChatHeaderContainer7=function(){var s=this.props.threadID;c('FantaTabSheetActions').openAddMoreFriendsSheet(s);}.bind(this),this.$FantaChatHeaderContainer9=function(){this.props.onClose&&this.props.onClose();}.bind(this),this.$FantaChatHeaderContainer8=function(event){this.$FantaChatHeaderContainer3();var s=event.target;if(!s)return;if(s.getAttribute('role')==='presentation'||s.classList&&(s.classList.contains("_15p6")||s.classList.contains("_2nlt")||s.classList.contains("_14lt"))){event.preventDefault();c('FantaTabActions').minimizeTab(this.props.threadID);}}.bind(this),this.$FantaChatHeaderContainer3=function(){if(this.state.rtcNuxShown&&this.$FantaChatHeaderContainer1){this.setState({rtcNuxShown:false});var s=c('XGroupCallNuxController').getURIBuilder().setString('action','dismiss').getURI();new (c('AsyncRequest'))(s).send();}}.bind(this),o;}m.prototype.shouldComponentUpdate=function(n,o){var p=this.props,q=this.state;return p.viewer!==n.viewer||p.threadID!==n.threadID||p.isLastGroupTab!==n.isLastGroupTab||p.thread!==n.thread||q.rtcNuxShown!==o.rtcNuxShown||p.customColor!==n.customColor;};m.prototype.componentDidMount=function(){this.$FantaChatHeaderContainer1=true;this.$FantaChatHeaderContainer2();};m.prototype.componentWillUnmount=function(){this.$FantaChatHeaderContainer3();this.$FantaChatHeaderContainer1=false;};m.prototype.render=function(){var n=this.props,o=n.isFocused,p=n.thread,q=n.threadID,r=n.viewer,s=n.customColor,t=this.state.rtcNuxShown,u=!!p&&c('MercuryThreadInfo').isMuted(p),v=c('MercuryIDs').getParticipantIDFromFromThreadID(q),w=v?c('MercuryParticipants').getNow(v):null,x=w&&w.is_business_enabled,y=c('MoveToWorkUtils').isViewerEligible()&&c('MercuryIDs').isGroupChat(q)&&p&&this.$FantaChatHeaderContainer4(p.participants),z=p&&c('MercuryThreadInfo').showComposer(p)&&!c('isEmpty')(p.participants)&&!c('MessageRequestUtils').isMessageRequest(p)&&!c('MercuryConfig').ViewerIsReadOnly&&!(c('MercuryConfig').ColdOpenBlock&&(c('MercuryThreadInfo').isColdOpen(p)||c('MercuryThreadInfo').isEmptyLocalThread(p))),aa=p&&c('mercuryBlockedParticipantsRe').get().isMessageBlocked(p),ba=k.isNewEmptyLocalThread(q),ca=p&&p.message_count===0,da={hasMessageBlocked:aa,hasSwitchToWork:y,isBusinessEnabled:x,isEmptyChat:ba,isEmptyConversation:ca,isMuted:u,show:z},ea=s?{color:s}:null;return c('React').createElement('div',{className:"clearfix"+(' '+"fbNubFlyoutTitlebar")+(' '+"titlebar")+(!!s?' '+"_1m34":''),style:ea},c('React').createElement(c('ChatTabHeaderContainer.react'),{additionalMenuProps:da,attachmentsShelf:document.createElement('div'),isActive:o,isRaised:true,isTyping:false,nameConversationFunc:this.$FantaChatHeaderContainer5,rtcNuxShown:t,sheetController:{openAddFriendsSheet:this.$FantaChatHeaderContainer6,openThreadIsMutedTabSheet:c('emptyFunction'),closeThreadIsMutedTabSheet:c('emptyFunction'),openMessageBlockedTabSheet:c('emptyFunction'),closeMessageBlockedTabSheet:c('emptyFunction')},showAddFriend:this.$FantaChatHeaderContainer7,threadID:q,viewer:r,onClick:this.$FantaChatHeaderContainer8,onCloseClick:this.$FantaChatHeaderContainer9,onCloseKeyUp:c('emptyFunction'),onCloseMouseDown:c('emptyFunction'),onFileUploaderMounted:c('emptyFunction'),onFileUploaderSubmit:c('emptyFunction'),onKeyDown:function fa(){},onRTCNuxCloseButtonClick:this.$FantaChatHeaderContainer3,onUpdateAttachmentsShelf:c('emptyFunction'),onUploadFinished:c('emptyFunction')}));};m.prototype.$FantaChatHeaderContainer4=function(n){return n.length>0&&n.every(function(o){var p=c('MercuryParticipants').getNow(o);return !!(p&&p.employee);});};m.prototype.$FantaChatHeaderContainer2=function(){if(this.props.isLastGroupTab){var n=c('XGroupCallNuxController').getURIBuilder().setString('action','should_show').getURI();new (c('AsyncRequest'))(n).setHandler(function(o){var p=o.payload.shouldShow;if(this.$FantaChatHeaderContainer1)this.setState({rtcNuxShown:p});}.bind(this)).send();}};m.propTypes={customColor:l.string,isFocused:l.bool.isRequired,isLastGroupTab:l.bool.isRequired,onClose:l.func.isRequired,thread:l.object,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('FantaConversation.react',['Bootloader','ChatConversation.react','CurrentUser','EventProfiler','MercuryIDs','MessengerHotLikePreviewEvents','React','StickerInterfaces','StickersTypedLogger','SubscriptionsHandler','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$FantaConversation4=function(m){if(this.props.threadID===m)this.setState({likePreview:null});}.bind(this);this.$FantaConversation5=function(m,n){if(!m)return;new (c('StickersTypedLogger'))().setEvent('click_sticker').setPackid(m).setStickerid(n).log();c('Bootloader').loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(o,p,q){o.onIsPackInTray(m,c('StickerInterfaces').MESSAGES,function(r){if(r.in_sticker_tray){p.selectTrayPack(m);p.showStickerFlyout(this.props.threadID);}else q.showStore(m);}.bind(this));}.bind(this),'FantaConversation.react');}.bind(this);this.state={likePreview:null};this.$FantaConversation1=new (c('SubscriptionsHandler'))();}k.prototype.shouldComponentUpdate=function(l,m){var n=this.props,o=this.state;return !n.messages.equals(l.messages)||n.threadID!==l.threadID||n.thread!==l.thread||o.likePreview!==m.likePreview;};k.prototype.componentDidMount=function(){this.$FantaConversation2();this.$FantaConversation3();};k.prototype.componentDidUpdate=function(){this.$FantaConversation3();};k.prototype.componentWillUnmount=function(){this.$FantaConversation1.release();};k.prototype.$FantaConversation3=function(){c('EventProfiler').informManualInteractionTimestamp(['MessageJewelListItem','ChatSideBarLink','FirstChatTabOpen'],true);};k.prototype.$FantaConversation2=function(){this.$FantaConversation1.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(l,m){if(this.props.threadID===m)this.setState({likePreview:l});}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,this.$FantaConversation4),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,this.$FantaConversation4),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,this.$FantaConversation4));};k.prototype.render=function(){var l=this.props.messages,m=this.props,n=m.onLoadMoreMessages,o=m.thread,p=m.threadID,q=this.state.likePreview,r=c('CurrentUser').getID();if(q)l=l.push(q);return o?c('React').createElement(c('ChatConversation.react'),{isCanonical:c('MercuryIDs').isCanonical(p),loadMoreMessages:n,maxBubbleWidth:177-this.props.scrollbarPadding,messages:l,onAttachmentLoad:function(){return this.props.onAttachmentLoad();}.bind(this),onMount:c('emptyFunction'),onStickerClick:this.$FantaConversation5,ref:'conversation',thread:o,threadID:p,viewer:r}):c('React').createElement('div',null);};k.prototype.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList();};k.propTypes={messages:j.object.isRequired,onLoadMoreMessages:j.func.isRequired,scrollbarPadding:j.number,thread:j.object,threadID:j.string.isRequired};f.exports=k;}),null);
__d('FantaPageGreetingLoader.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','React','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.threadID;return c('getPageIDFromThreadID')(l)?c('React').createElement('div',{className:"_av1"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MercuryChatTabPagesGreetingContainer.react').__setRef('FantaPageGreetingLoader.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{threadID:l})})):null;};f.exports=i;}),null);
__d('MercuryCamQuickReply.react',['cx','fbt','BootloadedComponent.react','JSResource','MercuryIDs','MercuryThreads','MessengerQuickCamOrigins','React','XUISpinner.react','convertMIGColorToFIGColor'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreads').get(),m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.componentWillUpdate=function(o,p){if(o&&this.props.lastMessage!==o.lastMessage&&this.props.camQuickReplyWillShow)this.props.camQuickReplyWillShow();};n.prototype.componentDidUpdate=function(o,p){if(o&&this.props.lastMessage!==o.lastMessage&&this.props.camQuickReplyDidShow)this.props.camQuickReplyDidShow();};n.prototype.render=function(){var o=this.props.lastMessage,p=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer);if(!(o&&o.message_source&&o.author!==p&&o.message_source==='camera'))return null;var q=l.getThreadMetaNow(this.props.threadID),r=q?c('convertMIGColorToFIGColor')(q.custom_color):null,s=c('React').createElement('div',{className:"_zdf",style:r&&{color:r}},i._("Send a photo reply"));return c('React').createElement('div',{className:"_zdg"},c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('MessengerQuickCamButtonHTML5.react').__setRef('MercuryCamQuickReply.react'),bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{className:"_5h-9"}),className:"_5yhk"+(' '+"_6gb"),location:c('MessengerQuickCamOrigins').CHAT_TAB,threadID:this.props.threadID,viewer:this.props.viewer,textChild:s}));};function n(){j.apply(this,arguments);}n.propTypes={camQuickReplyWillShow:m.func,camQuickReplyDidShow:m.func,lastMessage:m.object,threadID:m.string.isRequired,viewer:m.string.isRequired};f.exports=n;}),null);
__d('MercuryIndicatorController',['fbt','ArbiterMixin','DOM','MercuryActionType','MercuryDelayedRoger','MercuryIDs','MercuryMessageSourceTags','MercuryParticipants','mercuryRogerRe','MercurySourceType','MercuryThreads','MercuryTypingReceiver','MercuryViewer','WorkModeConfig','formatDate','removeFromArray'],(function a(b,c,d,e,f,g,h){var i=c('MercuryDelayedRoger').get(),j=c('mercuryRogerRe').get(),k=c('MercuryThreads').get(),l=c('MercuryTypingReceiver').get(),m=[];function n(o){this._threadID=o;this._canonicalUser=c('MercuryIDs').getUserIDFromThreadID(o);m.push(this);}Object.assign(n.prototype,c('ArbiterMixin'),{destroy:function o(){c('removeFromArray')(m,this);},setLastMessage:function o(p){this._lastMsg=p;this._handleStateChange();},_informStateChanged:function o(p){if(p.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&this._lastMsg.author&&c('MercuryViewer').isViewer(this._lastMsg.author))p.self_authored=true;this._currentActivity=p.activity;this.inform('state-changed',p);},_notifySentFrom:function o(){var p,q,r=this._lastMsg.source_tags||this._lastMsg.tags||[];if(r.includes(c('MercuryMessageSourceTags').MESSENGER)){if(!c('WorkModeConfig').is_work_user){p=c('DOM').create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},h._("Sent from Messenger"));}else p=c('DOM').create('a',{href:'https://www.facebook.com/workplace/mobile/','class':'fcg',target:'_blank'},h._("Sent from Work Chat"));q='sentFromMobile';}else if(r.includes(c('MercuryMessageSourceTags').MOBILE)){var s=c('WorkModeConfig').is_work_user?'/workplace/mobile':'/mobile';p=c('DOM').create('a',{href:s,'class':'fcg',target:'_blank'},h._("Sent from Mobile"));q='sentFromMobile';}else if(r.includes(c('MercuryMessageSourceTags').EMAIL)){p=h._("Sent from email");q='sentFromEmail';}else if(r.includes(c('MercurySourceType').MESSENGER_COMMERCE)){q='sentFromMessengerCommerce';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:q,text:p});},_notifySeenTimestamp:function o(p){var q=Date.now()*.001,r=j.getSeenTimestamp(this._threadID,p[0]),s=r.action*.001,t;if(s<q-518400){t='M j';}else if(s<q-86400){t='D g:ia';}else t='g:ia';this._informStateChanged({activity:'seen-timestamp',text:h._("Seen {timestamp}",[h.param('timestamp',c('formatDate')(s,t))])});},_nameNormalizer:function o(p){var q;c('MercuryParticipants').getMulti(p,function(r){function s(u){if(r[u]!==undefined&&r[u].short_name){return r[u].short_name.toLowerCase();}else return u;}var t=p.map(s);q=function u(v){var w=s(v),x=t.indexOf(w)!==t.lastIndexOf(w);return x?r[v].name:r[v].short_name;};});return q;},_seenByEveryone:function o(p,q,r){var s=r?r.participants.length:0,t=p.length;if(q.author!=c('MercuryViewer').getID()&&(!r||r.participants.indexOf(q.author)>-1))t++;return s>2&&t>=s-1;},_notifySeenBy:function o(p){var q=this._lastMsg,r=true;c('MercuryParticipants').getMulti(p,function(s){r=false;if(this._lastMsg!=q)return;var t=k.getThreadMetaNow(this._threadID),u=null;if(t&&t.custom_nickname)u=t.custom_nickname;var v=[];for(var w in s){var x=s[w],y=x.short_name;if(u&&u[x.fbid])y=u[x.fbid];v[w]=y;}var z,aa=false;if(this._seenByEveryone(p,q,t)){z={prefix:'Seen by everyone'};}else if(p.length==1){z={prefix:'Seen by ',names:' '+v[p[0]]};}else if(p.length==2){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]};}else if(p.length==3){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]+', '+v[p[2]]};}else if(p.length>3){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]+', '};aa=true;}this._informStateChanged({activity:'seen-by',text:z,seenBy:p,showTooltip:aa});}.bind(this));r&&this._informStateChanged({activity:'none'});},_handleStateChange:function o(){var p=c('MercuryActionType').LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==p){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._informStateChanged({activity:'none'});return;}if(this._canonicalUser&&this._lastMsg.author!=c('MercuryViewer').getID()){this._notifySentFrom();return;}var q=i.getSeenBy(this._threadID,true);if(q.length)if(this._canonicalUser){this._notifySeenTimestamp(q);return;}else{this._notifySeenBy(q);return;}this._informStateChanged({activity:'none'});}});l.addRetroactiveListener('state-changed',function(o){m.forEach(function(p){var q=o[p._threadID];if(q!==undefined){p._typing=q;p._handleStateChange();}});});i.subscribe('state-changed',function(o,p){m.forEach(function(q){p[q._threadID]&&q._handleStateChange();});});f.exports=n;}),null);
__d('MercuryLastMessageIndicator.react',['cx','fbt','DOM','MercuryIndicatorController','MessengerTextWithEmoticons.react','MercuryParticipants','React','ReactDOM','TooltipData','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={data:{}},this.getRootClass=function(){var s="_510g"+(this.state.data.self_authored?' '+"_510e":''),t=this.state.data.activity,u=null;if(String(t).startsWith('seen')){u='seen';}else if(t=='typing'){u=this.props.hideTyping?null:t;}else u=t;return c('joinClasses')(s,u,this.props.className);}.bind(this),this.isVisible=function(s,t){s=s||this.props;t=t||this.state;return t.data&&t.data.activity!='none'&&!(s.hideTyping&&t.data.activity=='typing');}.bind(this),this.isSeenBy=function(s,t){s=s||this.props;t=t||this.state;return t.data&&t.data.activity==='seen-by';}.bind(this),this.setText=function(){if(this.state.data.text)c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.text),this.state.data.text);}.bind(this),this.setTooltip=function(){if(this.state.data.activity==='seen-by'&&this.state.data.showTooltip)c('MercuryParticipants').getMulti(this.state.data.seenBy,function(s){var t=c('DOM').create('div',null,this.state.data.seenBy.map(function(u){return c('DOM').create('div',null,s[u].name);}));c('TooltipData').set(c('DOM').find(c('ReactDOM').findDOMNode(this),'span.more'),t,'above','center');}.bind(this));}.bind(this),this.$MercuryLastMessageIndicator4=function(s){var t=s&&s.text;if(!t)return null;if(!t.names){return i._("Seen by everyone");}else{var u=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoji:true,renderEmoticons:true,text:t.names});if(!s.showTooltip){return i._("Seen by {names}",[i.param('names',u)]);}else{var v=this.$MercuryLastMessageIndicator5(s);return i._("Seen by {names}{=num more link}",[i.param('names',u),i.param('=num more link',v)]);}}}.bind(this),this.$MercuryLastMessageIndicator5=function(s){if(!s||!s.text||!s.showTooltip)return null;var t={},u=0;if(s.activity==='seen-by'){var v=null;c('MercuryParticipants').getMulti(s.seenBy,function(x){v=s.seenBy.map(function(y){return x[y].name;}).join('\r\n');u=Object.keys(x).length-2;});t=Object.assign({'data-tooltip-alignh':'center'},c('TooltipData').propsFor(v,'above'));}var w=i._({"*":"{num} more"},[i.param('num',u,[0])]);return c('React').createElement('span',babelHelpers['extends']({className:'more'},t),w);},this.$MercuryLastMessageIndicator1=function(s){this.$MercuryLastMessageIndicator3=new (c('MercuryIndicatorController'))(s.threadID);this.$MercuryLastMessageIndicator6=this.$MercuryLastMessageIndicator3.subscribe('state-changed',function(t,u){return this.setState({data:u});}.bind(this));s.lastMessage&&this.$MercuryLastMessageIndicator3.setLastMessage(s.lastMessage);}.bind(this),this.$MercuryLastMessageIndicator2=function(){this.$MercuryLastMessageIndicator6.unsubscribe();this.$MercuryLastMessageIndicator3.destroy();}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';this.$MercuryLastMessageIndicator1(this.props);};m.prototype.componentWillReceiveProps=function(n){'use strict';if(n.threadID!=this.props.threadID){this.$MercuryLastMessageIndicator2();this.$MercuryLastMessageIndicator1(n);}else if(n.lastMessage!=this.props.lastMessage)this.$MercuryLastMessageIndicator3.setLastMessage(n.lastMessage);};m.prototype.componentWillUpdate=function(n,o){'use strict';if(this.isVisible(n,o))this.props.indicatorWillShow();};m.prototype.componentDidUpdate=function(){'use strict';if(!this.isVisible())return;if(!this.isSeenBy()){this.setText();this.setTooltip();}this.props.indicatorDidShow();};m.prototype.componentWillUnmount=function(){'use strict';this.$MercuryLastMessageIndicator2();};m.prototype.render=function(){'use strict';if(this.isSeenBy()){var n=this.$MercuryLastMessageIndicator4(this.state.data);return c('React').createElement('div',{className:this.getRootClass()},c('React').createElement('div',{className:"_510h"}),c('React').createElement('span',{className:"_510f"},n));}else return c('React').createElement('div',{className:this.getRootClass()},c('React').createElement('div',{className:"_510h"}),c('React').createElement('span',{className:"_510f",ref:'text'},'\u00A0'));};m.propTypes={hideTyping:l.bool,indicatorWillShow:l.func,indicatorDidShow:l.func,lastMessage:l.object,threadID:l.string.isRequired};m.defaultProps={indicatorWillShow:c('emptyFunction'),indicatorDidShow:c('emptyFunction')};f.exports=m;}),null);
__d('MercuryQuickReply.react',['cx','BootloadedComponent.react','JSResource','MercuryConfig','MercuryIDs','MNOmniMConstants','OmniMStore','React','XUISpinner.react','FluxContainer'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={suggestions:null,omniMPrefs:null},n;}l.getStores=function(){return [c('OmniMStore')];};l.calculateState=function(m,n){return {suggestions:c('OmniMStore').suggestionsForThread(n.threadID),omniMPrefs:c('OmniMStore').prefs()};};l.prototype.componentWillMount=function(){if(this.props.quickReplyWillShow&&this.$MercuryQuickReply1(this.state))this.props.quickReplyWillShow();};l.prototype.componentDidMount=function(){if(this.props.quickReplyDidShow&&this.$MercuryQuickReply1(this.state))this.props.quickReplyDidShow();};l.prototype.componentWillUpdate=function(m,n){if(this.props.quickReplyWillShow&&n&&this.$MercuryQuickReply1(n)&&!this.$MercuryQuickReply1(this.state))this.props.quickReplyWillShow();};l.prototype.componentDidUpdate=function(m,n){if(this.props.quickReplyDidShow&&this.$MercuryQuickReply1(this.state)&&!this.$MercuryQuickReply1(n))this.props.quickReplyDidShow();};l.prototype.render=function(){var m=this.props.lastMessage;if(!m)return null;var n=null,o=null,p=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),q=this.state.suggestions||{},r=q.quickReplies,s=q.agentSuggestions;if(r&&r.length&&m.author!==p){n=r;o=c('MNOmniMConstants').QUICKREPLIES;}else if(s&&s.length&&c('MercuryConfig').EnableOmniM){n=s;o=c('MNOmniMConstants').OMNIM;}if(!n||!n.length||!n.filter(function(t){return !t.dismissed;}).length)return null;return c('React').createElement('div',{className:"_419m",ref:'quickReply'},c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('MessengerBotsQuickReplyButtonList.react').__setRef('MercuryQuickReply.react'),bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{className:"_5h-9"}),omniMPrefs:this.state.omniMPrefs,options:n,threadID:m.thread_id,source:o}));};l.prototype.$MercuryQuickReply1=function(m){var n=m.suggestions||{},o=n.quickReplies,p=n.agentSuggestions,q=o&&o.length,r=p&&p.length&&c('MercuryConfig').EnableOmniM;return !!(q||r);};l.propTypes={quickReplyWillShow:k.func,quickReplyDidShow:k.func,lastMessage:k.object,threadID:k.string.isRequired,viewer:k.string.isRequired};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('isEventSupported',['fbjs/lib/ExecutionEnvironment'],(function a(b,c,d,e,f,g){'use strict';var h;if(c('fbjs/lib/ExecutionEnvironment').canUseDOM)h=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature('','')!==true;function i(j,k){if(!c('fbjs/lib/ExecutionEnvironment').canUseDOM||k&&!('addEventListener' in document))return false;var l='on'+j,m=l in document;if(!m){var n=document.createElement('div');n.setAttribute(l,'return;');m=typeof n[l]==='function';}if(!m&&h&&j==='wheel')m=document.implementation.hasFeature('Events.wheel','3.0');return m;}f.exports=i;}),null);
__d('FantaConversationScroller.react',['cx','fbt','Animation','Arbiter','BootloadedComponent.react','ChatTypingIndicators.react','CurrentUser','Event','FantaConversation.react','FantaPageGreetingLoader.react','FantaTabActions','Grid.react','immutable','JSResource','MercuryLastMessageIndicator.react','MercuryAttachment','MercuryCamQuickReply.react','MercuryConfig','MercuryIDs','MercuryQuickReply.react','MercuryThreads','MessengerHotLikePreviewEvents','MessengerVideoAutoplayActions','MessengerVideoAutoplayStore','React','ReactDOM','MercuryShareAttachmentRenderLocations','Scroll','ScrollBoundaryContain','Style','SubscriptionsHandler','XUISpinner.react','clearImmediate','emptyFunction','getElementPosition','ifRequired','isEventSupported','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreads').get(),m=c('Grid.react').GridItem,n=c('React').PropTypes,o=15,p=null,q=20,r=/\D+/g;function s(u){if(p===null){var v=u.firstElementChild;if(v){c('Style').set(u,'overflow','scroll');var w=v.clientWidth;c('Style').set(u,'overflow','hidden');var x=v.clientWidth;p=Math.max(x-w,0);c('Style').set(u,'overflow','');}else p=0;}return p;}j=babelHelpers.inherits(t,c('React').Component);k=j&&j.prototype;function t(u){k.constructor.call(this,u);this.$FantaConversationScroller2=false;this.$FantaConversationScroller16=function(v){var w=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(w){this.$FantaConversationScroller17();if(this.$FantaConversationScroller18()&&!this.$FantaConversationScroller19()&&!this.$FantaConversationScroller5&&!this.props.hasFetchedAll){this.setState({loadingMessages:true});this.props.onLoadMoreMessages();}this.$FantaConversationScroller20();}}.bind(this);this.$FantaConversationScroller14=function(){this.$FantaConversationScroller1=null;c('FantaTabActions').scrollBottomChanged(this.props.threadID,this.$FantaConversationScroller8,this.$FantaConversationScroller21);}.bind(this);this.$FantaConversationScroller21=function(){this.$FantaConversationScroller22(false);this.$FantaConversationScroller15();}.bind(this);this.state={loadingMessages:!l.isEmptyLocalThread(u.threadID),scrollbarPadding:p===null?o:p};this.$FantaConversationScroller8=true;this.$FantaConversationScroller9=new (c('SubscriptionsHandler'))();}t.prototype.shouldComponentUpdate=function(u,v){var w=this.props,x=this.state;return w.hasFetchedAll!==u.hasFetchedAll||w.isFocused!==u.isFocused||!w.messages.equals(u.messages)||w.isCompact!==u.isCompact||w.showContextBanner!==u.showContextBanner||w.thread!==u.thread||w.threadID!==u.threadID||x.loadingMessages!==v.loadingMessages;};t.prototype.componentDidMount=function(){this.$FantaConversationScroller10();this.$FantaConversationScroller11();this.$FantaConversationScroller12();c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$FantaConversationScroller13());this.setState({scrollbarPadding:s(this.refs.scrollContainer)});};t.prototype.componentDidUpdate=function(u){if(c('MercuryConfig').ChatTabCompact)if(this.$FantaConversationScroller3){clearTimeout(this.$FantaConversationScroller3);this.$FantaConversationScroller3=null;}if(this.$FantaConversationScroller2){this.$FantaConversationScroller8=true;if(this.props.isCompact){if(c('MercuryConfig').ChatTabCompactAnimate){this.$FantaConversationScroller3=setTimeout(function(){this.$FantaConversationScroller3=null;this.scrollToBottom(true);}.bind(this),c('ifRequired')('cssVar',function(ba){return "300ms".replace(r,'');},function(){return 300;}));}else this.scrollToBottom(false);this.$FantaConversationScroller1=c('setImmediate')(this.$FantaConversationScroller14);}}else this.$FantaConversationScroller12();if(this.$FantaConversationScroller5&&!this.$FantaConversationScroller2){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer),w=this.$FantaConversationScroller5||0,x=v.scrollHeight-w;this.scrollToPosition(x,false);this.$FantaConversationScroller5=null;}if(!u.messages.equals(this.props.messages)){c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$FantaConversationScroller13());var y=u.messages.last(),z=this.props.messages.last();if(y!==z&&z&&z.author){var aa=c('MercuryIDs').getUserIDFromParticipantID(z.author);if(aa===c('CurrentUser').getID()){this.scrollToBottom(false);this.$FantaConversationScroller15();}}}};t.prototype.componentWillUnmount=function(){this.$FantaConversationScroller1&&c('clearImmediate')(this.$FantaConversationScroller1);this.$FantaConversationScroller9.release();};t.prototype.componentWillReceiveProps=function(u){this.$FantaConversationScroller2=this.props.isCompact!=u.isCompact;if(this.state.loadingMessages&&u.messages.size>0&&!u.messages.equals(this.props.messages)||u.hasFetchedAll||u.showContextBanner){this.setState({loadingMessages:false});var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer),w=v.scrollHeight,x=c('Scroll').getTop(v);this.$FantaConversationScroller5=w-x;}};t.prototype.$FantaConversationScroller12=function(){var u=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(this.$FantaConversationScroller8)this.scrollToBottom(u);};t.prototype.$FantaConversationScroller20=function(){var u=this.props.threadID,v=c('ReactDOM').findDOMNode(this.refs.scrollContainer),w=v.getBoundingClientRect(),x=this.refs.conversation?this.refs.conversation.getMessageList():null;if(!x||!w)return;var y=[],z=c('MessengerVideoAutoplayStore').getMessageIDs(u),aa=z||this.$FantaConversationScroller13()||c('immutable').List();aa.map(function(ba){var ca=c('MercuryAttachment').getVideoElem(ba,x);if(ca)y.push([ba,ca.getBoundingClientRect()]);});if(y.length)c('MessengerVideoAutoplayActions').onScroll(u,z?null:aa,c('immutable').Map(y),w);};t.prototype.$FantaConversationScroller13=function(){return this.props.messages.filter(function(u){return c('MercuryAttachment').isSingleVideoAttachment(u)||c('MercuryAttachment').isSharedVideoAttachmentMessage(u);}).reverse().map(function(u){return u.message_id;});};t.prototype.scrollToBottom=function(u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(v)this.scrollToPosition(v.scrollHeight,u);};t.prototype.scrollToPosition=function(u,v){var w=c('ReactDOM').findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller7&&this.$FantaConversationScroller7.stop();if(v){this.$FantaConversationScroller7=new (c('Animation'))(w).to('scrollTop',u).ease(c('Animation').ease.end).duration(400).go();}else c('Scroll').setTop(w,u);};t.prototype.$FantaConversationScroller19=function(u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);u=u===0?0:u||q;return c('Scroll').getTop(v)+v.clientHeight>=v.scrollHeight-u;};t.prototype.$FantaConversationScroller18=function(){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);return c('Scroll').getTop(u)<u.clientHeight;};t.prototype.$FantaConversationScroller15=function(){var u=this.$FantaConversationScroller8;if(this.$FantaConversationScroller19()){this.$FantaConversationScroller8=true;}else this.$FantaConversationScroller8=false;if(u!==this.$FantaConversationScroller8)this.$FantaConversationScroller1=c('setImmediate')(this.$FantaConversationScroller14);};t.prototype.$FantaConversationScroller10=function(){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(!u)return;var v=c('isEventSupported')('mousewheel')?'mousewheel':c('isEventSupported')('wheel')?'wheel':'DOMMouseScroll',w=function(){this.$FantaConversationScroller15();}.bind(this),x=function aa(){u.addEventListener(v,w,{passive:true});},y=function aa(){u.removeEventListener(v,w,{passive:true});};this.$FantaConversationScroller9.addSubscriptions(c('Arbiter').subscribe('overflow-applied-to-body',function(){return this.$FantaConversationScroller12();}.bind(this)),c('Event').listen(u,'mousedown',w),c('Event').listen(u,'mouseup',w),c('Event').listen(u,'mouseenter',x),c('Event').listen(u,'mouseleave',y),{cancel:y},c('Event').listen(u,'scroll',c('throttle')(this.$FantaConversationScroller16,50)));var z=c('ScrollBoundaryContain').applyToElem(u);if(z)this.$FantaConversationScroller9.addSubscriptions(z);};t.prototype.$FantaConversationScroller11=function(){this.$FantaConversationScroller9.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(u,v){if(this.props.threadID===v){this.$FantaConversationScroller22(false);clearInterval(this.$FantaConversationScroller6);this.$FantaConversationScroller6=setInterval(function(){this.$FantaConversationScroller22(false);}.bind(this),50);}}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(u){clearInterval(this.$FantaConversationScroller6);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(u){clearInterval(this.$FantaConversationScroller6);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,function(u){if(this.props.threadID===u)clearInterval(this.$FantaConversationScroller6);}.bind(this)));};t.prototype.render=function(){var u=this.props,v=u.hasFetchedAll,w=u.messages,x=u.showContextBanner,y=u.thread,z=u.threadID,aa=c('CurrentUser').getID(),ba=c('MercuryConfig').ShowContextBanner,ca=ba&&(l.isEmptyLocalThread(z)||v||x),da=!c('MercuryConfig').ChatSeenHeadsEnabled,ea=this.state.loadingMessages||!y?c('React').createElement(c('XUISpinner.react'),{background:'light',className:"loading",size:'small'}):null;return c('React').createElement('div',{className:"_2v5j"},c('React').createElement('div',{className:'fbNubFlyoutBody scrollable',onClick:function(fa){if(fa.target&&fa.target.classList&&fa.target.classList.contains("_5wd4"))this.props.onFocus&&this.props.onFocus();}.bind(this),ref:'scrollContainer',role:'button',tabIndex:'0'},c('React').createElement('div',{className:'fbNubFlyoutBodyContent'},c('React').createElement(c('FantaPageGreetingLoader.react'),{threadID:z}),c('React').createElement(c('Grid.react'),{className:'conversationContainer',role:'log',cols:1},c('React').createElement(m,{alignv:'bottom'},c('React').createElement('div',{className:'accessible_elem'},i._("Chat conversation start")),ca?c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerContextBannerContainer.react').__setRef('FantaConversationScroller.react'),isContinuation:false,location:c('MercuryShareAttachmentRenderLocations').CHAT,viewer:aa,threadID:z}):null,ea,c('React').createElement('div',{style:w.size>0?{height:'176px'}:ea?{height:'168px'}:{height:'192px'}},c('React').createElement(c('FantaConversation.react'),babelHelpers['extends']({onAttachmentLoad:function(){return this.$FantaConversationScroller12();}.bind(this),scrollbarPadding:this.state.scrollbarPadding,ref:'conversation'},this.props)),c('MercuryConfig').WebCamQuickReply?c('React').createElement(c('MercuryCamQuickReply.react'),{camQuickReplyWillShow:c('emptyFunction'),camQuickReplyDidShow:function(){return this.$FantaConversationScroller12(true);}.bind(this),lastMessage:w.size>0?w.last():undefined,threadID:z,viewer:aa}):null,c('React').createElement(c('ChatTypingIndicators.react'),{threadID:z,indicatorsWillShow:c('emptyFunction'),indicatorsDidShow:function(){return this.$FantaConversationScroller12(true);}.bind(this),viewer:aa}),da?c('React').createElement(c('MercuryLastMessageIndicator.react'),{hideTyping:true,indicatorDidShow:function(){return this.$FantaConversationScroller12(true);}.bind(this),indicatorWillShow:c('emptyFunction'),lastMessage:w.size>0?w.last():null,threadID:z}):null,c('React').createElement(c('MercuryQuickReply.react'),{lastMessage:w.size>0?w.last():undefined,threadID:z,quickReplyWillShow:c('emptyFunction'),quickReplyDidShow:function(){return this.$FantaConversationScroller12(true);}.bind(this),viewer:aa})),c('React').createElement('div',{className:'accessible_elem'},i._("Chat conversation end")))))));};t.prototype.$FantaConversationScroller17=function(){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer),v=c('getElementPosition')(u);c('Arbiter').inform('chatScrolled/'+this.props.threadID,{scrollTop:c('Scroll').getTop(u),top:v.y,viewHeight:v.height});};t.prototype.$FantaConversationScroller22=function(u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(v)this.$FantaConversationScroller23(v.scrollHeight,u);};t.prototype.$FantaConversationScroller23=function(u,v){var w=c('ReactDOM').findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller7&&this.$FantaConversationScroller7.stop();if(v===true){this.$FantaConversationScroller7=new (c('Animation'))(w).to('scrollTop',u).ease(c('Animation').ease.end).duration(400).go();}else c('Scroll').setTop(w,u);};t.propTypes={hasFetchedAll:n.bool.isRequired,isCompact:n.bool.isRequired,isFocused:n.bool.isRequired,messages:n.object.isRequired,onFocus:n.func,onLoadMoreMessages:n.func.isRequired,showContextBanner:n.bool,thread:n.object,threadID:n.string.isRequired};f.exports=t;}),null);
__d('FantaDragAndDropRow.react',['cx','fbt','ix','Bootloader','Image.react','MessengerEnvironment','MercuryAttachment','React','XUICloseButton.react','XUISpinner.react','emptyFunction','ifRequired','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$FantaDragAndDropRow1=function(){var s=this.props,t=s.threadID,u=s.fileData;c('MessengerEnvironment').messengerui?c('ifRequired')('MessengerActions',function(v){v.cancelFileUpload(t,u.id);},function(){c('Bootloader').loadModules(["MessengerActions"],function(v){v.cancelFileUpload(t,u.id);},'FantaDragAndDropRow.react');}):c('ifRequired')('FantaMessageActions',function(v){v.cancelFileUpload(t,u.id);},function(){c('Bootloader').loadModules(["FantaMessageActions"],function(v){v.cancelFileUpload(t,u.id);},'FantaDragAndDropRow.react');});}.bind(this),o;}m.prototype.componentDidMount=function(){c('MessengerEnvironment').messengerui?c('Bootloader').loadModules(["MessengerActions"],c('emptyFunction'),'FantaDragAndDropRow.react'):c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'FantaDragAndDropRow.react');};m.prototype.render=function(){var n=this.props,o=n.fileData,p=n.isUploaded,q=o.file,r='';if(q.type)r=c('MercuryAttachment').getAttachIconClassByMime(q.type);var s=c('joinClasses')(r,"_3tn"),t=p?'done':'',u=c('joinClasses')(t,"_2qh _2qe uploadFileRow");return c('React').createElement('div',{className:u},c('React').createElement(c('XUISpinner.react'),{className:"_2qf"}),c('React').createElement(c('XUICloseButton.react'),{'aria-label':i._("Remove file"),className:"_2qg",shade:'dark',size:'small',onClick:this.$FantaDragAndDropRow1}),c('React').createElement('div',{className:"_4-te"},c('React').createElement('span',{className:s},c('React').createElement(c('Image.react'),{src:j("86988")})),q.name));};f.exports=m;}),null);
__d('FantaDragAndDrop.react',['Bootloader','BootloadOnRender.react','FantaDragAndDropRow.react','MessengerEnvironment','JSResource','LazyComponent.react','MercuryConfig','MercuryShareAttachmentRenderLocations','React','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=960,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$FantaDragAndDrop3=function(r){this.$FantaDragAndDrop7(function(s){s.removeSharePreview(r);});}.bind(this),this.$FantaDragAndDrop4=function(r,s){this.$FantaDragAndDrop7(function(t){t.loadedShareData(r,s);});}.bind(this),this.$FantaDragAndDrop5=function(r){this.$FantaDragAndDrop7(function(s){s.loadingShareData(r);});}.bind(this),n;}l.prototype.componentDidMount=function(){c('MessengerEnvironment').messengerui?c('Bootloader').loadModules(["MessengerActions"],c('emptyFunction'),'FantaDragAndDrop.react'):c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'FantaDragAndDrop.react');};l.prototype.shouldComponentUpdate=function(m){var n=this.props;return n.threadID!==m.threadID||!!(!n.uploadingFiles&&m.uploadingFiles)||!!(n.uploadingFiles&&m.uploadingFiles&&!n.uploadingFiles.equals(m.uploadingFiles))||!!(!n.uploadedFiles&&m.uploadedFiles)||!!(n.uploadedFiles&&m.uploadedFiles&&!n.uploadedFiles.equals(m.uploadedFiles))||!!(!n.sharePreview&&m.sharePreview)||!!(n.sharePreview&&m.sharePreview&&!n.sharePreview.equals(m.sharePreview));};l.prototype.render=function(){var m=this.props,n=m.uploadedFiles,o=m.uploadingFiles,p=m.sharePreview,q=m.threadID,r=p||{},s=r.share,t=r.uri;return c('React').createElement('div',{className:'fbNubFlyoutAttachments'},c('React').createElement('div',{className:'chatAttachmentShelf'},s||t?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MercurySharePreview.react').__setRef('FantaDragAndDrop.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{onClose:this.$FantaDragAndDrop3,onLoaded:this.$FantaDragAndDrop4,onLoading:this.$FantaDragAndDrop5,threadID:q,imageSize:{width:j,height:j},location:c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW,share:s,uri:t})}):null,!c('MercuryConfig').WWWMessengerUploadFilesPreview&&c('React').createElement('div',{ref:function(u){this.$FantaDragAndDrop1=u;}.bind(this)},this.$FantaDragAndDrop6(o,false),this.$FantaDragAndDrop6(n,true))));};l.prototype.$FantaDragAndDrop7=function(m){c('MessengerEnvironment').messengerui?c('ifRequired')('MessengerActions',function(n){m(n);},function(){c('Bootloader').loadModules(["MessengerActions"],function(n){m(n);},'FantaDragAndDrop.react');}):c('ifRequired')('FantaMessageActions',function(n){m(n);},function(){c('Bootloader').loadModules(["FantaMessageActions"],function(n){m(n);},'FantaDragAndDrop.react');});};l.prototype.$FantaDragAndDrop6=function(m,n){var o=this.props.threadID;return m&&m.map(function(p){return c('React').createElement(c('FantaDragAndDropRow.react'),{fileData:p,isUploaded:n,key:n?'uped-'+p.id:'uping-'+p.id,threadID:o});}).toArray();};l.propTypes={threadID:k.string.isRequired,uploadedFiles:k.object,uploadingFiles:k.object};f.exports=l;}),null);
__d('FantaMercuryTabOverflowBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{items:this.props.items}),loader:c('JSResource')('FantaMercuryTabOverflow.react').__setRef('FantaMercuryTabOverflowBootloader.react'),placeholder:c('React').createElement('div',null)});};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FantaTab.react',['cx','EventProfiler','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$FantaTab1=false,m;}k.prototype.componentDidMount=function(){c('EventProfiler').informManualInteractionTimestamp(['MessageJewelListItem','ChatSideBarLink','FirstChatTabOpen'],true);};k.prototype.render=function(){var l=this.props,m=l.isFocused,n=l.isLastTab,o=l.isLastTabOfType,p=l.MainComponent,q=l.MinimizedComponent,r=l.raisedTabCount,s=l.tab,t=l.tabContent,u=s.isMinimized?q:p,v=s.id+(s.isMinimized?'-minimized':'-maximized'),w=this.$FantaTab1&&!s.isMinimized;this.$FantaTab1=s.isMinimized;return c('React').createElement('div',{className:"_5qi9"+(' '+"_5qib")+(this.props.isFocused?' '+"_5qic":'')+(s.isMinimized?' '+"_3001":'')},c('React').createElement(u,{isFocused:m,isHovered:s.isHovered||w,isLastTab:n,isLastTabOfType:o,key:v,raisedTabCount:r,tab:s,tabContent:t}));};f.exports=k;}),null);
__d('FantaTabGroup.react',['cx','FantaTab.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){return !this.props.tabGroup.equals(m.tabGroup)||!!(!this.props.tabContents&&m.tabContents)||!!(this.props.tabContents&&m.tabContents&&!this.props.tabContents.equals(m.tabContents));};l.prototype.render=function(){var m=this.props,n=m.isLastOfTypeChecker,o=m.MainComponent,p=m.MinimizedComponent,q=m.OverflowComponent,r=m.tabContents,s=m.tabGroup,t=s.focusedTabID,u=s.getRaisedandUnraisedTabs(),v=u.raisedTabs,w=u.unraisedTabs,x=void 0;if(n)x=v.findLastKey(function(aa){return n(aa)&&aa.id;});var y=s.allowedRaisedTabs===0?null:this.$FantaTabGroup1(w,q),z=v.count();return c('React').createElement('div',{className:"_59v1"},y,v.map(function(aa){return c('React').createElement(c('FantaTab.react'),{isFocused:aa.id===t,isLastTab:aa===v.last(),isLastTabOfType:aa.id===x,key:aa.id,MainComponent:o,MinimizedComponent:p,raisedTabCount:z,tab:aa,tabContent:r&&r.get(aa.id)});}).toArray());};l.prototype.$FantaTabGroup1=function(m,n){if(!m.isEmpty())return c('React').createElement('div',{className:"_1kws"},c('React').createElement(n,{items:m}));return null;};function l(){i.apply(this,arguments);}l.propTypes={MainComponent:k.func.isRequired,MinimizedComponent:k.func.isRequired,OverflowComponent:k.func.isRequired,tabContents:k.object,tabGroup:k.object.isRequired};f.exports=l;}),null);
__d('MNPlatformAttributionTags',[],(function a(b,c,d,e,f,g){f.exports={ATTRIBUTION_TAGS_PREFIX:'bnp:trigger:',MESSENGER_WEB:'messenger_web',MESSENGER_WEB_SEARCH:'messenger_web_search',M_DOT_ME:'m_dot_me'};}),null);
__d('MessengerStore',['MessengerDispatcher','mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerStore1=c('MessengerDispatcher').register(this.__onDispatch.bind(this));}h.prototype.getDispatchToken=function(){return this.$MessengerStore1;};h.prototype.emitChange=function(){this.emit('change');};h.prototype.destroy=function(){c('MessengerDispatcher').unregister(this.$MessengerStore1);};c('mixInEventEmitter')(h,{change:true});f.exports=h;}),null);
__d('MessengerAttributionTagsStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null};}j.prototype.getState=function(){'use strict';return this.$MessengerAttributionTagsStore1;};j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('MessengerActions').Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=k.messagingTags;this.$MessengerAttributionTagsStore1.threadID=k.threadID;this.emitChange();break;case c('MessengerActions').Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break;}};f.exports=new j();}),null);
__d('MNPlatformTagsDataManager',['MessagingSourceEnum','MessengerActions','MessengerAttributionTagsStore','MNPlatformAttributionTags'],(function a(b,c,d,e,f,g){'use strict';f.exports={getTags:function h(){var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=null;switch(i){case c('MessagingSourceEnum').PAGES_MESSAGE_SHORTLINK:j=c('MNPlatformAttributionTags').M_DOT_ME;break;case c('MessagingSourceEnum').MESSENGER_WEB:j=c('MNPlatformAttributionTags').MESSENGER_WEB;break;case c('MessagingSourceEnum').MESSENGER_WEB_SEARCH:j=c('MNPlatformAttributionTags').MESSENGER_WEB_SEARCH;break;default:j='';break;}if(j!=='')j=c('MNPlatformAttributionTags').ATTRIBUTION_TAGS_PREFIX+j;return [j];},updateThreadTabAfterSelectThread:function h(){var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=arguments.length<=1||arguments[1]===undefined?null:arguments[1],k=this.getTags(i);c('MessengerActions').changeThreadTag(k,j);},hasThreadTags:function h(i){var j=c('MessengerAttributionTagsStore').getState();return !!(j.messagingTags&&i&&j.threadID&&j.threadID.toString()===i);},getThreadTags:function h(){var i=c('MessengerAttributionTagsStore').getState();return i.messagingTags;}};}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/postback\/",{cta_id:{type:"String",required:true},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}});}),null);
__d('MNCommercePostbackCTADataManager',['AsyncRequest','BanzaiODS','CurrentUser','getPageIDFromThreadID','MercuryMessageActions','MercuryMessageObject','MercurySourceType','MNPlatformTagsDataManager','XMNCommercePostbackCTAController'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryMessageActions').get();i.prototype.send=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=arguments.length<=2||arguments[2]===undefined?null:arguments[2],m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=c('XMNCommercePostbackCTAController').getURIBuilder().setString('cta_id',j).setString('ref',l).setString('message_id',m).getURI();if(k!==null){new (c('AsyncRequest'))().setURI(n).setMethod('POST').setErrorHandler(k).send();}else new (c('AsyncRequest'))().setURI(n).setMethod('POST').send();};i.prototype.sendAndConfirm=function(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],o=arguments.length<=5||arguments[5]===undefined?null:arguments[5],p=arguments.length<=6||arguments[6]===undefined?[]:arguments[6],q=arguments.length<=7||arguments[7]===undefined?null:arguments[7];if(k!==null)this.sendConfirmationText(k,l,m,p);this.send(j,n,o,q);};i.prototype.sendConfirmationText=function(j,k,l){if(!k){c('BanzaiODS').bumpEntityKey('messenger_commerce','confirm_message_failed.empty_threadID');}else{var m=new (c('MercuryMessageObject'))(c('CurrentUser').getID()),n=[],o=c('getPageIDFromThreadID')(k);if(c('MNPlatformTagsDataManager').hasThreadTags(o))n=c('MNPlatformTagsDataManager').getThreadTags();h.send(m.constructCTAConfirmationMessageObject(j,c('MercurySourceType').TITAN_WEB,k,l,n));if(n&&n.length>0)c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread();}};function i(){}f.exports=new i();}),null);
__d('FantaPageComposerNullState.react',['BootloadOnRender.react','JSResource','LazyComponent.react','MNCommercePostbackCTADataManager','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$FantaPageComposerNullState1=function(){var p=this.props,q=p.nullPageID,r=p.nullPageTitle,s=p.threadID;c('MNCommercePostbackCTADataManager').sendAndConfirm(q,r,s);}.bind(this),l;}j.prototype.render=function(){var k=this.props.nullPageTitle;return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatPageComposerNullState.react').__setRef('FantaPageComposerNullState.react'),placeholder:c('React').createElement('div',{style:{height:27}}),component:c('React').createElement(c('LazyComponent.react'),{title:k,onClick:this.$FantaPageComposerNullState1})});};f.exports=j;}),null);
__d('FantaPendingActions.react',['Bootloader','BootloadOnRender.react','FantaTabActions','JSResource','LazyComponent.react','MercuryThreadActions','MessengerMessageRequestsTypedLogger','MessageRequestUtils','MessagingTag','React','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MercuryThreadActions').get();h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaPendingActions3=function(){var q=this.props.thread,r=!!q&&c('MessageRequestUtils').isFiltered(q);new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_delete_request').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType(r?'other':'pending').setThreadKeyWeb(this.props.threadID).setEntryPoint(null).log();}.bind(this),this.$FantaPendingActions4=function(q){var r=this.props.thread,s=!!r&&c('MessageRequestUtils').isFiltered(r);if(q==='hide')new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_decline_cancel').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType(s?'other':'pending').setThreadKeyWeb(this.props.threadID).setEntryPoint('inbox_banner').log();}.bind(this),this.$FantaPendingActions1=function(){var q=this.props,r=q.thread,s=q.threadID,t=!!r&&c('MessageRequestUtils').isFiltered(r);if(t){c('Bootloader').loadModules(["WebMessengerDeleteThreadDialog"],function(u){u.show(s,this.$FantaPendingActions3,this.$FantaPendingActions4,function(){return c('FantaTabActions').closeTab(s);});}.bind(this),'FantaPendingActions.react');}else c('Bootloader').loadModules(["WebMessengerDeclineMRDialog"],function(u){u.show(r,s,function(){return c('FantaTabActions').closeTab(s);});},'FantaPendingActions.react');new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_decline_attempt').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType(t?'other':'pending').setThreadKeyWeb(s).setEntryPoint(null).log();}.bind(this),this.$FantaPendingActions2=function(){var q=this.props.thread,r=!!q&&c('MessageRequestUtils').isFiltered(q);j.changeFolder(this.props.threadID,c('MessagingTag').INBOX);new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_accept_request').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType(r?'other':'pending').setThreadKeyWeb(this.props.threadID).setEntryPoint(null).log();}.bind(this),m;}k.prototype.render=function(){var l=this.props.thread,m=!!l&&c('MessageRequestUtils').isFiltered(l);return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatPendingActions.react').__setRef('FantaPendingActions.react'),placeholder:c('React').createElement('div',{style:{height:27}}),component:c('React').createElement(c('LazyComponent.react'),{isFiltered:m,onDeleteClick:this.$FantaPendingActions1,onReplyClick:this.$FantaPendingActions2})});};f.exports=k;}),null);
__d("XPhotosWaterfallBatchLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/photos\/logging\/waterfall\/batch\/",{});}),null);
__d('PhotosUploadWaterfall',['AsyncRequest','AsyncSignal','Banzai','PhotosUploadWaterfallXConfig','XPhotosWaterfallBatchLoggingController','emptyFunction','randomInt','throttle'],(function a(b,c,d,e,f,g){var h=[],i={APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',APP_MESSENGER:'messenger',APP_HTML5:'html5',APP_CHAT:'chat',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,CERROR_RESIZING_FAILED:6,CERROR_MARKER_EXTRACTION_FAILED:9,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,CLIENT_ERROR:7,RECOVERABLE_CLIENT_ERROR:12,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_START:18,SELECT_CANCELED:19,CANCEL:22,CANCEL_DURING_UPLOAD:83,ONE_RESIZING_START:2,ONE_UPLOAD_START:10,ONE_UPLOAD_DONE:29,ONE_RESIZING_DONE:34,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,PUBLISH_SENT:99,PUBLISH_START:100,PUBLISH_SUCCESS:101,PUBLISH_FAILURE:102,CLUSTERING_START:103,CLUSTERING_SUCCESS:104,CLUSTERING_FAILURE:105,POST_BUTTON_CLICKED:110,POST_BUTTON_ERROR:111,PHOTO_DELETED:114,PUBLISH_CLIENT_SUCCESS:115,PHOTO_ROTATED:117,SAVE_DRAFT_BUTTON_CLICKED:123,RECOVERY_START_ON_CLIENT:124,CHANGE_PHOTO_QUALITY_SETTING:126,TAG_ADDED:127,TAG_REMOVED:128,TAB_BUTTON_CLICKED:129,DONE_SPHERICAL_CHECK:131,FAIL_SPHERICAL_CHECK:133,EDITABLE_PHOTO_FETCH_START:106,EDITABLE_PHOTO_FETCH_SUCCESS:107,EDITABLE_PHOTO_FETCH_FAILURE:108,EDITABLE_PHOTO_FETCH_DELAY:116,CANCEL_INDIVIDUAL_UPLOAD:109,MISSING_OVERLAY_NODE:118,PUBLISH_RETRY_FAILURE:119,MISSING_UPLOAD_STATE:120,SESSION_POSTED:72,POST_PUBLISHED:80,ONE_UPLOAD_CANCELED:81,ONE_UPLOAD_CANCELED_DURING_UPLOAD:82,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,FALLBACK_TO_HTML5:130,RETRY_UPLOAD:17,TAGGED_ALL_FACES:14,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,VAULT_SYNCED_PAGED_LINK_CLICKED:84,VAULTBOX:'vaultbox',GRID:'grid',SPOTLIGHT_VAULT_VIEWER:'spotlight_vault_viewer',REF_VAULT_NOTIFICATION:'vault_notification',_checkRequiredFields:function k(l){},sendBanzai:function k(l,m){this._checkRequiredFields(l);var n={};l.scuba_ints=l.scuba_ints||{};l.scuba_ints.client_time=Math.round(Date.now()/1000);if(c('PhotosUploadWaterfallXConfig').retryBanzai){n.retry=true;l.scuba_ints.nonce=c('randomInt')(4294967296);}c('Banzai').post(c('PhotosUploadWaterfallXConfig').deprecatedBanzaiRoute,l,n);if(m)setTimeout(m,0);},sendSignal:function k(l,m){this._checkRequiredFields(l);if(c('PhotosUploadWaterfallXConfig').useBanzai){this.sendBanzai(l,m);}else{var n=new (c('AsyncSignal'))('/ajax/photos/waterfall.php',{data:JSON.stringify(l)}).setHandler(m);if(c('PhotosUploadWaterfallXConfig').timeout)n.setTimeout(10*1000);n.send();}},queueLog:function k(l,m){h.push(l);if(!!m){this.flushQueue(m);}else j();},flushQueue:function k(l){var m=JSON.stringify(h);h=[];var n=c('XPhotosWaterfallBatchLoggingController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(n).setData({logs:m}).setFinallyHandler(l||c('emptyFunction')).setTimeoutHandler(10*1000,l||c('emptyFunction')).send();}},j=c('throttle')(i.flushQueue,c('PhotosUploadWaterfallXConfig').batchInterval*1000);f.exports=i;}),null);
__d('getEveryoneMentionIndex',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.findIndex(function(j){return j.type=='t';});}f.exports=h;}),null);
__d('FantaTabComposer.react',['fbt','ChatTabComposerContainer.react','FantaTabActions','Keys','LogHistory','MercuryIDs','MercuryThreadIDMap','MercuryThreads','PhotosUploadWaterfall','React','SimpleXUIDialog','TypingDetectorController','WaterfallIDGenerator','WorkFileUploadsGating','XUIDialogButton.react','XUIDialogCancelButton.react','emptyFunction','getEveryoneMentionIndex'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreadIDMap').get(),l=c('MercuryThreads').get(),m=c('LogHistory').getInstance('chat_tab_view'),n=c('React').PropTypes,o=/^\s*$/;i=babelHelpers.inherits(p,c('React').Component);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$FantaTabComposer3=c('WaterfallIDGenerator').generate(),this.$FantaTabComposer4=function(v,w){var x=this.props.threadID;k.getServerIDFromClientID(x,function(y){this.$FantaTabComposer2=new (c('TypingDetectorController'))(c('MercuryIDs').getUserIDFromThreadID(x),v,'mercury-chat',null,y,w);}.bind(this));}.bind(this),this.$FantaTabComposer14=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').UPLOAD_START,v);this.props.onSendPhoto(v,this.$FantaTabComposer1.onSend);this.$FantaTabComposer16('submit',v);this.focusInput();}.bind(this),this.$FantaTabComposer8=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CLIENT_ERROR,v);this.$FantaTabComposer16('failed',v);}.bind(this),this.$FantaTabComposer10=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CLIENT_ERROR,v);this.$FantaTabComposer16('failed',v);}.bind(this),this.$FantaTabComposer12=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CANCEL_DURING_UPLOAD,v);this.$FantaTabComposer16('canceled',v);}.bind(this),this.$FantaTabComposer13=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').ALL_UPLOADS_DONE,v);this.$FantaTabComposer16('completed',v);var w=v.image_ids.length||v.attachments.length;this.$FantaTabComposer17(w);}.bind(this),this.$FantaTabComposer9=function(){this.props.onSendMessage('',this.$FantaTabComposer1.onSend);}.bind(this),this.$FantaTabComposer11=function(v){this.props.onSelectSticker(v,function(){return this.$FantaTabComposer1.getInput().focus();}.bind(this));}.bind(this),this.$FantaTabComposer6=function(v,w,x){this.props.onSendHotLike(v.emoji,w,x,function(){return this.$FantaTabComposer1.getInput().focus();}.bind(this));}.bind(this),this.$FantaTabComposer7=function(v){this.$FantaTabComposer1.getInput().insertEmoji(v);}.bind(this),this.$FantaTabComposer5=function(event){var v=this.props.threadID;if(event.keyCode===c('Keys').RETURN&&!event.shiftKey){var w=this.$FantaTabComposer20();if(w){var x=this.$FantaTabComposer21().trim(),y=c('getEveryoneMentionIndex')(w)>-1;if(y){this.$FantaTabComposer18(x,w);}else this.$FantaTabComposer19(x,w);}}if(event.keyCode===c('Keys').DOWN&&event.shiftKey&&this.hasEmptyInput()){c('FantaTabActions').minimizeTab(v);return;}}.bind(this),r;}p.prototype.componentDidMount=function(){var q=this.props,r=q.threadID,s=q.participants;if(this.props.isFocused&&s.length>0&&!l.isEmptyLocalThread(r))this.focusInput();};p.prototype.componentDidUpdate=function(q){if(this.props.isFocused&&this.props.isFocused!==q.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput();};p.prototype.componentWillUnmount=function(){this.$FantaTabComposer2&&this.$FantaTabComposer2.destroy();};p.prototype.render=function(){var q=this.props,r=q.participants,s=q.threadID,t=q.viewer;if(r.length===0)return c('React').createElement('div',null);return c('React').createElement(c('ChatTabComposerContainer.react'),{disableInput:this.props.disableInput,disableFileUploads:!c('WorkFileUploadsGating').canUploadFiles,fileUploader:this.props.fileUploader,initializeThingsWithInputFn:this.$FantaTabComposer4,inputKeyDown:this.$FantaTabComposer5,onBlur:c('emptyFunction'),onCustomLikeSelect:this.$FantaTabComposer6,onEmojiSelect:this.$FantaTabComposer7,onEscape:this.props.onEscape,onFileUploadFail:this.$FantaTabComposer8,onMount:function u(){},onP2PTrigger:this.$FantaTabComposer9,onPhotoUploadFail:this.$FantaTabComposer10,onStickerSelect:this.$FantaTabComposer11,onTab:this.props.onTab,onUploadCancel:this.$FantaTabComposer12,onUploadComplete:this.$FantaTabComposer13,onUploadSubmit:this.$FantaTabComposer14,placeholder:h._("Type a message..."),ref:function(u){this.$FantaTabComposer1=u;if(this.props.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput();}.bind(this),resizeFn:function u(){},threadID:s,viewer:t});};p.prototype.$FantaTabComposer15=function(q,r){c('PhotosUploadWaterfall').sendSignal(babelHelpers['extends']({qn:this.$FantaTabComposer3,step:q,uploader:c('PhotosUploadWaterfall').APP_CHAT},r||{}));};p.prototype.$FantaTabComposer17=function(q){if(q===0)return;this.$FantaTabComposer15(c('PhotosUploadWaterfall').POST_PUBLISHED,{count:q});this.$FantaTabComposer3=c('WaterfallIDGenerator').generate();};p.prototype.$FantaTabComposer16=function(q,r){m.debug('photo_uploader:'+q,'{}');};p.prototype.$FantaTabComposer18=function(q,r){var s=h._("Mention everyone?").toString(),t=h._("Doing so will send a mention to everyone in this group.").toString(),u=h._("Mention \u0040everyone!").toString(),v=c('React').createElement('div',null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:u,use:'confirm',onClick:function(){this.$FantaTabComposer19(q,r);}.bind(this)}));c('SimpleXUIDialog').showEx(t,s,v,null,null);};p.prototype.$FantaTabComposer19=function(q,r){this.props.onSendMessage({message:q,mentions:r},this.$FantaTabComposer1.onSend);return;};p.prototype.focusInput=function(){this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().focus();};p.prototype.$FantaTabComposer21=function(){return this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().getValue()||'';};p.prototype.$FantaTabComposer20=function(){if(!this.$FantaTabComposer1)return null;var q=this.$FantaTabComposer1.getInput();return q.getMentions?q.getMentions():null;};p.prototype.hasEmptyInput=function(){return o.test(this.$FantaTabComposer21());};p.propTypes={fileUploader:n.object,isFocused:n.bool.isRequired,onEscape:n.func.isRequired,onSelectSticker:n.func.isRequired,onSendHotLike:n.func.isRequired,onSendMessage:n.func.isRequired,onSendPhoto:n.func.isRequired,onTab:n.func.isRequired,participants:n.array.isRequired,threadID:n.string.isRequired,viewer:n.string.isRequired};f.exports=p;}),null);
__d('FantaTabSheetPlaceholder.react',['cx','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(){return c('React').createElement('div',{className:"_w_z"},c('React').createElement(c('XUISpinner.react'),null));};f.exports=i;}),null);
__d('FantaTabSheet.react',['cx','BootloadedComponent.react','CurrentUser','FantaTabSheetActions','FantaTabSheetPlaceholder.react','JSResource','MercuryIDs','MercuryMessages','MercuryParticipants','MercurySheetPolicy','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryMessages').get(),l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.shouldComponentUpdate=function(n){var o=this.props;return o.threadID!==n.threadID||!o.tabContent.equals(n.tabContent);};m.prototype.render=function(){var n=this.props,o=n.threadID,p=n.tabContent,q=p.openSheet,r=p.pageIndicatorDescription,s=p.privacyController,t=p.thread,u=p.typeahead,v=void 0;switch(q){case c('MercurySheetPolicy').sheets.ChatThreadIsMutedTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetChatThreadIsMuted.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatNameConversationTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetNameConversation.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet:var w=c('MercuryIDs').getUserIDFromThreadID(o);if(w){var x=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(w));if(x&&s)v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserBlockedTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),gender:x.gender,key:q,privacyActionController:s,shortName:x.short_name});}break;case c('MercurySheetPolicy').sheets.ChatOfflineTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetOffline.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,privacyController:s,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatReadOnlyTabSheet:case c('MercurySheetPolicy').sheets.ChatReadOnlyPermanentTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetReadOnly.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.FantaAddFriendsSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetAddFriends.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o,typeahead:u});break;case c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetAddMoreFriends.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o,typeahead:u});break;case c('MercurySheetPolicy').sheets.ChatThreadIsMessageBlockedSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetMessageBlocked.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserFocusSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserFocusSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserFocusBypassSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserFocusBypassSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatUserTimezoneSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserTimezoneSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),data:p.timezoneInfo,key:q,onDismiss:function ca(){return c('FantaTabSheetActions').closeUserTimezoneSheet(o);},resize:c('emptyFunction'),threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUploadWarningTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUploadWarningTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatNoRecipientsTabSheet:if(!c('MercuryIDs').isCanonical(o))v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatNoRecipientsTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaNewMessagesTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatEmployeeAwaySheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatEmployeeAwaySheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatUserIsPersonalUserSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaUserIsPersonalUserSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserIsWorkUserSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaUserIsWorkUserSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatEventReminderTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaEventReminderTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatAppointmentBanner:if(t){var y=k.getCurrentlyLoadedMessages(o);v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatAppointmentBannerRoot.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),pageID:t.other_user_fbid,userID:c('CurrentUser').getID(),count:100,messageList:y,appointmentBannerDidUpdate:c('emptyFunction'),key:q,threadID:o});}break;case c('MercurySheetPolicy').sheets.ChatMontageSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatMontageSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o,onResize:c('emptyFunction')});break;case c('MercurySheetPolicy').sheets.ChatJoinCallSheet:if(t){var z=t.rtc_call_data,aa=t.thread_fbid;v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatJoinCallSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,rtcCallData:z,threadFBID:aa});}break;case c('MercurySheetPolicy').sheets.ChatRoomAssociatedObjectSheet:if(t){var ba=t.associated_object;v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatRoomAssociatedObjectSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,associatedObject:ba});}break;}if(v)return c('React').createElement('div',{className:"_1sk5"},c('React').createElement('div',{className:"_1sk6"},v));return null;};function m(){i.apply(this,arguments);}m.propTypes={threadID:l.string.isRequired,tabContent:l.object.isRequired};f.exports=m;}),null);
__d('FantaTabMain.react',['cx','fbt','Bootloader','BootloadOnRender.react','ChatBehavior','ChatTabBlinking','CurrentUser','DragDropTarget','Event','FantaAvailableStatus','FantaChatHeaderContainer.react','FantaConversationScroller.react','FantaDragAndDrop.react','FantaDispatcher','FantaMessageActions','FantaPageComposerNullState.react','FantaPendingActions.react','FantaTabActions','FantaTabComposer.react','FantaTabSheet.react','immutable','JSResource','Keys','LazyComponent.react','MercuryConfig','MercuryIDs','MessageRequestUtils','MessengerBotMenuDataFetcher','MNCommercePageSetting','Parent','React','ReactDOM','SimpleXUIDialog','WorkFileUploadsGating','WorkFocusMode','convertMIGColorToFIGColor','FBID','getPageIDFromThreadID','getVendorPrefixedEventName','idx','ifRequired','joinClasses','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=/\D+/g,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={closing:false,disableInput:false},this.$FantaTabMain20=function(event){var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id);if(!t||!u){if(this.$FantaTabMain9){clearTimeout(this.$FantaTabMain9);this.$FantaTabMain9=null;return;}c('FantaTabActions').hoveredTab(this.props.tab.id);}}.bind(this),this.$FantaTabMain21=function(event){var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id);if(!t||!u){if(this.$FantaTabMain9)clearTimeout(this.$FantaTabMain9);this.$FantaTabMain9=setTimeout(function(){this.$FantaTabMain9=null;c('FantaTabActions').unhoveredTab(this.props.tab.id);}.bind(this),500);}}.bind(this),this.$FantaTabMain18=function(event){var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id);if(!t||!u)if(!event.relatedTarget||!event.target){this.$FantaTabMain7=setTimeout(function(){this.$FantaTabMain7=null;this.$FantaTabMain22(this.props.tab.id);}.bind(this),100);}else this.$FantaTabMain22(this.props.tab.id);}.bind(this),this.$FantaTabMain19=function(event){if(this.$FantaTabMain7){clearTimeout(this.$FantaTabMain7);this.$FantaTabMain7=null;return;}var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id),v=event.target;if(!(v&&v.classList&&(v.classList.contains("_3olu")||v.classList.contains("_61td"))))if(!t||!u)if(!c('FantaDispatcher').isDispatching())c('FantaTabActions').focusTab(this.props.tab.id);}.bind(this),this.$FantaTabMain24=function(t){c('FantaMessageActions').linkPreview(this.props.tab.id,t);}.bind(this),this.$FantaTabMain23=function(t){c('FantaMessageActions').prepareFilesForSend(this.props.tab.id,t);}.bind(this),this.$FantaTabMain14=function(t){if(t.keyCode===c('Keys').ESC){this.$FantaTabMain2(true);t.preventDefault();t.stopPropagation();}}.bind(this),this.$FantaTabMain15=function(t){if(t.keyCode===c('Keys').TAB)this.$FantaTabMain16(t);}.bind(this),this.$FantaTabMain16=function(event){var t=this.props.raisedTabCount;if(t>1){event.preventDefault();this.$FantaTabMain3(event.ctrlKey,event.shiftKey);}}.bind(this),this.$FantaTabMain2=function(t){if(!this.refs.composer||this.refs.composer.hasEmptyInput()&&!this.$FantaTabMain25()){this.$FantaTabMain26(t);}else this.$FantaTabMain27(t);}.bind(this),p;}n.prototype.componentWillMount=function(){this.$FantaTabMain2=c('throttle')(this.$FantaTabMain2,100);this.$FantaTabMain3=c('throttle')(this.$FantaTabMain3,100);};n.prototype.componentDidMount=function(){this.$FantaTabMain10();this.$FantaTabMain11();this.$FantaTabMain12();this.$FantaTabMain13();};n.prototype.componentDidUpdate=function(){this.$FantaTabMain11();};n.prototype.componentWillUnmount=function(){this.$FantaTabMain4&&this.$FantaTabMain4.disable();};n.prototype.shouldComponentUpdate=function(o,p){var q=this.props,r=this.state;return q.hasFetchedAll!==o.hasFetchedAll||q.isFocused!==o.isFocused||q.isHovered!==o.isHovered||q.isLastGroupTab!==o.isLastGroupTab||!q.messages.equals(o.messages)||!q.tab.equals(o.tab)||!q.tabContent&&!!o.tabContent||q.tabContent&&!q.tabContent.equals(o.tabContent)||q.thread!==o.thread||r.closing!==p.closing||r.disableInput!==p.disableInput;};n.prototype.$FantaTabMain11=function(){var o=this.props,p=o.tab,q=o.thread,r=p.id;if(!q)return;var s=this.refs.root&&c('ReactDOM').findDOMNode(this.refs.root);if(!s)return;var t=q.unread_count;if(c('WorkFocusMode')&&c('WorkFocusMode').currentViewerInFocusMode(r))return;if(t!==undefined){var u=!!t&&(!c('ChatBehavior').showsTabUnreadUI||c('ChatBehavior').showsTabUnreadUI());if(u){c('ChatTabBlinking').blinkTab(r,{getTabElem:function v(){return s;},isFocused:function(){return this.props.isFocused;}.bind(this),isHovered:function v(){return false;}});}else c('ChatTabBlinking').unblinkTab(r);}};n.prototype.render=function(){var o=this.props,p=o.hasFetchedAll,q=o.isFocused,r=o.isHovered,s=o.isLastGroupTab,t=o.messages,u=o.onLoadMoreMessages,v=o.onSelectSticker,w=o.onSendHotLike,x=o.onSendMessage,y=o.onSendPhoto,z=o.showContextBanner,aa=o.tab,ba=o.tabContent,ca=o.thread,da=aa.id,ea=c('CurrentUser').getID(),fa=ba&&ba.fileUploader,ga=ba&&ba.sharePreview,ha=fa&&fa.uploadingFiles,ia=fa&&fa.uploadedFiles,ja=ca&&c('convertMIGColorToFIGColor')(ca.custom_color),ka=ba&&ba.nullPageID,la=ba&&ba.nullPageTitle,ma=ka&&la&&ca&&ca.message_count===0,na=ca&&ca.participants||[],oa=ba&&ba.threadPreviewRecipients||c('immutable').List(),pa=na.length>0?na:oa.toArray(),qa=ca&&c('MessageRequestUtils').isMessageRequest(ca)?c('React').createElement(c('FantaPendingActions.react'),{thread:ca,threadID:da}):ma&&ka&&la?c('React').createElement(c('FantaPageComposerNullState.react'),{nullPageID:ka,nullPageTitle:la,threadID:da}):c('React').createElement('div',{className:"fbNubFlyoutFooter"+(this.state.disableInput?' '+"fbNubFlyoutComposerDisabled":'')},c('React').createElement(c('FantaTabComposer.react'),{disableInput:this.state.disableInput,fileUploader:fa,isFocused:q,onEscape:this.$FantaTabMain14,onKeyDown:this.$FantaTabMain14,onKeyPress:this.$FantaTabMain15,onSelectSticker:v,onSendHotLike:w,onSendMessage:x,onSendPhoto:y,onTab:this.$FantaTabMain16,ref:'composer',participants:pa,threadID:da,viewer:ea})),ra=c('FantaAvailableStatus').isAvailable(ca,da),sa=this.$FantaTabMain17()&&c('MercuryConfig').ChatTabCompactHideSheet?null:c('React').createElement(c('FantaTabSheet.react'),{tabContent:ba,threadID:da}),ta=ba&&ba.joinableInterstitialData?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatJoinableInterstitialPreview.react').__setRef('FantaTabMain.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{data:ba.joinableInterstitialData,isActive:q,onClose:this.$FantaTabMain2})}):c('React').createElement('div',{className:'fbNubFlyoutInner'},c('React').createElement(c('FantaChatHeaderContainer.react'),{customColor:ja,isFocused:q,isLastGroupTab:s,onClose:this.$FantaTabMain2,thread:ca,threadID:da,viewer:ea}),c('React').createElement('div',{className:"_1ia"+(' '+"_2sz2"),ref:function(ua){this.$FantaTabMain5=ua;}.bind(this)},sa,c('React').createElement(c('FantaConversationScroller.react'),{hasFetchedAll:p,isCompact:this.$FantaTabMain17(),isFocused:q,messages:t,onFocus:function(){return this.refs.composer&&this.refs.composer.focusInput();}.bind(this),onLoadMoreMessages:u,showContextBanner:z,thread:ca,threadID:da,viewer:ea}),c('React').createElement('div',{className:"_3bpu"}),c('React').createElement('div',{className:"_2hc2"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('P2PChatThreadBannerContainer.react').__setRef('FantaTabMain.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{isVisible:true,otherUserID:c('MercuryIDs').getUserIDFromThreadID(da),threadID:da})})),c('React').createElement('div',{className:"_4g6x"},c('React').createElement('div',{className:"_4g6y"},c('React').createElement('div',{className:"_4g6z _4g71"},i._("Drag Link\/Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g6_"},i._("Drop Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g70"},i._("Drop Link Here")))),qa,c('React').createElement(c('FantaDragAndDrop.react'),{threadID:da,uploadedFiles:ia,uploadingFiles:ha,sharePreview:ga})));return c('React').createElement('div',{className:c('joinClasses')((this.state.closing?"_2suj":'')+(' '+"_3_9e")+(' '+"_s0f")+(' '+"_50mz")+(' '+"_50m_")+(ra?' '+"_4-0b":'')+(' '+"fbNub")+(' '+"_50-v")+(q?' '+"focusedTab":'')+(r?' '+"hoveredTab":'')+(c('MercuryConfig').ChatTabCompact?' '+"canBeCompactTab":'')+(this.$FantaTabMain17()?' '+"_61il":'')+(c('MercuryConfig').ChatTabCompact&&c('MercuryConfig').ChatTabCompactHideInput&&this.$FantaTabMain17()?' '+"_61im":'')+(c('MercuryConfig').ChatTabCompact&&c('MercuryConfig').ChatTabCompactAnimate?' '+"_61in":'')+(' '+"opened")+(' '+"_27_3"),'fantaTabMain-'+da),onBlur:this.$FantaTabMain18,onFocus:this.$FantaTabMain19,onKeyDown:this.$FantaTabMain14,onKeyPress:this.$FantaTabMain15,onMouseEnter:this.$FantaTabMain20,onMouseLeave:this.$FantaTabMain21,ref:'root',role:'presentation'},c('React').createElement('div',{className:'fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent',role:'complementary'},c('React').createElement('div',{className:'fbNubFlyoutOuter'},ta)));};n.prototype.$FantaTabMain22=function(o){if(!c('FantaDispatcher').isDispatching())c('FantaTabActions').blurTab(this.props.tab.id);if(this.$FantaTabMain9){clearTimeout(this.$FantaTabMain9);this.$FantaTabMain9=null;}c('FantaTabActions').unhoveredTab(o);};n.prototype.$FantaTabMain13=function(){var o=c('getPageIDFromThreadID')(this.props.tab.id);if(o)c('MessengerBotMenuDataFetcher').getHasPageSetting(o,function(p){this.setState({disableInput:p});}.bind(this),function(){this.setState({disableInput:false});}.bind(this),c('MNCommercePageSetting').COMPOSER_INPUT_DISABLED);};n.prototype.$FantaTabMain10=function(){if(c('WorkFileUploadsGating').canUploadFiles&&!this.$FantaTabMain4){var o=c('ReactDOM').findDOMNode(this.$FantaTabMain5);if(o){var p=new (c('DragDropTarget'))(o);this.$FantaTabMain4=p;p.setOnFilesDropCallback(this.$FantaTabMain23);p.setOnURLDropCallback(this.$FantaTabMain24);p.enable();}}};n.prototype.$FantaTabMain3=function(o,p){if(!o)if(p){c('FantaTabActions').focusPreviousTab();}else c('FantaTabActions').focusNextTab();};n.prototype.$FantaTabMain25=function(){return this.$FantaTabMain28()||this.$FantaTabMain29();};n.prototype.$FantaTabMain28=function(){var o,p,q=this.props.tabContent,r=((o=q)!=null?(o=o.fileUploader)!=null?o.uploadedFiles:o:o)||{size:0},s=((p=q)!=null?(p=p.fileUploader)!=null?p.uploadingFiles:p:p)||{size:0};return r.size>0||s.size>0;};n.prototype.$FantaTabMain29=function(){var o,p=this.props.tabContent,q=(o=p)!=null?o.sharePreview:o;return !!(q&&q.params&&q.type);};n.prototype.$FantaTabMain26=function(o){var p=this.props,q=p.tab,r=p.tabContent,s=r&&r.threadPreviewID?r.threadPreviewID:q.id,t=c('ReactDOM').findDOMNode(this.refs.root);this.$FantaTabMain1=setTimeout(function(){return o?c('FantaTabActions').closeAndTabNext(s):c('FantaTabActions').closeTab(s);},1.2*c('ifRequired')('cssVar',function(v){return "200ms".replace(l,'');},function(){return 200;}));var u=c('Event').listen(t,c('getVendorPrefixedEventName')('animationend'),function(v){if(v.animationName==='closeChatTab'){o?c('FantaTabActions').closeAndTabNext(s):c('FantaTabActions').closeTab(s);clearTimeout(this.$FantaTabMain1);u.remove();}}.bind(this));this.$FantaTabMain30();this.setState({closing:true});};n.prototype.$FantaTabMain27=function(o){var p=this.props.tab,q=p.id;c('FantaTabActions').blurTab(q);var r=i._("Are you sure you want to close this chat window?"),s=i._("You haven't sent your message.");c('SimpleXUIDialog').showConfirm(r,s,function(t){if(t){o?c('FantaTabActions').closeAndTabNext(q):c('FantaTabActions').closeTab(q);}else c('FantaTabActions').focusTab(q);},{autofocusConfirm:true,useReactFocusBehavior:true});};n.prototype.$FantaTabMain12=function(){this.$FantaTabMain8=Math.floor(Date.now()/1000);};n.prototype.$FantaTabMain30=function(){var o=this.props.thread,p=o?o.other_user_fbid:null,q=Math.floor(Date.now()/1000),r=this.$FantaTabMain8;if(o&&p&&!c('FBID').isUser(p))c('Bootloader').loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(s,t,u,v,w){s.log(p,t.CLICK,u.MESSAGE_FANTA_TAB_CLOSE,'',['pages_surface_team'],{open_tab_timestamp:r,close_tab_timestamp:q,last_message_timestamp:o.last_message_timestamp,message_count:o.message_count,snippet_sender:o.snippet_sender,participants:o.participants});v.notify(w.MESSAGES_FANTA_TAB_CLOSE,p,{open_tab_timestamp:r,close_tab_timestamp:q,last_message_timestamp:o.last_message_timestamp,message_count:o.message_count,snippet_sender:o.snippet_sender,participants:o.participants});},'FantaTabMain.react');};n.prototype.$FantaTabMain17=function(){return c('MercuryConfig').ChatTabCompact&&!this.props.isFocused&&!this.props.isHovered;};n.propTypes={hasFetchedAll:m.bool.isRequired,isFocused:m.bool.isRequired,isHovered:m.bool.isRequired,isLastGroupTab:m.bool.isRequired,messages:m.object,onLoadMoreMessages:m.func.isRequired,onSelectSticker:m.func.isRequired,onSendHotLike:m.func.isRequired,onSendMessage:m.func.isRequired,onSendPhoto:m.func.isRequired,raisedTabCount:m.number,showContextBanner:m.bool,tab:m.object.isRequired,tabContent:m.object,thread:m.object};f.exports=n;}),null);
__d('FantaTabMainLoader.react',['Bootloader','FantaAppStore','FantaGetMessageActions','FantaMessageActions','FantaTabMain.react','immutable','React','emptyFunction','idx','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=function m(n){var o,p;c('FantaAppStore').addReducers(n);var q=c('FantaAppStore').getState(),r=(o=q)!=null?(o=o.mercury)!=null?o.tabContents:o:o;if(r)(function(){var s=r.reduce(function(t,u){var v=u.thread;if(v)t.push(v);return t;},[]);c('setImmediate')(function(){return c('FantaGetMessageActions').threadsUpdated(s);});})();k=c('emptyFunction');};h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$FantaTabMainLoader1=function(){var r=this.props.tab;c('FantaGetMessageActions').fetchMoreMessages(r.id);}.bind(this),this.$FantaTabMainLoader2=function(r,s){var t=this.props.tab;c('FantaMessageActions').sendSticker(t.id,r,s);}.bind(this),this.$FantaTabMainLoader3=function(r,s,t,u){var v=this.props.tab;c('FantaMessageActions').sendHotLike(v.id,r,s,t,u);}.bind(this),this.$FantaTabMainLoader4=function(r,s){var t=this.props.tab;c('FantaMessageActions').sendMessage(t.id,r,s);}.bind(this),this.$FantaTabMainLoader5=function(r,s){var t=this.props.tab;c('FantaMessageActions').sendPhoto(t.id,r,s);}.bind(this),n;}l.prototype.shouldComponentUpdate=function(m){var n=this.props;return n.isFocused!==m.isFocused||n.isHovered!==m.isHovered||n.isLastTabOfType!==m.isLastTabOfType||!n.tab.equals(m.tab)||!n.tabContent.equals(m.tabContent);};l.prototype.componentDidMount=function(){c('Bootloader').loadModules(["FantaReducersTabSheets"],k,'FantaTabMainLoader.react');};l.prototype.render=function(){var m=this.props,n=m.isFocused,o=m.isHovered,p=m.isLastTabOfType,q=m.raisedTabCount,r=m.tab,s=m.tabContent,t=s.hasFetchedAll,u=s.showContextBanner,v=s.thread,w=s.threadPreviewID,x=s.messages,y=w?r.id+'-'+w:r.id;if(!s)return c('React').createElement('div',{key:'noContent-'+y});if(!x)x=c('immutable').List();return c('React').createElement(c('FantaTabMain.react'),{hasFetchedAll:t,isFocused:n,isHovered:o,isLastGroupTab:p,key:y,messages:x,onLoadMoreMessages:this.$FantaTabMainLoader1,onSelectSticker:this.$FantaTabMainLoader2,onSendHotLike:this.$FantaTabMainLoader3,onSendMessage:this.$FantaTabMainLoader4,onSendPhoto:this.$FantaTabMainLoader5,raisedTabCount:q,showContextBanner:u,tab:r,tabContent:s,thread:v});};l.propTypes={isFocused:j.bool.isRequired,isHovered:j.bool.isRequired,isLastTabOfType:j.bool.isRequired,raisedTabCount:j.number,tab:j.object.isRequired,tabContent:j.object};f.exports=l;}),null);
__d('FantaTabMinimized.react',['cx','fbt','ChatBehavior','ChatTabBlinking','ChatTabHeaderContainer.react','CurrentUser','Event','FantaAvailableStatus','FantaTabActions','React','ReactDOM','SimpleXUIDialog','WorkFocusMode','emptyFunction','getVendorPrefixedEventName','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=/\D+/g,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={closing:false},this.$FantaTabMinimized4=function(){var t=this.props.tabContent;if(!t||t&&t.composerText.length===0){this.$FantaTabMinimized5();}else this.$FantaTabMinimized6();}.bind(this),this.$FantaTabMinimized3=function(event){var t=event.target;if(t&&t.classList&&!t.classList.contains('button')){event.preventDefault();c('FantaTabActions').unminimizeTab(this.props.tab.id);c('FantaTabActions').focusTab(this.props.tab.id);}}.bind(this),p;}n.prototype.componentDidMount=function(){this.$FantaTabMinimized2();};n.prototype.componentDidUpdate=function(){this.$FantaTabMinimized2();};n.prototype.shouldComponentUpdate=function(o){var p=this.props;return !p.tab.equals(o.tab)||!p.tabContent&&!!o.tabContent||!!p.tabContent&&!p.tabContent.equals(o.tabContent);};n.prototype.$FantaTabMinimized2=function(){var o=this.props,p=o.tab,q=o.tabContent,r=p.id;if(!q)return;var s=q.thread;if(!s)return;var t=this.refs.root&&c('ReactDOM').findDOMNode(this.refs.root);if(!t)return;var u=s.unread_count;if(c('WorkFocusMode')&&c('WorkFocusMode').currentViewerInFocusMode(r))return;if(u!==undefined){var v=!!u&&(!c('ChatBehavior').showsTabUnreadUI||c('ChatBehavior').showsTabUnreadUI());if(v){c('ChatTabBlinking').blinkTab(r,{getTabElem:function w(){return t;},isFocused:function w(){return false;},isHovered:function w(){return false;}});}else c('ChatTabBlinking').unblinkTab(r);}};n.prototype.render=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.thread&&q.thread.custom_color,s=r?{color:r}:null,t=p.id,u=q&&!!q.thread&&c('FantaAvailableStatus').isAvailable(q.thread,t);return c('React').createElement('div',{className:"_4cd8"+(' '+"_50mz")+(' '+"_50m_")+(' '+"fbNub")+(' '+"_50-v")+(u?' '+"_4-0b":'')+(' '+"_27_3"),ref:'root'},c('React').createElement('div',{className:(this.state.closing?"_2suj":'')+(' '+"clearfix")+(' '+"fbNubFlyoutTitlebar")+(' '+"titlebar")+(!!r?' '+"_1m34":''),style:s},c('React').createElement(c('ChatTabHeaderContainer.react'),{attachmentsShelf:document.createElement('div'),isActive:false,isRaised:false,isTyping:false,nameConversationFunc:c('emptyFunction'),rtcNuxShown:false,sheetController:{openAddFriendsSheet:c('emptyFunction'),openThreadIsMutedTabSheet:c('emptyFunction'),closeThreadIsMutedTabSheet:c('emptyFunction'),openMessageBlockedTabSheet:c('emptyFunction'),closeMessageBlockedTabSheet:c('emptyFunction')},showAddFriend:c('emptyFunction'),threadID:this.props.tab.id,viewer:c('CurrentUser').getID(),onClick:this.$FantaTabMinimized3,onCloseClick:this.$FantaTabMinimized4,onCloseKeyUp:c('emptyFunction'),onCloseMouseDown:c('emptyFunction'),onFileUploaderMounted:c('emptyFunction'),onFileUploaderSubmit:c('emptyFunction'),onKeyDown:function v(){},onRTCNuxCloseButtonClick:c('emptyFunction'),onUpdateAttachmentsShelf:c('emptyFunction'),onUploadFinished:c('emptyFunction')})));};n.prototype.$FantaTabMinimized5=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=c('ReactDOM').findDOMNode(this.refs.root);this.$FantaTabMinimized1=setTimeout(function(){return c('FantaTabActions').closeAndTabNext(r);},1.2*c('ifRequired')('cssVar',function(u){return "200ms".replace(l,'');},function(){return 200;}));var t=c('Event').listen(s,c('getVendorPrefixedEventName')('animationend'),function(u){if(u.animationName==='closeChatTab'){c('FantaTabActions').closeAndTabNext(r);clearTimeout(this.$FantaTabMinimized1);t.remove();}}.bind(this));this.setState({closing:true});};n.prototype.$FantaTabMinimized6=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=i._("Are you sure you want to close this chat window?");c('FantaTabActions').blurTab(r);var t=i._("You haven't sent your message.");c('SimpleXUIDialog').showConfirm(s,t,function(u){if(u){c('FantaTabActions').closeAndTabNext(r);}else c('FantaTabActions').focusTab(r);},{autofocusConfirm:true,useReactFocusBehavior:true});};n.propTypes={tab:m.object.isRequired,tabContent:m.object};f.exports=n;}),null);
__d('FantaMercuryTabsWithMain.react',['Bootloader','FantaAppStore','FantaCookieUtil','FantaMercuryTabOverflowBootloader.react','FantaTabActions','FantaTabGroup.react','FantaTabMainLoader.react','FantaTabMinimized.react','FluxContainer','LazyComponent.react','LoadOnRender.react','MercuryIDs','PresenceState','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=function l(m){c('Bootloader').loadModules(["messengerReasonDialogContainerReact"],function(n){var o=n.jsComponent;return m(o);},'FantaMercuryTabsWithMain.react');};h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.getStores=function(){return [c('FantaAppStore')];};k.calculateState=function(){return {tabGroup:c('FantaAppStore').getState().tabGroup,tabContents:c('FantaAppStore').getState().mercury.tabContents};};k.prototype.componentDidMount=function(){if(this.props.loadDataOnMount)c('FantaTabActions').loadFromData(c('FantaCookieUtil').convertCookieData(c('PresenceState').get()));};k.prototype.render=function(){return [c('React').createElement(c('FantaTabGroup.react'),{key:'tabgroup',MainComponent:c('FantaTabMainLoader.react'),MinimizedComponent:c('FantaTabMinimized.react'),OverflowComponent:c('FantaMercuryTabOverflowBootloader.react'),tabGroup:this.state.tabGroup,tabContents:this.state.tabContents,isLastOfTypeChecker:this.$FantaMercuryTabsWithMain1}),c('React').createElement(c('LoadOnRender.react'),{key:'dialog',component:c('React').createElement(c('LazyComponent.react'),null),loader:j,placeholder:c('React').createElement('span',null)})];};k.prototype.$FantaMercuryTabsWithMain1=function(l){return c('MercuryIDs').isGroupChat(l.id);};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k);}),null);
__d('FantaTabsReactApp',['ChatPerfInstrumentation','FantaMercuryTabsWithMain.react','FantaTabsAppBase','Map','React','ReactDOM','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0;h=babelHelpers.inherits(k,c('FantaTabsAppBase'));i=h&&h.prototype;k.prototype.initializeFantaData=function(l){e(['FantaAppStore','FantaCookieUtil','FantaGetMessageActions','FantaTabActions','MercuryThreadInformer','PresenceState'],function(m,n,o,p,q,r){p.loadFromData(n.convertCookieData(r.get(),null,l));r.registerStateLoader(function(s){return p.loadFromData(n.convertCookieData(s,m.getState().tabGroup,l));});r.registerStateStorer(function(s){var t=m.getState().tabGroup;if(!j||j&&!j.equals(t)){j=t;return n.createCookieData(t,s);}else return s;});q.get().subscribe('threads-updated',function(s,t){Object.keys(t).forEach(function(u){c('setImmediate')(function(){o.refreshThread(u);});});});c('ChatPerfInstrumentation').logInitData();});};k.prototype.initializeFantaUI=function(){e(['FantaAppStore','FantaMercuryThreadEventsBootloaded','FantaMessageActions','FantaTabActions','FantaTabViewportManager','FBRTCMessageHandler','MercuryBrowserAlerts'],function(l,m,n,o,p,q,r){q.init();r.init();c('ReactDOM').render(this.getViewComponent(),this.tabsElem);m.onMessagesReceived(function(t,u){c('setImmediate')(function(){n.receivedNewMessage(t,u);});});p.init(this.tabsElem);c('ChatPerfInstrumentation').logInitUI();var s=l.getState().tabGroup.tabs;if(s.toArray().length===0)c('ChatPerfInstrumentation').logDisplayDone();}.bind(this));};k.prototype.getViewComponent=function(){return c('React').createElement(c('FantaMercuryTabsWithMain.react'),{loadDataOnMount:false});};function k(){h.apply(this,arguments);}f.exports=new k();}),null);